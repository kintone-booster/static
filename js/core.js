/*
* FileName "core.js"
* Version: 1.0.0
* Copyright (c) 2023 Pandafirm LLC
* Distributed under the terms of the GNU Lesser General Public License.
* https://opensource.org/licenses/LGPL-2.1
*/
'use strict';window.KB_BREAK="__kb_break";window.KB_CONTINUE="__kb__continue";window.KB_SKIP="__kb__skip";
window.KintoneBooster=class{constructor(){this.roleSet=this.operator=this.event=this.error=null;this.eventHandlers={};this.popups={alert:null,loader:null,progress:null,multiPicker:null,colorPicker:null,datePicker:null};this.file={clone:(a,b=!1)=>new Promise((c,d)=>{var e=(f,g)=>{(k=>{kb.file.download(k,b).then(n=>{kb.file.upload(new File([n],k.name,{type:k.contentType}),b).then(h=>{k.fileKey=h.fileKey;f++;f<a.length?e(f,g):g()})}).catch(n=>{f++;f<a.length?e(f,g):g()})})(a[f])};0!=a.length?(b||kb.loadStart(),
e(0,()=>c())):c()}),download:(a,b=!1)=>new Promise((c,d)=>{b||kb.loadStart();fetch(kintone.api.url("/k/v1/file",!0)+"?fileKey="+a.fileKey,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>{b||kb.loadEnd();e.blob().then(f=>{switch(e.status){case 200:c(f);break;default:d({message:e.statusText,status:e.status})}})}).catch(e=>{b||kb.loadEnd();e=Error(e);switch(e.status){case 400:d({message:"INVALID_TOKEN",status:e.status});break;case 401:d({message:"UNAUTHORIZED",status:e.status});
break;case 500:d({message:"INTERNAL_SERVER_ERROR",status:e.status});break;case 502:d({message:"BAD_GATEWAY",status:e.status});break;case 404:d({message:"NOT_FOUND",status:e.status});break;default:d({message:"UNHANDLED_ERROR",status:e.status})}})}),upload:(a,b=!1)=>new Promise((c,d)=>{b||kb.loadStart();fetch(kintone.api.url("/k/v1/file",!0),{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest"},body:(e=>{var f=new Blob([a],{type:a.type});e.append("__REQUEST_TOKEN__",kintone.getRequestToken());
e.append("file",f,a.name);return e})(new FormData)}).then(e=>{b||kb.loadEnd();e.json().then(f=>{switch(e.status){case 200:c({contentType:a.type,fileKey:f.fileKey,name:a.name});break;default:d(f)}})}).catch(e=>{b||kb.loadEnd();e=Error(e);switch(e.status){case 400:d({message:"INVALID_TOKEN",status:e.status});break;case 401:d({message:"UNAUTHORIZED",status:e.status});break;case 500:d({message:"INTERNAL_SERVER_ERROR",status:e.status});break;case 502:d({message:"BAD_GATEWAY",status:e.status});break;case 404:d({message:"NOT_FOUND",
status:e.status});break;default:d({message:"UNHANDLED_ERROR",status:e.status})}})})}}alert(a,b){this.loadEnd();this.progressEnd();this.popups.alert.alert(a,b)}children(a){return Array.from(a.children)}clipboard(a){a=kb.create("input").attr("type","text").val(a);kb.elm("body").append(a);a.select();document.execCommand("copy");document.body.removeChild(a)}confirm(a,b,c){this.loadEnd();this.progressEnd();this.popups.alert.confirm(a,b,c)}create(a){return document.createElement(a)}device(){var a=navigator.userAgent;
return 0<a.indexOf("iPhone")||0<a.indexOf("iPod")||0<a.indexOf("Android")&&0<a.indexOf("Mobile")||0<a.indexOf("Windows Phone")?"sp":0<a.indexOf("iPad")||0<a.indexOf("Android")?"tab":"other"}downloadText(a,b){var c=window.URL||window.webkitURL;a=kb.create("a").attr("href",c.createObjectURL(new Blob([new Uint8Array([239,187,191]),a],{type:"text/plain"}))).attr("target","_blank").attr("download",b).css({display:"none"});kb.elm("body").append(a);a.click();document.body.removeChild(a)}elm(a){return document.querySelector(a)}elms(a){return Array.from(document.querySelectorAll(a))}encrypt(a,
b){return new Promise((c,d)=>{window.crypto.subtle.importKey("raw",(new TextEncoder).encode(b),{name:"AES-GCM",length:256},!1,["encrypt"]).then(e=>{(f=>{window.crypto.subtle.encrypt({name:"AES-GCM",iv:f},e,(new TextEncoder).encode(a)).then(g=>{g=new Uint8Array(g);c({data:btoa(String.fromCharCode(...g.slice(0,g.length-16))),iv:btoa(String.fromCharCode(...f)),tag:btoa(String.fromCharCode(...g.slice(g.length-16)))})})})(window.crypto.getRandomValues(new Uint8Array(12)))}).catch(e=>{kb.alert(kb.error.parse(e));
d()})})}extend(a,b){var c=(d,e)=>{if(e instanceof Function||e instanceof HTMLElement)return e;if(Array.isArray(e))d=e.map(g=>c({},g));else if(e instanceof Object)for(var f in e)"__proto__"!==f&&(f in d?[e[f],d[f]].every(g=>g instanceof Object&&!(g instanceof Array))&&(d[f]=c(d[f],e[f])):d[f]=e[f]instanceof Object?c({},e[f]):e[f]);else return e;return d};return c(a,b)}input(a,b,c,d){this.loadEnd();this.progressEnd();this.popups.alert.input(a,b,c,d)}isNumeric(a){return"string"===typeof a?a.match(/^-?[0-9]+(\.[0-9]+)*$/g):
"number"===typeof a?!isNaN(a):!1}loadEnd(){this.popups.loader.hide()}loadStart(){this.progressEnd();this.popups.loader.show()}pickupColor(a){this.popups.colorPicker.show(a)}pickupDate(a,b){this.popups.datePicker.show(a,b,!0)}pickupMultiple(a,b,c,d){this.popups.multiPicker.show(a,b,c,d)}progressEnd(){this.popups.progress.hide()}progressStart(a){this.loadEnd();this.popups.progress.show(a)}progressUpdate(){this.popups.progress.update()}queries(){var a={},b=decodeURI(window.location.search).split("?");
if(1<b.length){b=b.last().replace(/#.*$/g,"").split("&");for(var c=0;c<b.length;c++){var d=b[c].split("=");a[d[0]]=d[1]}}return a}ready(a){this.popups.alert||(this.operator=kintone.getLoginUser(),this.apps=new KintoneBoosterApps,this.error=new KintoneBoosterError,this.event=new KintoneBoosterEvent,this.oauth=new KintoneBoosterOAuth,this.roleSet=new KintoneBoosterRoleset,this.status=new KintoneBoosterStatus,this.popups.datePicker=new KintoneBoosterDatePicker,this.popups.colorPicker=new KintoneBoosterColorPicker,
this.popups.multiPicker=new KintoneBoosterMultipicker,this.popups.progress=new KintoneBoosterProgress,this.popups.loader=new KintoneBoosterLoader,this.popups.alert=new kintoneBoosterAlert,kb.elms("input,select,textarea").each((b,c)=>b.initialize()));switch(navigator.platform.replace(/^(iPad|iPhone|Linux|Mac|Win).*$/g,"$1")){case "iPad":case "iPhone":case "Mac":kb.elm("body").addClass("mac");break;case "Linux":kb.elm("body").addClass("linux");break;case "Win":kb.elm("body").addClass("win")}a&&a(this)}scroll(a,
b){var c=0,d=performance.now(),e=(window.pageYOffset-a)/2,f=g=>{var k=g-d;100<k&&(k=30);c+=Math.PI/(b/k);c>=Math.PI||(window.scrollTo(0,Math.round(a+e+e*Math.cos(c))),d=g,window.requestAnimationFrame(f))};window.requestAnimationFrame(f)}scrollTo(a,b){this.scroll(window.pageYOffset+a,b)}scrollTop(a){this.scroll(0,a)}themeColor(){return{backcolor:"#f0f0f0",forecolor:"#263238"}}timezoneOffset(){var a=(new Date).getTimezoneOffset()/60;return(0<a?"+":"-")+Math.floor(Math.abs(a)).toString()}};
window.KintoneBoosterApps=class{constructor(){}load(){return new Promise((a,b)=>{var c=0,d=[],e=f=>{kintone.api(kintone.api.url("/k/v1/apps",!0),"GET",{offset:c}).then(g=>{Array.prototype.push.apply(d,g.apps);c+=100;100==g.apps.length?e(f):f()}).catch(g=>kb.alert(kb.error.parse(g)))};e(()=>a(d))})}};
window.KintoneBoosterError=class{constructor(){this.config={update:a=>{var b="";switch(kb.operator.language){case "en":b='Due to an update of the plugin "'+a+'", some configuration information has changed.<br>For safe operation, please open the plugin settings page, make no changes, and simply click the "Save" button to update the settings.';break;case "ja":b=a+"\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u306b\u4f34\u3044\u3001\u4e00\u90e8\u306e\u8a2d\u5b9a\u60c5\u5831\u306b\u5909\u66f4\u304c\u751f\u3058\u3066\u304a\u308a\u307e\u3059\u3002<br>\u5b89\u5168\u306a\u904b\u7528\u306e\u305f\u3081\u3001\u4e00\u5ea6\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u8a2d\u5b9a\u753b\u9762\u3092\u958b\u304d\u3001\u7279\u306b\u5909\u66f4\u3092\u884c\u308f\u305a\u306b\u3001\u305d\u306e\u307e\u307e\u300c\u4fdd\u5b58\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u8a2d\u5b9a\u60c5\u5831\u306e\u66f4\u65b0\u3092\u884c\u3063\u3066\u4e0b\u3055\u3044\u3002";
break;case "zh":b="\u7531\u4e8e\u63d2\u4ef6\u201c"+a+"\u201d\u7684\u66f4\u65b0\uff0c\u90e8\u5206\u914d\u7f6e\u4fe1\u606f\u5df2\u53d1\u751f\u53d8\u5316\u3002<br>\u4e3a\u4e86\u5b89\u5168\u64cd\u4f5c\uff0c\u8bf7\u6253\u5f00\u63d2\u4ef6\u7684\u8bbe\u7f6e\u9875\u9762\uff0c\u4e0d\u505a\u4efb\u4f55\u66f4\u6539\uff0c\u7136\u540e\u76f4\u63a5\u70b9\u51fb\u201c\u4fdd\u5b58\u201d\u6309\u94ae\u6765\u66f4\u65b0\u8bbe\u7f6e\u3002";break;case "zh-TW":b="\u7531\u65bc\u5916\u639b\u7a0b\u5f0f\u300c"+a+"\u300d\u7684\u66f4\u65b0\uff0c\u90e8\u5206\u8a2d\u5b9a\u8cc7\u8a0a\u5df2\u767c\u751f\u8b8a\u66f4\u3002<br>\u70ba\u4e86\u5b89\u5168\u64cd\u4f5c\uff0c\u8acb\u958b\u555f\u5916\u639b\u7a0b\u5f0f\u7684\u8a2d\u5b9a\u9801\u9762\uff0c\u4e0d\u9032\u884c\u4efb\u4f55\u66f4\u6539\uff0c\u7136\u5f8c\u76f4\u63a5\u9ede\u64ca\u300c\u4fdd\u5b58\u300d\u6309\u9215\u4ee5\u66f4\u65b0\u8a2d\u5b9a\u3002"}return b}}}parse(a){var b=
[];if("string"===typeof a)b.push(a);else if(b.push("message"in a?a.message:"error"in a?a.error.message:""),"errors"in a)for(var c in a.errors)b.push(c.replace(/^record\./g,"").replace(/\.value(\[[0-9]+\]|)/g,"")+":"+a.errors[c].messages.join(","));return b.join("<br>")}};
window.KintoneBoosterEvent=class{constructor(){this.eventHandlers={}}on(a,b){(Array.isArray(a)?a:a.split(",").map(c=>c.trim())).each((c,d)=>{c&&(c in this.eventHandlers||(this.eventHandlers[c]=[]),this.eventHandlers[c].push(b))});return this}off(a,b){(Array.isArray(a)?a:a.split(",").map(c=>c.trim())).each((c,d)=>{c&&c in this.eventHandlers&&(this.eventHandlers[c]=this.eventHandlers[c].filter(e=>e!==b))});return this}call(a,b){var c=(d,e,f)=>{((g,k)=>new Promise((n,h)=>{n(g(k))}))(this.eventHandlers[a][d],
e).then(g=>{null!==g&&"object"===typeof g&&g.constructor===Object&&(e=g);e.error?f(e):(d++,d<this.eventHandlers[a].length?c(d,e,f):f(e))})};return new Promise((d,e)=>{Object.assign(b,{type:a,error:!1});a in this.eventHandlers?0!=this.eventHandlers[a].length?c(0,b,f=>d(f)):d(b):d(b)})}};
window.KintoneBoosterOAuth=class{constructor(){}authorize(a,b,c,d){return new Promise((e,f)=>{const g=window.open("","popup",`width=500,height=600,top=${window.screen.height/2-300},left=${window.screen.width/2-250}`),k=(()=>{var h="",l=encodeURIComponent("https://api.kintone-booster.com/oauth/redirect"),m=encodeURIComponent(window.location.href);switch(d){case "google":h="https://accounts.google.com/o/oauth2/v2/auth?client_id="+a+"&response_type=code&redirect_uri="+l+"&scope="+encodeURIComponent(c)+
"&state="+m+"&access_type=offline&prompt=consent";break;case "microsoft":h="https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id="+a+"&response_type=code&redirect_uri="+l+"&scope="+encodeURIComponent(c)+"&state="+m+"&prompt=consent"}return h})();g.location.href=k;const n=h=>{h.origin!==window.location.origin&&f(Error("Origin mismatch"));h.data.code?fetch("https://api.kintone-booster.com/oauth/refresh",{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({client_id:a,
client_secret:b,auth_code:h.data.code,subdomain:location.host.split(".")[0],provider:d,redirect_uri:"https://api.kintone-booster.com/oauth/redirect"})}).then(l=>{l.json().then(m=>{l.ok?m.result?e(m.result):f(Error("No refresh token found in response")):f(Error(kb.error.parse(m.error)))})}).catch(l=>{f(Error(kb.error.parse(l)))}):h.data.error?f(Error(h.data.error)):f(Error("Authorization failed"));window.removeEventListener("message",n)};window.addEventListener("message",n,!1)})}callback(){var a=new URLSearchParams(window.location.search),
b=a.get("code");return b?(window.opener.postMessage({code:b},window.location.origin),window.close(),!0):a.get("error")?(window.opener.postMessage({error:a.get("error")},window.location.origin),window.close(),!0):!1}};
window.KintoneBoosterRoleset=class{constructor(){this.group=[];this.organization=[];this.user=[]}load(){return new Promise((a,b)=>{var c=()=>new Promise((e,f)=>{var g=0,k=[],n=h=>{kintone.api(kintone.api.url("/v1/organizations",!0)+"?size=100&offset="+g,"GET",{}).then(l=>{Array.prototype.push.apply(k,l.organizations.map(m=>({code:{value:m.code},name:{value:m.name},info:m})));g+=100;100==l.organizations.length?n(h):h()}).catch(l=>f(l))};n(()=>e(k))}),d=()=>new Promise((e,f)=>{var g=0,k=[],n=h=>{kintone.api(kintone.api.url("/v1/users",
!0)+"?size=100&offset="+g,"GET",{}).then(l=>{Array.prototype.push.apply(k,l.users.map(m=>({code:{value:m.code},name:{value:m.name},info:m})));g+=100;100==l.users.length?n(h):h()}).catch(l=>f(l))};n(()=>e(k))});(()=>new Promise((e,f)=>{var g=0,k=[],n=h=>{kintone.api(kintone.api.url("/v1/groups",!0)+"?size=100&offset="+g,"GET",{}).then(l=>{Array.prototype.push.apply(k,l.groups.map(m=>({code:{value:m.code},name:{value:m.name},info:m})));g+=100;100==l.groups.length?n(h):h()}).catch(l=>f(l))};n(()=>e(k))}))().then(e=>
{this.group=e;c().then(f=>{this.organization=f;d().then(g=>{this.user=g;a()}).catch(g=>kb.alert(kb.error.parse(g)))}).catch(f=>kb.alert(kb.error.parse(f)))}).catch(e=>kb.alert(kb.error.parse(e)))})}};
window.KintoneBoosterStatus=class{constructor(){}load(a){return new Promise((b,c)=>{kintone.api(kintone.api.url("/k/v1/app/status",!0),"GET",{app:a}).then(d=>{d.actions?d.actions=d.actions.reduce((e,f)=>{f.key=f.name+":"+f.from+":"+f.to;e.push(f);return e},[]):(d.actions=[],d.states={});b(d)}).catch(d=>kb.alert(kb.error.parse(d)))})}};
window.KintoneBoosterDialog=class{constructor(a,b,c){this.parts={button:kb.create("button").addClass("kb-dialog-button").css({backgroundColor:"transparent",border:"none",boxSizing:"border-box",color:"#42a5f5",cursor:"pointer",display:"inline-block",fontSize:"1em",height:"2em",lineHeight:"2em",outline:"none",margin:"0",padding:"0",position:"relative",textAlign:"center",verticalAlign:"top",width:"50%"}),div:kb.create("div").css({boxSizing:"border-box",position:"relative",verticalAlign:"top"}),icon:kb.create("img").css({backgroundColor:"transparent",
border:"none",boxSizing:"border-box",cursor:"pointer",display:"block",height:"1.5em",margin:"0.25em",position:"absolute",width:"1.5em"}),input:kb.create("input").css({backgroundColor:"transparent",border:"none",boxSizing:"border-box",display:"inline-block",fontSize:"1em",height:"2em",lineHeight:"1.5em",margin:"0",outline:"none",padding:"0.25em",position:"relative",verticalAlign:"top",width:"100%"}),select:kb.create("select").css({backgroundColor:"transparent",border:"none",boxSizing:"border-box",
display:"inline-block",fontSize:"1em",height:"2em",lineHeight:"1.5em",margin:"0",outline:"none",padding:"0.25em",position:"relative",verticalAlign:"top",width:"100%",appearance:"none",mozAppearance:"none",webkitAppearance:"none"}),span:kb.create("span").css({boxSizing:"border-box",display:"inline-block",margin:"0",padding:"0",position:"relative",verticalAlign:"top"}),table:kb.create("table").css({border:"none",borderCollapse:"collapse",margin:"0",width:"100%"}),td:kb.create("td").css({border:"none",
borderBottom:"1px solid #42a5f5",boxSizing:"border-box",lineHeight:"1.5em",margin:"0",padding:"0.25em 0.5em",textAlign:"left"}),th:kb.create("th").css({border:"none",boxSizing:"border-box",fontWeight:"normal",lineHeight:"2em",margin:"0",padding:"0",position:"sticky",textAlign:"center",top:"0",zIndex:"2"})};this.cover=this.parts.div.clone().addClass("kb-dialog").css({alignItems:"center",backgroundColor:"rgba(0,0,0,0.5)",display:"none",height:"100%",justifyContent:"center",left:"0px",position:"fixed",
top:"0px",width:"100%",zIndex:a});this.container=this.parts.div.clone().css({borderRadius:"0.25em",boxShadow:"0 0 3px rgba(0,0,0,0.35)",cursor:"default",maxHeight:"calc(100% - 1em)",maxWidth:"calc(100% - 1em)",padding:"2em 0 calc(2em + 1px) 0"});this.contents=this.parts.div.clone().css({height:"100%",overflowX:"hidden",overflowY:"auto",padding:"1em",width:"100%"});this.header=this.parts.div.clone().css({borderTopLeftRadius:"0.25em",borderTopRightRadius:"0.25em",boxShadow:"0 1px 0 #42a5f5",height:"2em",
left:"0",lineHeight:"2em",overflow:"hidden",padding:"0 2em 0 0",position:"absolute",textAlign:"center",textOverflow:"ellipsis",top:"0",whiteSpace:"nowrap",width:"100%"});this.footer=this.parts.div.clone().css({borderTop:"1px solid #42a5f5",bottom:"0",left:"0",position:"absolute",textAlign:"center",width:"100%"});this.ok=this.parts.button.clone().html("OK");this.cancel=this.parts.button.clone().html("Cancel");this.close=this.parts.icon.clone().css({right:"0",top:"0"}).attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA9pJREFUeNpiYKAUMMIY/VMmvgdSAjB+YU4+WI4JSbFAQXYeA5KG/+gKGCZMncSArAhDAUyRm7MriCmI4gZkY0GSQDd8IMoXAAFEHf//RxL/ALRbkAldAuo1AQxvgSRA3kL3syDIn8gS6HaCjHqPHN54AUAAUceraMENdwISwAh6RmyaQJ7btXc3ik4kMbgh6CkAbBtMIyjoYEkGybD3OJMPephjS3M4/YyezNEAONqpEtoAATREEa5Egh5oWAMKW2j/x2UTeoJnwqYxMyUdRROMj24wzkQC04BuEDJgRrK1AUg5gNhnzp1lMDUyYbCxtGb4+/cvw/Q5M+EaPLw8GXdu23EAr80kA5CfQPjHjx9gjM4m2s8wpyI7mXZRhaTgA5bcxDh40jZAAI3mZmLToQMsF0DBAWBEHqC6xUCL1gOpABLM3QB0SCDZFpNhIdEOYMRjKUrhCSqJ2NnZGX7+/Ik1h+KRJ67QRYrD/biKRGQLCDkIChzR0wALDoUOhMol5BofvW2Ew7wDxBR8B/BVAiALQT4EWQiiQXx8lQI28wZXHA9oqh7QfEzLkmvkAYAAGkWjYNC1QAqQilNQkTiBZhZDG/31BJQ1Ah3RQBWLcXS5CQGCoyFMBCw1IMNScE8cqpc8i4HgPAXp5zxZFkPrY5ShAlERUZwGgeTQhxDQzSBoMTReMYYWosMjsVoOEgPJYQECULOI9vF6dIGlK5djtRzZUpgaQmbhsxijsff6zWsMy9EtBakhtuFIUv8a3XIiLCU7VWO1HHk0DMQm1VKyLAYFL3Q8FT4Ehy+1U8Vi9DjFleAosfgAIUtBwYstwRHbOcBlcSC2PIwtIaFbToxZOC2GFvAfsOVlbAkJ2XIsIy8fyOkf/6ekssc33EMocRlSYK/hoKyPB28LhFZtrlEw/AFAgPas6AZBIIZeiAM5gNG4gTH+KyM4gSPoBuq/MW5gNA7AJrCBXrEm98HJtQVE6Av9BO6l7bV91UehUHRfhQismlAxQfpcmi/St6chPZq3FJq1mjC2Bhvj35tzkGFPs2sFYRQ59taGDURkYi225JPGCWPIXhsiWkR8ygn5SBC66Y/IGvxviueo18Nlc4SrcMHm6XQ5kwQKmKwXs3m+ufqgZH8XPLOQCVuyK8xX0oFDiHPfQ0BeH+og/JR4qoiAkGjQ4M8diSFfttQU8BG6Pe5mMhqLibqcQ0rXgPBBVm2Fw8MG2SUO5uqBQqKk80WmZ6B4mNXmhYQ0GMiPQk9nemkJPZxf/1WXJV+OEz0ea+NRZS/NLVE1YE2dono3POh4qAJAxyQehUKh+Cu8AL45fzrg+n0KAAAAAElFTkSuQmCC").on("click",
d=>{this.hide();d.stopPropagation();d.preventDefault()});kb.elm("body").append(this.cover.append(this.container.append(this.contents)).on("mousedown,touchstart",d=>d.stopPropagation()));b?this.container.css({paddingTop:"0"}):this.container.append(this.header).append(this.close);c?this.container.css({paddingBottom:"0"}):this.container.append(this.footer.append(this.ok.css({borderBottomLeftRadius:"0.25em"})).append(this.cancel.css({borderBottomRightRadius:"0.25em"})));kb.elm(".kb-dialog-style")||kb.elm("head").append(kb.create("style").addClass("kb-dialog-style").attr("type",
"text/css").text(".kb-dialog *{  box-sizing:border-box;  font-family:system-ui,sans-serif;  line-height:1.5em;  position:relative;  vertical-align:top;  -webkit-overflow-scrolling:touch;  -webkit-text-size-adjust:100%;}.kb-dialog-button:hover{  background-color:#42a5f5 !important;  color:rgba(255,255,255,1) !important;}"))}show(){this.container.css({backgroundColor:kb.themeColor().backcolor,color:kb.themeColor().forecolor});this.container.elms("input,select").each((a,b)=>{a.css({backgroundColor:kb.themeColor().backcolor,
color:kb.themeColor().forecolor})});this.cover.show("flex");return this}hide(){this.cover.hide();return this}};
window.kintoneBoosterAlert=class extends KintoneBoosterDialog{constructor(){super(999999,!0,!1);this.handler=null;this.prompt=this.parts.input.clone().css({border:"1px solid #42a5f5",marginTop:"0.25em"}).on("keydown",a=>{if(13==(a.keyCode||a.which))return this.ok.focus(),a.stopPropagation(),a.preventDefault(),!1});this.cancel.on("click",a=>this.hide());window.on("resize",a=>{this.contents.css({height:"auto"}).css({height:this.container.innerHeight().toString()+"px"})})}alert(a,b){this.handler&&(this.ok.off("click",
this.handler),this.cancel.off("click",this.handler));this.handler=c=>{this.hide();b&&b()};this.ok.on("click",this.handler);this.ok.css({borderBottomRightRadius:"0.25em",borderRight:"none",width:"100%"});this.cancel.css({display:"none"});a.nodeName?this.contents.empty().append(a):this.contents.html(a);this.container.css({minWidth:""});this.show()}confirm(a,b,c){this.handler&&(this.ok.off("click",this.handler),this.cancel.off("click",this.handler));this.handler=d=>{this.hide();b&&b(d.currentTarget==
this.cancel)};this.ok.on("click",this.handler);if(c)this.cancel.on("click",this.handler);this.ok.css({borderBottomRightRadius:"0",borderRight:"1px solid #42a5f5",width:"50%"});this.cancel.css({display:"inline-block"});a.nodeName?this.contents.empty().append(a):this.contents.html(a);this.container.css({minWidth:"8em"});this.show()}input(a,b,c,d){this.handler&&(this.ok.off("click",this.handler),this.cancel.off("click",this.handler));this.handler=e=>{this.hide();b&&b(this.prompt.val())};this.ok.on("click",
this.handler);this.ok.css({borderBottomRightRadius:"0",borderRight:"1px solid #42a5f5",width:"50%"});this.cancel.css({display:"inline-block"});a.nodeName?this.contents.empty().append(a):this.contents.empty().append(this.parts.span.clone().html(a));this.contents.append(this.prompt.attr("type",c?c:"password").val(d?d:""));this.container.css({minWidth:"8em"});this.show()}show(){super.show();this.contents.css({height:"auto"}).css({height:this.container.innerHeight().toString()+"px"});this.ok.focus();
return this}};
window.KintoneBoosterCalendar=class{constructor(a){this.minimalise=a;this.calendar=kb.create("table").css({borderCollapse:"collapse",margin:"0",width:"100%"});((b,c)=>{this.calendar.append((d=>{d.append(kb.create("tr"));c.each((e,f)=>d.elm("tr").append(b.clone().html(e)));return d})(kb.create("thead")));this.calendar.append((d=>{(6*c.length).each(e=>{0==e%c.length&&d.append(kb.create("tr"));d.elms("tr").last().append(b.clone())});return d})(kb.create("tbody")))})(kb.create("td").css({boxSizing:"border-box",margin:"0",
padding:"0",textAlign:"center",width:"calc(100% / 7)"}),kb.constants.weeks[kb.operator.language])}show(a,b,c){var d=0,e={backgroundColor:"#42a5f5",color:"#ffffff"},f={backgroundColor:"",color:kb.themeColor().forecolor},g={backgroundColor:"",color:"#42a5f5"},k={backgroundColor:"",color:"#fa8273"},n={backgroundColor:"#ffb46e",color:"#ffffff"};this.calendar.elms("tbody tr").each((h,l)=>{h.css({display:"table-row"});h.elms("td").each((m,p)=>{var q=a;p=d-a.getDay();var r=f;m.empty();if(0>p)m.css(r).html("&nbsp;").off("click"),
d++;else if(q=q.calc(p.toString()+" day"),q.format("Y-m")!=a.format("Y-m"))m.css(r).html("&nbsp;").off("click"),d++,this.minimalise&&1==d%7&&m.closest("tr").hide();else{switch((d+1)%7){case 0:r=g;break;case 1:r=k}q.format("Y-m-d")==(new Date).format("Y-m-d")&&(r=n);b&&q.format("Y-m-d")==b.format("Y-m-d")&&(r=e);m.off("click").on("click",t=>{c&&c.select&&c.select(m,q)});c&&c.create&&c.create(m,q,r);d++}})})}};
window.KintoneBoosterColorPicker=class extends KintoneBoosterDialog{constructor(){super(999997,!1,!1);this.callback=null;this.colors={hue:"#d93636 #d95136 #d96c36 #d98736 #d9a336 #d9be36 #d9d936 #bed936 #a3d936 #87d936 #6cd936 #51d936 #36d936 #36d951 #36d96c #36d987 #36d9a3 #36d9be #36d9d9 #36bed9 #36a3d9 #3687d9 #366cd9 #3651d9 #3636d9 #5136d9 #6c36d9 #8736d9 #a336d9 #be36d9 #d936d9 #d936be #d936a3 #d93687 #d9366c #d93651 #ffffff #eeeeee #bdbdbd #757575 #424242 #000000".split(" "),mellow:"#72afd5 #4394c7 #9ebdb5 #8b8bbb #6565a4 #b2b2d2 #afdea6 #7ac86a #8ed081 #fde549 #fef19a #fde75e #6b999e #6d9c92 #598288 #a1cae3 #cf6371 #e7b1b8 #d8838d #ef6643 #d1b1c8 #e08e45 #9ec5ab #e3c567 #baab68 #ed1c24 #77966d #a69888 #f2f7f2 #426b69 #bcaa99 #f0803c #bf211e #ea9010 #437c90 #e85f5c #ffffff #eeeeee #bdbdbd #757575 #424242 #000000".split(" "),
forest:"#347321 #44780a #558620 #1b5e20 #8ba03e #90b566 #638538 #79ae37 #87bc42 #61964b #3d7085 #64988e #345644 #6b7f5c #b0b17c #ecddba #e1c584 #b4a18f #c89660 #a17d5e #796e63 #89542f #692f11 #913636 #ad5f52 #473c31 #473731 #786159 #ad9b95 #a39a8e #6e6262 #70624d #997e6e #bdb1a4 #bdbca4 #87866c #ffffff #eeeeee #bdbdbd #757575 #424242 #000000".split(" "),emotion:"#f8b195 #f67280 #c06c84 #6c5b7b #355c7d #99b898 #feceab #ff847c #e84a5f #a8a7a7 #cc527a #e8175d #a8e6ce #dcedc2 #ffd3b5 #ffaaa6 #ff8c94 #a7226e #ec2049 #f26b38 #f7db4f #2f9599 #e1f5c4 #ede574 #f9d423 #fc913a #ff4e50 #e5fcc2 #9de0ad #45ada8 #547980 #fe4365 #fc9d9a #f9cdad #c8c8a9 #83af9b #ffffff #eeeeee #bdbdbd #757575 #424242 #000000".split(" ")};
this.input=this.parts.input.clone().css({borderBottomLeftRadius:"0.25em",width:"calc(100% - 5em)"}).attr("placeholder",kb.constants.dialog.color.prompt[kb.operator.language]).attr("type","text");this.theme=this.parts.select.clone().css({textAlign:"center",width:"calc(100% + 2em)"}).assignOption(Object.keys(this.colors).map(a=>({id:a})),"id","id").on("change",a=>{this.contents.elms("div").each((b,c)=>{b.css({backgroundColor:this.colors[this.theme.val()][c]})})});this.ok.css({borderBottomLeftRadius:"",
borderBottomRightRadius:"0.25em",width:"5em"}).on("click",a=>{this.input.val()?(this.callback&&this.callback("#"+this.input.val().replace(/#/g,"")),this.hide()):kb.alert(kb.constants.dialog.color.message.invalid[kb.operator.language])});this.cancel.css({display:"none"});this.container.css({height:"calc(352px + 4em)",width:"300px"});this.contents.css({padding:"3px 2px 2px 2px",textAlign:"center"});this.header.append(this.theme);this.footer.insertBefore(this.input,this.ok);this.colors.hue.each((a,b)=>
{this.contents.append(this.parts.div.clone().css({backgroundColor:a,cursor:"pointer",display:"inline-block",height:"calc((100% / 7) - 4px)",margin:"2px",width:"calc((100% / 6) - 4px)"}).on("click",c=>{this.callback&&this.callback(this.colors[this.theme.val()][b]);this.hide()}))})}show(a){a&&(this.callback=a);this.input.val("");super.show()}};
window.KintoneBoosterDatePicker=class extends KintoneBoosterDialog{constructor(){super(999997,!1,!0);this.activedate=this.callback=null;this.month=(new Date).calc("first-of-month");this.feed=this.parts.icon.clone().css({top:"0px"});this.calendar=new KintoneBoosterCalendar;this.caption=this.parts.span.clone().css({display:"block",lineHeight:"2em",padding:"0px 2em",textAlign:"center",width:"100%"});this.prev=this.feed.clone().css({left:"0px"}).attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAjZJREFUeNpiYKAJ6J8y8T+MzYIm0QCk6pHFmNA016ObhqKgMCefkfoOBggg6vr9Psz/LLgCBcVb6BI4gxSvQqJMAQggugYDinNYSNVAUDOxHmbCJghNRo2ENDMSG+VASoGq6RMggIY7Agbae6Limdh4ZyGgaT2QCiAphRGbyliwaALZtJ7s5EksYCTF2ehJE6fNUIUbqFIIUFQuYUskAwcAAmgUUTP3F5CUpSi0DD07TqCZxUDLQBXBfVL1sZBpmQCQoiiPsJCRIQWoES3ENAn2AykHaic+Rlr6GF8DgJGWcUx1i4lN1TS1GF8+HpC2FqGSa+QBgAAaRaNgFBBVcJDVm6BCL4uo2ouFShYaAKnzNG/6oFkKstCALm0uarS7mMi0tJ+ujT1i+79UtRhav/ZTKwewUDubULN5S5MRO4KJC9pu+kB3i6GWC4KoAWvQkxL0hFqYJOdjqIET6BLUWCwHBbsg3S2GWv4B6vsLdLUYyQGGQMqQ5omL2IKG6omL3tluFIwCkgFAgPbN6AZAGASi1XQQR3BD3aSrGhLilzZqoQK9iwu8RLnrUfFAEORKbla63NNSRbq21KPZOCQFqJIqC133wAxJt2FU+uZsCHRPF9d+QgFzq7FJlwymgHk/U3pCdgfmgpMm7PL3p5MVIU8bsTQUpbtxcRsxB6xtI9Ka02CaPL7SLdFSLUtrDi2TwJq2ZB5YOni4ApaIlm6Bvx4eQgC/8fVQwE9sLizwnc3hbwMIgobRAdIK28oCHbudAAAAAElFTkSuQmCC").on("click",
a=>{this.month=this.month.calc("-1 month,first-of-month");this.show()});this.next=this.feed.clone().css({right:"0px"}).attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAi1JREFUeNpiYKAa6J8y8T8Q30cXZ0LjK4AU4lMANw3GZkGXLMzJZ2QgpIskABBAVPI/Xr9DA6gBn7/rcUri9DNJACCAaO9lXICRkGZ8HmQkxWZ0g5iIdGEjNhew4NHwAKhBkWaBCxBAwwUBo+o9sWqxRZUAsamMiUDJtJ4szVAQgM8VTMRmFiAOIEszLsBCjCJcOYuQzRvwZUkWUm2jWiIZOAAQQKMIW8QV0MJcRmKyExI3EJjsNgyExchAEeiIBwNhMTIQBDriw0BYDAMfgA4QHAiLkcEBoCMcKSo1aeFjallMchxTYjFFqZpUi6mWjwes5Bp5ACCARtEoGJlNn/+0KESI7RD0U7vRTEpPRADqewN6WwwD54GWnx/Ixh5Z9TBVOn1A8B7osP6BsBgECshplzENVLZjona2JzbbUdtiogdDaGHxB2K69dS2uJDe7WqSBy+o4eMJ5IyYUOpjsksuci2+ALTQkBIXk2OxIdDSC5TGDwuJ2USQWomRidrZZBSMggEHAAHaNaMbAEEYiBLDgo7AJo7gaI7gCI5giMSAn0LLNb0XBuAlhF4LXIQQU3Q/vZfcnsPI2jNPtSZck+e66W/utCjcpPzw/DC4vAjXZPHNk/DbDxT53YvwVz6pvecACNec5aY/vAg3zb5UmUMVFitzFoSHlrklOCMa2OPQI40qLHZpIQmrlKXZwurBI06SnBYtNYUhmgdpYbj2UEIYegAwStjMiIcQQkxxA49895hLUEtfAAAAAElFTkSuQmCC").on("click",
a=>{this.month=this.month.calc("1 month,first-of-month");this.show()});this.calendar.calendar.css({marginTop:"0.25em",width:"calc(17.5em + 8px)"}).elms("td").each((a,b)=>{a.css({border:"1px solid #42a5f5",height:"2.5em",lineHeight:"2.5em",width:"2.5em"})});this.container.css({height:"calc(22.25em + 8px)"});this.contents.css({padding:"0 0.5em"}).append(this.parts.div.clone().append(this.caption).append(this.prev).append(this.next)).append(this.calendar.calendar);this.header.css({boxShadow:"none"})}show(a,
b,c){a?a.match(/^[0-9]{4}(-|\/){1}[0-1]?[0-9]{1}(-|\/){1}[0-3]?[0-9]{1}$/g)&&(this.activedate=new Date(a.replace(/-/g,"/")),this.month=this.activedate.calc("first-of-month")):c&&(this.activedate=null,this.month=(new Date).calc("first-of-month"));b&&(this.callback=b);this.caption.html(this.month.format("Y-m"));this.calendar.show(this.month,this.activedate,{create:(d,e,f)=>{d.css(f).css({cursor:"pointer",fontWeight:"normal"}).html(e.getDate().toString())},select:(d,e)=>{this.callback&&this.callback(e.format("Y-m-d"));
this.hide()}});super.show()}};
window.KintoneBoosterMultipicker=class extends KintoneBoosterDialog{constructor(){super(999997,!0,!1);this.table=this.callback=null;this.columnInfos={};this.records=[];this.selection=[];this.ok.css({borderRight:"1px solid #42a5f5"}).on("click",a=>{this.callback&&this.callback(this.selection.map(b=>this.records[b]));this.hide()});this.cancel.on("click",a=>this.hide());this.container.css({height:"calc(34.5em + 15px)",minWidth:"16em"});this.contents.css({padding:"0px"})}show(a,b,c,d){var e=null,f=null,
g=this.parts.div.clone().css({borderBottom:"1px solid #42a5f5",padding:"0px 0.5em"}),k=this.parts.td.clone().css({cursor:"pointer"}),n=this.parts.th.clone().css({backgroundColor:kb.themeColor().backcolor,lineHeight:"2.5em"});if(a instanceof Array)if(0!=a.length){this.callback=c;this.columnInfos=b;this.records=a;this.selection=[];this.table=this.parts.table.clone().append(kb.create("thead").append(kb.create("tr"))).append(kb.create("tbody").append(kb.create("tr")));for(var h in this.columnInfos)this.table.elm("thead tr").append(n.clone().css({display:"display"in
this.columnInfos[h]?this.columnInfos[h].display:"table-cell",width:"width"in this.columnInfos[h]?this.columnInfos[h].width:"auto"}).append(g.clone().html("text"in this.columnInfos[h]?this.columnInfos[h].text:""))),e=k.clone().css({display:"display"in this.columnInfos[h]?this.columnInfos[h].display:"table-cell",textAlign:"align"in this.columnInfos[h]?this.columnInfos[h].align:"left"}).attr("id",h),"decimals"in this.columnInfos[h]&&e.attr("data-decimals",this.columnInfos[h].decimals),this.table.elm("tbody tr").append(e);
this.table.elms("thead tr th").first().css({borderTopLeftRadius:"0.25em"});this.table.elms("thead tr th").last().css({borderTopRightRadius:"0.25em"});this.contents.empty().append(this.table.spread((l,m)=>{l.on("click",p=>{this.selection.includes(m)?(this.selection=this.selection.filter(q=>q!=m),l.css({backgroundColor:"transparent",color:kb.themeColor().forecolor})):(this.selection.push(m),l.css({backgroundColor:"rgba(66,165,245,0.5)",color:""}))})}));this.table.clearRows();this.records.each((l,m)=>
{f=this.table.addRow();for(var p in this.columnInfos)f.elm("#"+p).hasAttribute("data-decimals")?l[p].value?f.elm("#"+p).html(Number(l[p].value).comma(f.elm("#"+p).attr("data-decimals"))):f.elm("#"+p).html(l[p].value):f.elm("#"+p).html(l[p].value);d&&d.some(q=>{var r=!0,t;for(t in q)q[t].value!=l[t].value&&(r=!1);return r})&&(this.selection.push(m),f.css({backgroundColor:"rgba(66,165,245,0.5)",color:""}))});super.show()}else kb.alert(kb.constants.common.message.notfound[kb.operator.language]);else kb.alert(kb.constants.common.message.invalid.parameter[kb.operator.language])}};
window.KintoneBoosterLoader=class{constructor(){var a=kb.create("span"),b={"0%":{transform:"translateY(0);"},"25%":{transform:"translateY(0);"},"50%":{transform:"translateY(-0.5em);"},"100%":{transform:"translateY(0);"}};a.css({color:"#ffffff",display:"inline-block",lineHeight:"2em",padding:"0px 1px",verticalAlign:"top",WebkitAnimationName:"loading",WebkitAnimationDuration:"1s",WebkitAnimationTimingFunction:"ease-out",WebkitAnimationIterationCount:"infinite",animationName:"loading",animationDuration:"1s",
animationTimingFunction:"ease-out",animationIterationCount:"infinite"});this.cover=kb.create("div").css({backgroundColor:"rgba(0,0,0,0.5)",boxSizing:"border-box",display:"none",height:"100%",left:"0px",position:"fixed",top:"0px",width:"100%",zIndex:"999998"});this.container=kb.create("p").css({bottom:"0",fontSize:"0.8em",height:"2em",left:"0",margin:"auto",maxHeight:"100%",maxWidth:"100%",overflow:"hidden",padding:"0px",position:"absolute",right:"0",textAlign:"center",top:"0",width:"100%"});kb.elm("head").append(kb.create("style").attr("type",
"text/css").text(["-webkit-",""].map(c=>"@"+c+"keyframes loading"+JSON.stringify(b).replace(/:{/g,"{").replace(/[,"]/g,"")).join(" ")));kb.elm("body").append(this.cover.append(this.container.append(kb.create("span").css({color:"#ffffff",display:"inline-block",lineHeight:"2em",paddingRight:"0.25em",verticalAlign:"top"}).html("Please wait a moment")).append(a.clone().css({animationDelay:"0s"}).html(".")).append(a.clone().css({animationDelay:"0.1s"}).html(".")).append(a.clone().css({animationDelay:"0.2s"}).html(".")).append(a.clone().css({animationDelay:"0.3s"}).html(".")).append(a.clone().css({animationDelay:"0.4s"}).html("."))))}show(){this.cover.css({display:"block",
zIndex:kb.popups.alert.cover.style.zIndex-1})}hide(){this.cover.css({display:"none"})}};
window.KintoneBoosterPopupform=class extends KintoneBoosterDialog{constructor(a,b,c,d){super(999996,!1,!1);kb.isNumeric(b)?this.container.css({width:b+"px"}):"full"==b&&this.container.css({width:"100%"});kb.isNumeric(c)?this.container.css({height:c+"px"}):"full"==c&&this.container.css({height:"100%"});this.ok.css({borderRight:"1px solid #42a5f5"}).on("click",e=>{d.ok();this.hide()});this.cancel.on("click",e=>{d.cancel();this.hide()});this.close.hide();this.contents.css({overflow:"auto",padding:"0.5em"}).append(a.css({margin:"0px auto"}))}};
window.KintoneBoosterPopupwindow=class extends KintoneBoosterDialog{constructor(a,b,c,d,e){super(999996,!1,!0);kb.isNumeric(b)?this.container.css({width:b+"px"}):"full"==b&&this.container.css({width:"100%"});kb.isNumeric(c)?this.container.css({height:c+"px"}):"full"==c&&this.container.css({height:"100%"});this.close.off("click").on("click",f=>{this.hide();e&&e();f.stopPropagation();f.preventDefault()});Array.isArray(d)&&(this.header.css({textAlign:"left"}),d.each((f,g)=>this.header.append(this.parts.icon.clone().attr("src",
f.src)).on("click",k=>f.handler())));this.contents.css({overflow:"auto",padding:"0.5em"}).append(a.css({margin:"0px auto"}))}};
window.KintoneBoosterProgress=class{constructor(){this.counter=0;this.cover=kb.create("div").css({backgroundColor:"rgba(0,0,0,0.5)",boxSizing:"border-box",display:"none",height:"100%",left:"0px",position:"fixed",top:"0px",width:"100%",zIndex:"999998"});this.container=kb.create("p").css({bottom:"0",fontSize:"0.8em",height:"2em",left:"0",margin:"auto",maxHeight:"100%",maxWidth:"100%",overflow:"hidden",padding:"0px",position:"absolute",right:"0",textAlign:"center",top:"0",width:"100%"});this.monitor=
kb.create("span").css({color:"#ffffff",display:"inline-block",lineHeight:"2em",verticalAlign:"top"});this.progress=kb.create("div").css({backgroundColor:"#ffffff",bottom:"0",display:"inline-block",height:"1em",left:"0",position:"absolute",width:"0"});kb.elm("body").append(this.cover.append(this.container.append(this.monitor)).append(this.progress))}update(){this.counter++;this.monitor.html(Math.ceil(this.counter/this.max*100).toString()+"% complete");this.progress.css({width:"calc(100% * "+(this.counter/
this.max).toString()+")"});this.cover.css({display:"block"})}show(a){this.counter=0;this.max=a?a:1;this.monitor.html("");this.progress.css({width:"0"});this.cover.css({display:"block",zIndex:kb.popups.alert.cover.style.zIndex-1})}hide(){this.cover.css({display:"none"})}};
HTMLDocument.prototype.off=function(a,b){(Array.isArray(a)?a:a.split(",").map(c=>c.trim())).each((c,d)=>{c&&(b?this.removeEventListener(c,b):this in kb.eventHandlers&&c in kb.eventHandlers[this]&&kb.eventHandlers[this][c].each((e,f)=>this.removeEventListener(c,e)))});return this};
HTMLDocument.prototype.on=function(a,b){(Array.isArray(a)?a:a.split(",").map(c=>c.trim())).each((c,d)=>{c&&(this in kb.eventHandlers||(kb.eventHandlers[this]={}),c in kb.eventHandlers[this]||(kb.eventHandlers[this][c]=[]),kb.eventHandlers[this][c].push(b),this.addEventListener(c,b))});return this};HTMLElement.prototype.addClass=function(a){a.split(" ").each((b,c)=>{b&&this.classList.add(b)});return this};HTMLElement.prototype.append=function(a){this.appendChild(a);return this};
HTMLElement.prototype.attr=function(a,b){return"undefined"!==typeof b?(this.setAttribute(a,b),this):this.getAttribute(a)};HTMLElement.prototype.clone=function(){var a=this.cloneNode(!0);"select"==this.tagName.toLowerCase()?a.value=this.value:a.elms("select").each((b,c)=>b.value=this.elms("select")[c].value);return a};
HTMLElement.prototype.css=function(a){if("string"!==typeof a){for(var b in a)this.style[b]=a[b];return this}return this.currentStyle?this.currentStyle[a]:document.defaultView.getComputedStyle(this,null).getPropertyValue(a)};HTMLElement.prototype.elm=function(a){return this.querySelector(a)};HTMLElement.prototype.elms=function(a){return Array.from(this.querySelectorAll(a))};HTMLElement.prototype.empty=function(){this.innerHTML="";return this};HTMLElement.prototype.hasClass=function(a){return this.classList.contains(a)};
HTMLElement.prototype.hide=function(){var a=new Event("hide");this.css({display:"none"});this.elms("*").each((b,c)=>{"function"===typeof b.visible&&(b.visible()||b.dispatchEvent(a))});return this};HTMLElement.prototype.html=function(a){return"undefined"!==typeof a?(this.innerHTML=a,this):this.innerHTML};HTMLElement.prototype.innerHeight=function(){var a=this.css("padding-top"),b=this.css("padding-bottom");a||="0";b||="0";return this.clientHeight-parseFloat(a)-parseFloat(b)};
HTMLElement.prototype.innerWidth=function(){var a=this.css("padding-left"),b=this.css("padding-right");a||="0";b||="0";return this.clientWidth-parseFloat(a)-parseFloat(b)};
HTMLElement.prototype.initialize=function(){this.alert=kb.create("div").css({display:"none",margin:"-0.5em 0px 0px 0px",transition:"none",zIndex:kb.popups.alert.cover.style.zIndex-4}).append(kb.create("img").css({display:"block",height:"0.75em",margin:"0px 0px 0px 1.5em",position:"relative",width:"0.75em"}).attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QkVGNzA3QTE1RTc4MTFFOEI5MDA5RUE2NDFCQTUzNDciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QkVGNzA3QTI1RTc4MTFFOEI5MDA5RUE2NDFCQTUzNDciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCRUY3MDc5RjVFNzgxMUU4QjkwMDlFQTY0MUJBNTM0NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCRUY3MDdBMDVFNzgxMUU4QjkwMDlFQTY0MUJBNTM0NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkBlNTAAAADNSURBVHja7NHBCcJAFATQZNBcYwmSmycPlpI2bCVgAVqAVmAFHmxqncAKQVyz+/N/grADc0iyy0Be6ZwrlgiKhZKH83Ae/v/h1X23l9499vfZk2hYOHpgO7ZkH+xzjl9dsze2Ytfsld3MMXxhm8Hzlj1bD/eu7Zf3rf9mMvx2DaXzZ1SHh66hVP5MrTn86RpK48+qDIdcQ4nyxkRXsTcmuoq9oeAq8oaSa7I3FF2TvKHomuQNZddobxi4RnnDyHXUG0auo94wdP3p/RJgAMw4In5GE/6/AAAAAElFTkSuQmCC")).append(kb.create("span").css({backgroundColor:"#b7282e",borderRadius:"0.25em",
color:"#ffffff",display:"block",lineHeight:"2em",margin:"0px",minWidth:"max-content",padding:"0px 0.5em",position:"relative"}));var a=b=>{if(13==(b.keyCode||b.which)){var c=kb.elms("button[tabstop=tabstop],input,select,textarea").filter(f=>{var g=0;f.visible()?(f.hasAttribute("tabindex")&&"-1"==f.attr("tabindex")&&g++,"input"==f.tagName.toLowerCase()&&f.type.toLowerCase().match(/(color|file)/g)&&g++):g++;return 0==g}),d=c.length,e=c.indexOf(b.currentTarget)+(b.shiftKey?-1:1);c[0>e?d-1:e>d-1?0:e].focus();
b.stopPropagation();b.preventDefault();return!1}};switch(this.tagName.toLowerCase()){case "input":switch(this.type.toLowerCase()){case "button":case "color":case "file":case "image":case "reset":break;default:this.on("keydown",a).on("focus",b=>this.beforevalue=b.currentTarget.val()).on("blur",b=>{if(b.currentTarget.hasAttribute("data-padding")){var c=b.currentTarget.attr("data-padding").split(":"),d=b.currentTarget.val();if(3==c.length){if(void 0===d||null===d)d="";"L"==c[2]?b.currentTarget.val(d.toString().lpad(c[0],
c[1])):b.currentTarget.val(d.toString().rpad(c[0],c[1]))}}})}break;case "select":this.on("keydown",a).on("focus",b=>this.beforevalue=b.currentTarget.val())}this.hasAttribute("required")&&((a=this.attr("placeholder"))&&(a=a.replace(/^required /g,"")),this.attr("placeholder","* "+(a?a:"")));if(this.hasAttribute("data-type"))switch(this.attr("data-type")){case "alphabet":this.attr("pattern","^[A-Za-z!\"#$%&'\\(\\)*,\\-.\\/:;<>?@\\[\\]\\^_`\\{\\|\\}~ \\\\]+$");break;case "alphanum":this.attr("pattern",
"^[0-9A-Za-z!\"#$%&'\\(\\)*,\\-.\\/:;<>?@\\[\\]\\^_`\\{\\|\\}~ \\\\]+$");break;case "color":this.attr("pattern","^#?([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$");break;case "date":this.attr("pattern","^[1-9][0-9]{3}[\\-.\\/]+([1-9]{1}|0[1-9]{1}|1[0-2]{1})[\\-.\\/]+([1-9]{1}|[0-2]{1}[0-9]{1}|3[01]{1})$").on("focus",b=>b.currentTarget.val(b.currentTarget.val().replace(/[^0-9]+/g,""))).on("blur",b=>{var c=b.currentTarget.val().replace(/[^0-9]+/g,"");8==c.length&&b.currentTarget.val(c.substring(0,4)+"-"+c.substring(4,
6)+"-"+c.substring(6,8))});break;case "datetime":this.attr("pattern","^[1-9][0-9]{3}[\\-.\\/]+([1-9]{1}|0[1-9]{1}|1[0-2]{1})[\\-.\\/]+([1-9]{1}|[0-2]{1}[0-9]{1}|3[01]{1}) [0-9]{1,2}:[0-9]{1,2}$");break;case "mail":this.attr("pattern","^[0-9A-Za-z]+[0-9A-Za-z.!#$%&'*+\\-\\/?\\^_`\\{\\|\\}~\\\\]*@[0-9A-Za-z]+[0-9A-Za-z._\\-]*\\.[a-z]+$");break;case "number":this.attr("pattern","^[0-9,\\-.]+$").css({textAlign:"right"}).on("focus",b=>b.currentTarget.val(b.currentTarget.val().replace(/[^-0-9.]+/g,""))).on("blur",
b=>{var c=b.currentTarget.val().replace(/[^-0-9.]+/g,"");c&&b.currentTarget.val(Number(c).comma(this.attr("data-decimals")))});break;case "nondemiliternumber":this.attr("pattern","^[0-9\\-.]+$").css({textAlign:"right"});break;case "postalcode":this.attr("pattern","^[0-9]{3}-?[0-9]{4}$").on("focus",b=>b.currentTarget.val(b.currentTarget.val().replace(/[^0-9]+/g,""))).on("blur",b=>{var c=b.currentTarget.val().replace(/[^0-9]+/g,"");7==c.length&&b.currentTarget.val(c.substring(0,3)+"-"+c.substring(3,
7))});break;case "tel":this.attr("pattern","^0[0-9]{1,3}-?[0-9]{2,4}-?[0-9]{3,4}$");break;case "time":this.attr("pattern","^[0-9]{1,2}:[0-9]{1,2}$");break;case "url":this.attr("pattern","^https?:\\/\\/[0-9A-Za-z!\"#$%&'\\(\\)*,\\-.\\/:;<>?@\\[\\]\\^_`\\{\\|\\}~=\\\\]+$");break;case "urldirectory":this.attr("pattern","^[0-9a-z\\-_.!']+$")}switch(this.tagName.toLowerCase()){case "select":this.parentNode.parentNode.append(this.alert);break;default:this.parentNode.append(this.alert)}return this.on("invalid",
b=>{b.currentTarget.validity.valueMissing&&this.alert.elm("span").html(kb.constants.common.message.invalid.required[kb.operator.language]).parentNode.show();b.currentTarget.validity.patternMismatch&&this.alert.elm("span").html(kb.constants.common.message.invalid.unmatch.pattern[kb.operator.language]).parentNode.show();b.currentTarget.validity.typeMismatch&&this.alert.elm("span").html(kb.constants.common.message.invalid.unmatch.format[kb.operator.language]).parentNode.show()}).on("focus",b=>this.alert.hide())};
HTMLElement.prototype.isEmpty=function(){var a=!1;this.elms("input,select,textarea").each((b,c)=>{switch(b.tagName.toLowerCase()){case "input":switch(b.type.toLowerCase()){case "button":case "image":case "radio":case "reset":break;case "checkbox":a||(a=b.checked);break;case "color":a||="#000000"!=b.val();break;case "range":c=b.max?parseFloat(b.max):100;var d=b.min?parseFloat(b.min):0;a||=b.val()!=(c-d)/2;break;default:a||=b.val()}break;case "select":a||(a=b.selectedIndex);break;default:a||=b.val()}});
return!a};HTMLElement.prototype.off=function(a,b){(Array.isArray(a)?a:a.split(",").map(c=>c.trim())).each((c,d)=>{c&&(b?this.removeEventListener(c,b):this in kb.eventHandlers&&c in kb.eventHandlers[this]&&kb.eventHandlers[this][c].each((e,f)=>this.removeEventListener(c,e)))});return this};
HTMLElement.prototype.on=function(a,b,c=!1){(Array.isArray(a)?a:a.split(",").map(d=>d.trim())).each((d,e)=>{d&&(this in kb.eventHandlers||(kb.eventHandlers[this]={}),d in kb.eventHandlers[this]||(kb.eventHandlers[this][d]=[]),kb.eventHandlers[this][d].push(b),this.addEventListener(d,b,c))});return this};HTMLElement.prototype.outerHeight=function(a){if(a){a=this.css("margin-top");var b=this.css("margin-bottom");a||="0";b||="0";return this.getBoundingClientRect().height+parseFloat(a)+parseFloat(b)}return this.getBoundingClientRect().height};
HTMLElement.prototype.outerWidth=function(a){if(a){a=this.css("margin-left");var b=this.css("margin-right");a||="0";b||="0";return this.getBoundingClientRect().width+parseFloat(a)+parseFloat(b)}return this.getBoundingClientRect().width};HTMLElement.prototype.popup=function(a,b,c,d){return new KintoneBoosterPopupwindow(this,a,b,c,d)};HTMLElement.prototype.removeAttr=function(a){this.removeAttribute(a);return this};HTMLElement.prototype.removeClass=function(a){this.classList.remove(a);return this};
HTMLElement.prototype.show=function(a="block"){var b=new Event("show");this.css({display:a});this.elms("*").each((c,d)=>{"function"===typeof c.visible&&c.visible()&&c.dispatchEvent(b)});return this};HTMLElement.prototype.siblings=function(a){return("undefined"!==typeof a?Array.from(this.parentNode.querySelectorAll(a)):kb.children(this.parentNode)).filter(b=>b!=this)};
HTMLElement.prototype.spread=function(a,b,c=!0){this.container=this.elm("tbody");this.tr=kb.children(this.container);this.template=this.tr.first().clone();this.addRow=(d=!0)=>{var e=this.template.clone();this.container.append(e);this.tr=kb.children(this.container);var f=g=>{c&&g.currentTarget.value&&(this.tr.last().isEmpty()||this.addRow())};e.elms("input,select,textarea").each((g,k)=>{switch(g.initialize().tagName.toLowerCase()){case "input":switch(g.type.toLowerCase()){case "button":case "image":case "radio":case "reset":break;
case "checkbox":case "color":case "date":case "datetime-local":case "file":case "month":case "range":case "time":case "week":g.on("change",f);break;case "number":g.on("mouseup,keyup",f);break;default:g.on("keyup",f)}break;case "select":g.on("change",f);break;case "textarea":g.on("keyup",f)}});d&&a&&a(e,this.tr.length-1);return e};this.delRow=d=>{var e=this.tr.indexOf(d);this.container.removeChild(d);this.tr=kb.children(this.container);c&&(0==this.tr.length?this.addRow():this.tr.last().isEmpty()||
this.addRow());b&&b(this,e)};this.insertRow=d=>{var e=this.addRow(!1);this.container.insertBefore(e,d.nextSibling);this.tr=kb.children(this.container);a&&a(e,this.tr.indexOf(e));return e};this.clearRows=()=>{this.tr.each((d,e)=>this.container.removeChild(d));this.tr=[]};this.clearRows();c&&this.addRow();return this};
HTMLElement.prototype.text=function(a){if("undefined"!==typeof a)return this.textContent=a,this;if((a=this.textContent)&&this.hasAttribute("data-type"))switch(this.attr("data-type")){case "date":8==a.length&&kb.isNumeric(a)&&(a=a.substring(0,4)+"-"+a.substring(4,6)+"-"+a.substring(6,8));break;case "number":a=a.replace(/,/g,"")}return a};
HTMLElement.prototype.val=function(a){if("undefined"!==typeof a)return this.value=a,this;if((a=this.value)&&this.hasAttribute("data-type"))switch(this.attr("data-type")){case "date":8==a.length&&kb.isNumeric(a)&&(a=a.substring(0,4)+"-"+a.substring(4,6)+"-"+a.substring(6,8));break;case "number":a=a.replace(/,/g,"")}return a};HTMLElement.prototype.visible=function(){return!(0==this.getBoundingClientRect().width&&0==this.getBoundingClientRect().height)};
HTMLSelectElement.prototype.assignOption=function(a,b,c){a.each((d,e)=>{this.append(kb.create("option").attr("value",d[c]).html(d[b]))});return this};HTMLSelectElement.prototype.selectedText=function(){return 0!=this.options.length?-1!=this.selectedIndex?this.options[this.selectedIndex].textContent:"":""};
Window.prototype.off=function(a,b){(Array.isArray(a)?a:a.split(",").map(c=>c.trim())).each((c,d)=>{c&&(b?this.removeEventListener(c,b):this in kb.eventHandlers&&c in kb.eventHandlers[this]&&kb.eventHandlers[this][c].each((e,f)=>this.removeEventListener(c,e)))});return this};
Window.prototype.on=function(a,b){(Array.isArray(a)?a:a.split(",").map(c=>c.trim())).each((c,d)=>{c&&(this in kb.eventHandlers||(kb.eventHandlers[this]={}),c in kb.eventHandlers[this]||(kb.eventHandlers[this][c]=[]),kb.eventHandlers[this][c].push(b),this.addEventListener(c,b))});return this};Array.prototype.each=function(a){for(var b=0;b<this.length;b++){var c=a(this[b],b);if(c===KB_BREAK)break;c===KB_SKIP&&b++}};Array.prototype.first=function(){return this[0]};
Array.prototype.last=function(){return this[this.length-1]};
Date.prototype.calc=function(a){var b=this;a.split(",").map(c=>c.trim()).each((c,d)=>{d=b.getFullYear();var e=b.getMonth()+1,f=b.getDate(),g=b.getHours(),k=b.getMinutes(),n=b.getSeconds();c.match(/^first-of-year$/g)&&(f=e=1);c.match(/^first-of-month$/g)&&(f=1);c.match(/^first-of-week$/g)&&(f-=b.getDay());c.match(/^-?[0-9]+[ ]*year$/g)&&(d+=parseInt(c.match(/^-?[0-9]+/g)));if(c.match(/^-?[0-9]+[ ]*month$/g)){for(e+=parseInt(c.match(/^-?[0-9]+/g));1>e;)d--,e+=12;for(;12<e;)d++,e-=12;var h=new Date(d,
e-1,f);h.getMonth()+1!=e&&(h=new Date(d,e,1),h.setDate(0),f=h.getDate())}c.match(/^-?[0-9]+[ ]*day$/g)&&(f+=parseInt(c.match(/^-?[0-9]+/g)));c.match(/^-?[0-9]+[ ]*hour$/g)&&(g+=parseInt(c.match(/^-?[0-9]+/g)));c.match(/^-?[0-9]+[ ]*minute$/g)&&(k+=parseInt(c.match(/^-?[0-9]+/g)));c.match(/^-?[0-9]+[ ]*second$/g)&&(n+=parseInt(c.match(/^-?[0-9]+/g)));b=new Date(d,e-1,f,g,k,n)});return b};
Date.prototype.format=function(a){var b=this.getFullYear().toString(),c=("0"+(this.getMonth()+1)).slice(-2),d=("0"+this.getDate()).slice(-2),e=("0"+this.getHours()).slice(-2),f=("0"+this.getMinutes()).slice(-2),g=("0"+this.getSeconds()).slice(-2);return a.match(/^ISO$/g)?this.toISOString().replace(/[0-9]{2}\.[0-9]{3}Z$/g,"00Z"):a.match(/^ISOSEC$/g)?this.toISOString().replace(/\.[0-9]{3}Z$/g,"Z"):a.replace(/Y/g,b).replace(/y/g,b.slice(-2)).replace(/m/g,c).replace(/d/g,d).replace(/H/g,e).replace(/h/g,
(e%12).toString()).replace(/i/g,f).replace(/s/g,g)};FileList.prototype.first=function(){return this[0]};FileList.prototype.last=function(){return this[this.length-1]};Number.prototype.comma=function(a){isNaN(this)?a="":(a=kb.isNumeric(a)?this.toFloor(parseInt(a)).split("."):String(this).split("."),a[0]=a[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),a=a.join("."));return a};Number.prototype.each=function(a){for(var b=0;b<this;b++){var c=a(b);if(c===KB_BREAK)break;c===KB_SKIP&&b++}};
Number.prototype.toFloor=function(a){var b=String(this).split(".");1<b.length?b[1]=b[1].rpad("0",a).substring(0,a):b.push("".lpad("0",a));0==Number(a)&&1!=b.length&&(b=[b[0]]);return b.join(".")};String.prototype.lpad=function(a,b){var c="";b.each(d=>c+=a);return(c+this).slice(-1*b)};String.prototype.rpad=function(a,b){var c="";b.each(d=>c+=a);return(this+c).slice(0,b)};
String.prototype.parseDateTime=function(){var a=this;isNaN(Date.parse(a))&&(a.match(/T/g)?(a=a.replace(/\//g,"-"),a.match(/(\+[0-9]{2}:?[0-9]{2}|Z$)/g)||(a+="Z")):a=a.replace(/-/g,"/"));return new Date(a)};window.kb||(window.kb=new KintoneBooster);
window.kb.constants||(kb.constants={common:{message:{invalid:{parameter:{en:"There is a defect in the specified parameter",ja:"\u6307\u5b9a\u3055\u308c\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u4e0d\u5099\u304c\u3042\u308a\u307e\u3059",zh:"\u6307\u5b9a\u7684\u53c2\u6570\u65e0\u6548\u3002","zh-TW":"\u6307\u5b9a\u7684\u53c3\u6578\u7121\u6548\u3002"},required:{en:"Required",ja:"\u5fc5\u9808\u9805\u76ee\u3067\u3059",zh:"\u8fd9\u662f\u5fc5\u586b\u9879","zh-TW":"\u9019\u662f\u5fc5\u586b\u9805"},unmatch:{format:{en:"Input value not matched to its input format",
ja:"\u5165\u529b\u5f62\u5f0f\u3068\u4e00\u81f4\u3057\u3066\u3044\u307e\u305b\u3093",zh:"\u8f93\u5165\u683c\u5f0f\u4e0d\u5339\u914d","zh-TW":"\u8f38\u5165\u683c\u5f0f\u4e0d\u5339\u914d"},pattern:{en:"Input value not matched to its input pattern",ja:"\u5165\u529b\u30d1\u30bf\u30fc\u30f3\u3068\u4e00\u81f4\u3057\u3066\u3044\u307e\u305b\u3093",zh:"\u8f93\u5165\u6a21\u5f0f\u4e0d\u5339\u914d","zh-TW":"\u8f38\u5165\u6a21\u5f0f\u4e0d\u5339\u914d"}}},notfound:{en:"No data was found that matches your request",
ja:"\u5165\u529b\u5185\u5bb9\u306b\u4e00\u81f4\u3059\u308b\u30c7\u30fc\u30bf\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f",zh:"\u627e\u4e0d\u5230\u4e0e\u8f93\u5165\u5185\u5bb9\u5339\u914d\u7684\u6570\u636e\u3002","zh-TW":"\u627e\u4e0d\u5230\u8207\u8f38\u5165\u5167\u5bb9\u5339\u914d\u7684\u6578\u64da\u3002"}},prompt:{keyword:{en:"Enter a keyword",ja:"\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b",zh:"\u8f93\u5165\u5173\u952e\u8bcd","zh-TW":"\u8f38\u5165\u95dc\u9375\u5b57"}}},
dialog:{color:{message:{invalid:{en:"Please Enter a color code.",ja:"\u30ab\u30e9\u30fc\u30b3\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044\u3002",zh:"\u8bf7\u8f93\u5165\u989c\u8272\u4ee3\u7801\u3002","zh-TW":"\u8acb\u8f38\u5165\u984f\u8272\u4ee3\u78bc\u3002"}},prompt:{en:"Enter hexadecimal color code",ja:"16\u9032\u6570\u306e\u30ab\u30e9\u30fc\u30b3\u30fc\u30c9\u3092\u5165\u529b",zh:"\u8bf7\u8f93\u5165\u5341\u516d\u8fdb\u5236\u7684\u989c\u8272\u4ee3\u7801","zh-TW":"\u8acb\u8f38\u5165\u5341\u516d\u9032\u5236\u7684\u984f\u8272\u4ee3\u78bc"}}},
weeks:{en:"Sun Mon Tue Wed Thu Fri Sat".split(" "),ja:"\u65e5\u6708\u706b\u6c34\u6728\u91d1\u571f".split(""),zh:"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split(""),"zh-TW":"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")}});kb.ready();
window.kb_authorize_handler||(window.kb_authorize_handler=a=>{localStorage.getItem("kb-installed")?((b,c)=>{b.calc("3 month")<new Date&&(d=>{d!=(new Date).format("Y-m-d")&&(e=>{if(e<(new Date).getHours()){localStorage.setItem("kb-announced-"+kintone.app.getId(),(new Date).format("Y-m-d"));localStorage.removeItem("kb-announcetime-"+kintone.app.getId());var f=g=>{fetch("https://api.kintone-booster."+g+"/authorize?id="+c,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(k=>{k.json().then(n=>
{switch(k.status){case 200:"ok"!=n.result&&kb.confirm((()=>{var h="";switch(kb.operator.language){case "en":h="Boost! is free to download and use, but you must purchase a license to use it without this message. <br>Do you want to proceed with the purchase process?";break;case "ja":h="Boost! \u306f\u7121\u6599\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u4f7f\u7528\u3067\u304d\u307e\u3059\u304c\u3001\u3053\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8868\u793a\u3057\u306a\u3044\u3067\u4f7f\u7528\u3059\u308b\u306b\u306f\u30e9\u30a4\u30bb\u30f3\u30b9\u3092\u8cfc\u5165\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002<br>\u3053\u306e\u307e\u307e\u8cfc\u5165\u624b\u7d9a\u304d\u3092\u884c\u3044\u307e\u3059\u304b\uff1f";
break;case "zh":h="Boost! \u53ef\u4ee5\u514d\u8d39\u4e0b\u8f7d\u548c\u4f7f\u7528\uff0c\u4f46\u82e5\u8981\u65e0\u6b64\u6d88\u606f\u4f7f\u7528\uff0c\u60a8\u5fc5\u987b\u8d2d\u4e70\u8bb8\u53ef\u8bc1\u3002<br>\u60a8\u60f3\u7ee7\u7eed\u8d2d\u4e70\u8fc7\u7a0b\u5417\uff1f";break;case "zh-TW":h="Boost! \u53ef\u4ee5\u514d\u8cbb\u4e0b\u8f09\u548c\u4f7f\u7528\uff0c\u4f46\u82e5\u8981\u7121\u6b64\u8a0a\u606f\u4f7f\u7528\uff0c\u60a8\u5fc5\u9808\u8cfc\u8cb7\u8a31\u53ef\u8b49\u3002<br>\u60a8\u60f3\u7e7c\u7e8c\u8cfc\u8cb7\u6d41\u7a0b\u55ce\uff1f"}return h})(),
()=>window.open("https://kintone-booster.com/"+kb.operator.language+"/license.html?subdomain="+c));break;default:"com"==g?f("net"):console.log(n.error)}})}).catch(k=>{"com"==g?f("net"):console.log(k)})};f("com")}})((()=>{if(localStorage.getItem("kb-announcetime-"+kintone.app.getId()))var e=parseInt(localStorage.getItem("kb-announcetime-"+kintone.app.getId()));else e=(new Date).getHours(),e=15>e?Math.floor(Math.random()*(15-e))+e:e-1,localStorage.setItem("kb-announcetime-"+kintone.app.getId(),e.toString());
return e})())})(localStorage.getItem("kb-announced-"+kintone.app.getId())?localStorage.getItem("kb-announced-"+kintone.app.getId()):(new Date).calc("-1 day").format("Y-m-d"))})(new Date(localStorage.getItem("kb-installed")),location.host.split(".")[0]):localStorage.setItem("kb-installed",(new Date).format("Y-m-d"));return a});kintone.events.off("app.record.index.show",window.kb_authorize_handler);kintone.events.on("app.record.index.show",window.kb_authorize_handler);
