/*
* FileName "ui.js"
* Version: 1.0.0
* Copyright (c) 2023 Pandafirm LLC
* Distributed under the terms of the GNU Lesser General Public License.
* https://opensource.org/licenses/LGPL-2.1
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(c){var a=0;return function(){return a<c.length?{done:!1,value:c[a++]}:{done:!0}}};$jscomp.arrayIterator=function(c){return{next:$jscomp.arrayIteratorImpl(c)}};$jscomp.makeIterator=function(c){var a="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];if(a)return a.call(c);if("number"==typeof c.length)return $jscomp.arrayIterator(c);throw Error(String(c)+" is not an iterable or ArrayLike");};
$jscomp.arrayFromIterator=function(c){for(var a,f=[];!(a=c.next()).done;)f.push(a.value);return f};$jscomp.arrayFromIterable=function(c){return c instanceof Array?c:$jscomp.arrayFromIterator($jscomp.makeIterator(c))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(c){var a=function(){};a.prototype=c;return new a};$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,a,f){if(c==Array.prototype||c==Object.prototype)return c;c[a]=f.value;return c};
$jscomp.getGlobal=function(c){c=["object"==typeof globalThis&&globalThis,c,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var a=0;a<c.length;++a){var f=c[a];if(f&&f.Math==Math)return f}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(c,a,f){if(!f||null!=c){f=$jscomp.propertyToPolyfillSymbol[a];if(null==f)return c[a];f=c[f];return void 0!==f?f:c[a]}};$jscomp.polyfill=function(c,a,f,e){a&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(c,a,f,e):$jscomp.polyfillUnisolated(c,a,f,e))};
$jscomp.polyfillUnisolated=function(c,a,f,e){f=$jscomp.global;c=c.split(".");for(e=0;e<c.length-1;e++){var b=c[e];if(!(b in f))return;f=f[b]}c=c[c.length-1];e=f[c];a=a(e);a!=e&&null!=a&&$jscomp.defineProperty(f,c,{configurable:!0,writable:!0,value:a})};
$jscomp.polyfillIsolated=function(c,a,f,e){var b=c.split(".");c=1===b.length;e=b[0];e=!c&&e in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var l=0;l<b.length-1;l++){var g=b[l];if(!(g in e))return;e=e[g]}b=b[b.length-1];f=$jscomp.IS_SYMBOL_NATIVE&&"es6"===f?e[b]:null;a=a(f);null!=a&&(c?$jscomp.defineProperty($jscomp.polyfills,b,{configurable:!0,writable:!0,value:a}):a!==f&&(void 0===$jscomp.propertyToPolyfillSymbol[b]&&(f=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[b]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(b):$jscomp.POLYFILL_PREFIX+f+"$"+b),$jscomp.defineProperty(e,$jscomp.propertyToPolyfillSymbol[b],{configurable:!0,writable:!0,value:a})))};
$jscomp.getConstructImplementation=function(){function c(){function f(){}new f;Reflect.construct(f,[],function(){});return new f instanceof f}if($jscomp.TRUST_ES6_POLYFILLS&&"undefined"!=typeof Reflect&&Reflect.construct){if(c())return Reflect.construct;var a=Reflect.construct;return function(f,e,b){f=a(f,e);b&&Reflect.setPrototypeOf(f,b.prototype);return f}}return function(f,e,b){void 0===b&&(b=f);b=$jscomp.objectCreate(b.prototype||Object.prototype);return Function.prototype.apply.call(f,b,e)||
b}};$jscomp.construct={valueOf:$jscomp.getConstructImplementation}.valueOf();$jscomp.underscoreProtoCanBeSet=function(){var c={a:!0},a={};try{return a.__proto__=c,a.a}catch(f){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(c,a){c.__proto__=a;if(c.__proto__!==a)throw new TypeError(c+" is not extensible");return c}:null;
$jscomp.inherits=function(c,a){c.prototype=$jscomp.objectCreate(a.prototype);c.prototype.constructor=c;if($jscomp.setPrototypeOf){var f=$jscomp.setPrototypeOf;f(c,a)}else for(f in a)if("prototype"!=f)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(a,f);e&&Object.defineProperty(c,f,e)}else c[f]=a[f];c.superClass_=a.prototype};window.KintoneBoosterAttachment=function(){};
window.KintoneBoosterAttachment.prototype.show=function(c,a){a=void 0===a?!0:a;kb.file.download(c).then(function(f){try{var e=function(){var b=kb.create("a").css({display:"none"}).attr("href",kb.field.objectUrl(f,c.contentType)).attr("target","_blank").attr("download",c.name);kb.elm("body").append(b);b.click();document.body.removeChild(b)};switch(c.contentType){case "application/javascript":fetch(new Request(kb.field.objectUrl(f,c.contentType))).then(function(b){return b.text()}).then(function(b){var l=
b.split("\n");kb.create("div").append(function(g){l.each(function(d,m){return g.append(kb.create("code").css({display:"block"}).text(d))});return g}(kb.create("pre"))).popup("full","full",a?[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1FJREFUeNpiYKA66J8y8T8ynwmfJE6dQHYAjM9CtAlIihJIcjRAANHD71hdDxIA+RVdAbKf1wMFqeRXgACiqdcbQBiXPBMB/fVQTLxmoG3riRHDlXwWgIjCnHxGJOkPMHmYOCMx0QwDaIZRBgACaDgiYMDtxydPKJE4UKIZL8AVzwZA6jySkCEwji8QtBmoUQBIgbAhTCOIDxXHX4DgSl3Y5CjyMwspaRuvn6EJfwEOtQtIyhiEEsnAAYAAGkV0A4wUFDH/KSmPmYaEj4nJpcT6niQfQw01xCFtSEqQMxLwYT+QKsDmI6RyGV4eYwmRCUC5QpIsRjJEEaj5ARmJTwFI3ccV/CxEmHEfS2svEWjYArQG33yKi3ooCAQ1MXHIzQdaRqxFjtRI1aDgA5X+ClikQdHhSE60jAKaAoAAGkWjYBSgtF8pacOyUGC3AyUOH7Cmz8izmJGUxEREvB4AVouOtGhlvod2Y7GBD0BLBWnWoMdhOUmWEh3HoDYVrKkDteADNktBaogdcGMksZnTCLSkAcnnDEiWgsTriW0KMRKZkEDd8kQiQwcUMgmEEhwLgVKJ5LiDOjARKS04kFNkCkAb9h+gwXaBgG8NoNEjQK2yGmTQeWjD/gCozQ10xAekkaL1pJbduCz+gMfVIAve4x1LxjSLuOwEjdcNVCgZN+BKI4xEpFKi4w3JhwTTA6lFJqjL2o8rQQMtm0CPFgjesfhRMAoGDAAEaNdqbxCEgWhjGKAjMAKbyAg6ATM4gWECGQE2cBRGcAS5eI1VGvt110C8F/hDSNvX69217yqPQCAQbBnF69iuikbJevrh3ywshIUwrf82Md93E7QSjpXJR81NRelE4ixEi6alQOKsRMkI4+XCo/rU7wxAiBo9xFdEsU1X0XhY3sluk5VwhHo2q5c+dTHKm8Pi3fL2LotiP6DAAvHa09ddWQofNWHXvQ8YMMh6Y2iniStJ4wTARDWpuzWKtNTgkm6ZQ4FxnawUVhEOpv26kDFblp8jLFlblqypZ61itAgMFtTVqyVkP9C3J/UWwM3q0KoAYglDUeOW0Z/GaH4i5nEO/THneh7r0vNkgGhXYdt4YBWRKoiNmHeHPe60uh++any7595pCQQCgWDLeALGLWqyLWBxZQAAAABJRU5ErkJggg==",
handler:e}]:[]).show()});break;case "application/json":fetch(new Request(kb.field.objectUrl(f,c.contentType))).then(function(b){return b.text()}).then(function(b){kb.create("div").html(b.replace(/\n/g,"<br>")).popup("full","full",a?[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1FJREFUeNpiYKA66J8y8T8ynwmfJE6dQHYAjM9CtAlIihJIcjRAANHD71hdDxIA+RVdAbKf1wMFqeRXgACiqdcbQBiXPBMB/fVQTLxmoG3riRHDlXwWgIjCnHxGJOkPMHmYOCMx0QwDaIZRBgACaDgiYMDtxydPKJE4UKIZL8AVzwZA6jySkCEwji8QtBmoUQBIgbAhTCOIDxXHX4DgSl3Y5CjyMwspaRuvn6EJfwEOtQtIyhiEEsnAAYAAGkV0A4wUFDH/KSmPmYaEj4nJpcT6niQfQw01xCFtSEqQMxLwYT+QKsDmI6RyGV4eYwmRCUC5QpIsRjJEEaj5ARmJTwFI3ccV/CxEmHEfS2svEWjYArQG33yKi3ooCAQ1MXHIzQdaRqxFjtRI1aDgA5X+ClikQdHhSE60jAKaAoAAGkWjYBSgtF8pacOyUGC3AyUOH7Cmz8izmJGUxEREvB4AVouOtGhlvod2Y7GBD0BLBWnWoMdhOUmWEh3HoDYVrKkDteADNktBaogdcGMksZnTCLSkAcnnDEiWgsTriW0KMRKZkEDd8kQiQwcUMgmEEhwLgVKJ5LiDOjARKS04kFNkCkAb9h+gwXaBgG8NoNEjQK2yGmTQeWjD/gCozQ10xAekkaL1pJbduCz+gMfVIAve4x1LxjSLuOwEjdcNVCgZN+BKI4xEpFKi4w3JhwTTA6lFJqjL2o8rQQMtm0CPFgjesfhRMAoGDAAEaNdqbxCEgWhjGKAjMAKbyAg6ATM4gWECGQE2cBRGcAS5eI1VGvt110C8F/hDSNvX69217yqPQCAQbBnF69iuikbJevrh3ywshIUwrf82Md93E7QSjpXJR81NRelE4ixEi6alQOKsRMkI4+XCo/rU7wxAiBo9xFdEsU1X0XhY3sluk5VwhHo2q5c+dTHKm8Pi3fL2LotiP6DAAvHa09ddWQofNWHXvQ8YMMh6Y2iniStJ4wTARDWpuzWKtNTgkm6ZQ4FxnawUVhEOpv26kDFblp8jLFlblqypZ61itAgMFtTVqyVkP9C3J/UWwM3q0KoAYglDUeOW0Z/GaH4i5nEO/THneh7r0vNkgGhXYdt4YBWRKoiNmHeHPe60uh++any7595pCQQCgWDLeALGLWqyLWBxZQAAAABJRU5ErkJggg==",
handler:e}]:[]).show()});break;case "application/pdf":"other"!=kb.device()?window.open(kb.field.objectUrl(f,c.contentType)):kb.create("iframe").css({border:"none",height:"100%",outline:"none",width:"100%"}).attr("src",kb.field.objectUrl(f,c.contentType)+"#toolbar=0&navpanes=0").popup("full","full",a?[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1FJREFUeNpiYKA66J8y8T8ynwmfJE6dQHYAjM9CtAlIihJIcjRAANHD71hdDxIA+RVdAbKf1wMFqeRXgACiqdcbQBiXPBMB/fVQTLxmoG3riRHDlXwWgIjCnHxGJOkPMHmYOCMx0QwDaIZRBgACaDgiYMDtxydPKJE4UKIZL8AVzwZA6jySkCEwji8QtBmoUQBIgbAhTCOIDxXHX4DgSl3Y5CjyMwspaRuvn6EJfwEOtQtIyhiEEsnAAYAAGkV0A4wUFDH/KSmPmYaEj4nJpcT6niQfQw01xCFtSEqQMxLwYT+QKsDmI6RyGV4eYwmRCUC5QpIsRjJEEaj5ARmJTwFI3ccV/CxEmHEfS2svEWjYArQG33yKi3ooCAQ1MXHIzQdaRqxFjtRI1aDgA5X+ClikQdHhSE60jAKaAoAAGkWjYBSgtF8pacOyUGC3AyUOH7Cmz8izmJGUxEREvB4AVouOtGhlvod2Y7GBD0BLBWnWoMdhOUmWEh3HoDYVrKkDteADNktBaogdcGMksZnTCLSkAcnnDEiWgsTriW0KMRKZkEDd8kQiQwcUMgmEEhwLgVKJ5LiDOjARKS04kFNkCkAb9h+gwXaBgG8NoNEjQK2yGmTQeWjD/gCozQ10xAekkaL1pJbduCz+gMfVIAve4x1LxjSLuOwEjdcNVCgZN+BKI4xEpFKi4w3JhwTTA6lFJqjL2o8rQQMtm0CPFgjesfhRMAoGDAAEaNdqbxCEgWhjGKAjMAKbyAg6ATM4gWECGQE2cBRGcAS5eI1VGvt110C8F/hDSNvX69217yqPQCAQbBnF69iuikbJevrh3ywshIUwrf82Md93E7QSjpXJR81NRelE4ixEi6alQOKsRMkI4+XCo/rU7wxAiBo9xFdEsU1X0XhY3sluk5VwhHo2q5c+dTHKm8Pi3fL2LotiP6DAAvHa09ddWQofNWHXvQ8YMMh6Y2iniStJ4wTARDWpuzWKtNTgkm6ZQ4FxnawUVhEOpv26kDFblp8jLFlblqypZ61itAgMFtTVqyVkP9C3J/UWwM3q0KoAYglDUeOW0Z/GaH4i5nEO/THneh7r0vNkgGhXYdt4YBWRKoiNmHeHPe60uh++any7595pCQQCgWDLeALGLWqyLWBxZQAAAABJRU5ErkJggg==",
handler:e}]:[]).show();break;case "audio/mpeg":case "audio/x-m4a":kb.create("audio").css({outline:"none"}).attr("controls","controls").attr("src",kb.field.objectUrl(f,c.contentType)).popup(null,null,a?[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1FJREFUeNpiYKA66J8y8T8ynwmfJE6dQHYAjM9CtAlIihJIcjRAANHD71hdDxIA+RVdAbKf1wMFqeRXgACiqdcbQBiXPBMB/fVQTLxmoG3riRHDlXwWgIjCnHxGJOkPMHmYOCMx0QwDaIZRBgACaDgiYMDtxydPKJE4UKIZL8AVzwZA6jySkCEwji8QtBmoUQBIgbAhTCOIDxXHX4DgSl3Y5CjyMwspaRuvn6EJfwEOtQtIyhiEEsnAAYAAGkV0A4wUFDH/KSmPmYaEj4nJpcT6niQfQw01xCFtSEqQMxLwYT+QKsDmI6RyGV4eYwmRCUC5QpIsRjJEEaj5ARmJTwFI3ccV/CxEmHEfS2svEWjYArQG33yKi3ooCAQ1MXHIzQdaRqxFjtRI1aDgA5X+ClikQdHhSE60jAKaAoAAGkWjYBSgtF8pacOyUGC3AyUOH7Cmz8izmJGUxEREvB4AVouOtGhlvod2Y7GBD0BLBWnWoMdhOUmWEh3HoDYVrKkDteADNktBaogdcGMksZnTCLSkAcnnDEiWgsTriW0KMRKZkEDd8kQiQwcUMgmEEhwLgVKJ5LiDOjARKS04kFNkCkAb9h+gwXaBgG8NoNEjQK2yGmTQeWjD/gCozQ10xAekkaL1pJbduCz+gMfVIAve4x1LxjSLuOwEjdcNVCgZN+BKI4xEpFKi4w3JhwTTA6lFJqjL2o8rQQMtm0CPFgjesfhRMAoGDAAEaNdqbxCEgWhjGKAjMAKbyAg6ATM4gWECGQE2cBRGcAS5eI1VGvt110C8F/hDSNvX69217yqPQCAQbBnF69iuikbJevrh3ywshIUwrf82Md93E7QSjpXJR81NRelE4ixEi6alQOKsRMkI4+XCo/rU7wxAiBo9xFdEsU1X0XhY3sluk5VwhHo2q5c+dTHKm8Pi3fL2LotiP6DAAvHa09ddWQofNWHXvQ8YMMh6Y2iniStJ4wTARDWpuzWKtNTgkm6ZQ4FxnawUVhEOpv26kDFblp8jLFlblqypZ61itAgMFtTVqyVkP9C3J/UWwM3q0KoAYglDUeOW0Z/GaH4i5nEO/THneh7r0vNkgGhXYdt4YBWRKoiNmHeHPe60uh++any7595pCQQCgWDLeALGLWqyLWBxZQAAAABJRU5ErkJggg==",
handler:e}]:[]).show();break;case "image/bmp":case "image/gif":case "image/jpeg":case "image/png":kb.create("img").css({maxHeight:"calc(100vh - 4em)",maxWidth:"calc(100vw - 2em)"}).attr("src",kb.field.objectUrl(f,c.contentType)).popup(null,null,a?[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1FJREFUeNpiYKA66J8y8T8ynwmfJE6dQHYAjM9CtAlIihJIcjRAANHD71hdDxIA+RVdAbKf1wMFqeRXgACiqdcbQBiXPBMB/fVQTLxmoG3riRHDlXwWgIjCnHxGJOkPMHmYOCMx0QwDaIZRBgACaDgiYMDtxydPKJE4UKIZL8AVzwZA6jySkCEwji8QtBmoUQBIgbAhTCOIDxXHX4DgSl3Y5CjyMwspaRuvn6EJfwEOtQtIyhiEEsnAAYAAGkV0A4wUFDH/KSmPmYaEj4nJpcT6niQfQw01xCFtSEqQMxLwYT+QKsDmI6RyGV4eYwmRCUC5QpIsRjJEEaj5ARmJTwFI3ccV/CxEmHEfS2svEWjYArQG33yKi3ooCAQ1MXHIzQdaRqxFjtRI1aDgA5X+ClikQdHhSE60jAKaAoAAGkWjYBSgtF8pacOyUGC3AyUOH7Cmz8izmJGUxEREvB4AVouOtGhlvod2Y7GBD0BLBWnWoMdhOUmWEh3HoDYVrKkDteADNktBaogdcGMksZnTCLSkAcnnDEiWgsTriW0KMRKZkEDd8kQiQwcUMgmEEhwLgVKJ5LiDOjARKS04kFNkCkAb9h+gwXaBgG8NoNEjQK2yGmTQeWjD/gCozQ10xAekkaL1pJbduCz+gMfVIAve4x1LxjSLuOwEjdcNVCgZN+BKI4xEpFKi4w3JhwTTA6lFJqjL2o8rQQMtm0CPFgjesfhRMAoGDAAEaNdqbxCEgWhjGKAjMAKbyAg6ATM4gWECGQE2cBRGcAS5eI1VGvt110C8F/hDSNvX69217yqPQCAQbBnF69iuikbJevrh3ywshIUwrf82Md93E7QSjpXJR81NRelE4ixEi6alQOKsRMkI4+XCo/rU7wxAiBo9xFdEsU1X0XhY3sluk5VwhHo2q5c+dTHKm8Pi3fL2LotiP6DAAvHa09ddWQofNWHXvQ8YMMh6Y2iniStJ4wTARDWpuzWKtNTgkm6ZQ4FxnawUVhEOpv26kDFblp8jLFlblqypZ61itAgMFtTVqyVkP9C3J/UWwM3q0KoAYglDUeOW0Z/GaH4i5nEO/THneh7r0vNkgGhXYdt4YBWRKoiNmHeHPe60uh++any7595pCQQCgWDLeALGLWqyLWBxZQAAAABJRU5ErkJggg==",
handler:e}]:[]).show();break;case "text/plain":case "text/css":fetch(new Request(kb.field.objectUrl(f,c.contentType))).then(function(b){return b.text()}).then(function(b){kb.create("div").html(b.replace(/\n/g,"<br>")).popup("full","full",a?[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1FJREFUeNpiYKA66J8y8T8ynwmfJE6dQHYAjM9CtAlIihJIcjRAANHD71hdDxIA+RVdAbKf1wMFqeRXgACiqdcbQBiXPBMB/fVQTLxmoG3riRHDlXwWgIjCnHxGJOkPMHmYOCMx0QwDaIZRBgACaDgiYMDtxydPKJE4UKIZL8AVzwZA6jySkCEwji8QtBmoUQBIgbAhTCOIDxXHX4DgSl3Y5CjyMwspaRuvn6EJfwEOtQtIyhiEEsnAAYAAGkV0A4wUFDH/KSmPmYaEj4nJpcT6niQfQw01xCFtSEqQMxLwYT+QKsDmI6RyGV4eYwmRCUC5QpIsRjJEEaj5ARmJTwFI3ccV/CxEmHEfS2svEWjYArQG33yKi3ooCAQ1MXHIzQdaRqxFjtRI1aDgA5X+ClikQdHhSE60jAKaAoAAGkWjYBSgtF8pacOyUGC3AyUOH7Cmz8izmJGUxEREvB4AVouOtGhlvod2Y7GBD0BLBWnWoMdhOUmWEh3HoDYVrKkDteADNktBaogdcGMksZnTCLSkAcnnDEiWgsTriW0KMRKZkEDd8kQiQwcUMgmEEhwLgVKJ5LiDOjARKS04kFNkCkAb9h+gwXaBgG8NoNEjQK2yGmTQeWjD/gCozQ10xAekkaL1pJbduCz+gMfVIAve4x1LxjSLuOwEjdcNVCgZN+BKI4xEpFKi4w3JhwTTA6lFJqjL2o8rQQMtm0CPFgjesfhRMAoGDAAEaNdqbxCEgWhjGKAjMAKbyAg6ATM4gWECGQE2cBRGcAS5eI1VGvt110C8F/hDSNvX69217yqPQCAQbBnF69iuikbJevrh3ywshIUwrf82Md93E7QSjpXJR81NRelE4ixEi6alQOKsRMkI4+XCo/rU7wxAiBo9xFdEsU1X0XhY3sluk5VwhHo2q5c+dTHKm8Pi3fL2LotiP6DAAvHa09ddWQofNWHXvQ8YMMh6Y2iniStJ4wTARDWpuzWKtNTgkm6ZQ4FxnawUVhEOpv26kDFblp8jLFlblqypZ61itAgMFtTVqyVkP9C3J/UWwM3q0KoAYglDUeOW0Z/GaH4i5nEO/THneh7r0vNkgGhXYdt4YBWRKoiNmHeHPe60uh++any7595pCQQCgWDLeALGLWqyLWBxZQAAAABJRU5ErkJggg==",
handler:e}]:[]).show()});break;case "text/csv":fetch(new Request(kb.field.objectUrl(f,c.contentType))).then(function(b){return b.text()}).then(function(b){var l=b.parseCSV();0!=l.length&&function(g){l.each(function(d,m){g.append(function(p){d.each(function(r,n){return p.append(kb.create("td").css({padding:"0.25em"}).html(r.replace(/\n/g,"<br>")))});return p}(kb.create("tr")))});return g}(kb.create("table")).popup(null,"full",a?[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1FJREFUeNpiYKA66J8y8T8ynwmfJE6dQHYAjM9CtAlIihJIcjRAANHD71hdDxIA+RVdAbKf1wMFqeRXgACiqdcbQBiXPBMB/fVQTLxmoG3riRHDlXwWgIjCnHxGJOkPMHmYOCMx0QwDaIZRBgACaDgiYMDtxydPKJE4UKIZL8AVzwZA6jySkCEwji8QtBmoUQBIgbAhTCOIDxXHX4DgSl3Y5CjyMwspaRuvn6EJfwEOtQtIyhiEEsnAAYAAGkV0A4wUFDH/KSmPmYaEj4nJpcT6niQfQw01xCFtSEqQMxLwYT+QKsDmI6RyGV4eYwmRCUC5QpIsRjJEEaj5ARmJTwFI3ccV/CxEmHEfS2svEWjYArQG33yKi3ooCAQ1MXHIzQdaRqxFjtRI1aDgA5X+ClikQdHhSE60jAKaAoAAGkWjYBSgtF8pacOyUGC3AyUOH7Cmz8izmJGUxEREvB4AVouOtGhlvod2Y7GBD0BLBWnWoMdhOUmWEh3HoDYVrKkDteADNktBaogdcGMksZnTCLSkAcnnDEiWgsTriW0KMRKZkEDd8kQiQwcUMgmEEhwLgVKJ5LiDOjARKS04kFNkCkAb9h+gwXaBgG8NoNEjQK2yGmTQeWjD/gCozQ10xAekkaL1pJbduCz+gMfVIAve4x1LxjSLuOwEjdcNVCgZN+BKI4xEpFKi4w3JhwTTA6lFJqjL2o8rQQMtm0CPFgjesfhRMAoGDAAEaNdqbxCEgWhjGKAjMAKbyAg6ATM4gWECGQE2cBRGcAS5eI1VGvt110C8F/hDSNvX69217yqPQCAQbBnF69iuikbJevrh3ywshIUwrf82Md93E7QSjpXJR81NRelE4ixEi6alQOKsRMkI4+XCo/rU7wxAiBo9xFdEsU1X0XhY3sluk5VwhHo2q5c+dTHKm8Pi3fL2LotiP6DAAvHa09ddWQofNWHXvQ8YMMh6Y2iniStJ4wTARDWpuzWKtNTgkm6ZQ4FxnawUVhEOpv26kDFblp8jLFlblqypZ61itAgMFtTVqyVkP9C3J/UWwM3q0KoAYglDUeOW0Z/GaH4i5nEO/THneh7r0vNkgGhXYdt4YBWRKoiNmHeHPe60uh++any7595pCQQCgWDLeALGLWqyLWBxZQAAAABJRU5ErkJggg==",
handler:e}]:[]).show()});break;case "video/mp4":case "video/mpeg":kb.create("video").css({maxHeight:"calc(100vh - 4em)",maxWidth:"calc(100vw - 2em)",outline:"none"}).attr("controls","controls").attr("src",kb.field.objectUrl(f,c.contentType)).popup(null,null,a?[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1FJREFUeNpiYKA66J8y8T8ynwmfJE6dQHYAjM9CtAlIihJIcjRAANHD71hdDxIA+RVdAbKf1wMFqeRXgACiqdcbQBiXPBMB/fVQTLxmoG3riRHDlXwWgIjCnHxGJOkPMHmYOCMx0QwDaIZRBgACaDgiYMDtxydPKJE4UKIZL8AVzwZA6jySkCEwji8QtBmoUQBIgbAhTCOIDxXHX4DgSl3Y5CjyMwspaRuvn6EJfwEOtQtIyhiEEsnAAYAAGkV0A4wUFDH/KSmPmYaEj4nJpcT6niQfQw01xCFtSEqQMxLwYT+QKsDmI6RyGV4eYwmRCUC5QpIsRjJEEaj5ARmJTwFI3ccV/CxEmHEfS2svEWjYArQG33yKi3ooCAQ1MXHIzQdaRqxFjtRI1aDgA5X+ClikQdHhSE60jAKaAoAAGkWjYBSgtF8pacOyUGC3AyUOH7Cmz8izmJGUxEREvB4AVouOtGhlvod2Y7GBD0BLBWnWoMdhOUmWEh3HoDYVrKkDteADNktBaogdcGMksZnTCLSkAcnnDEiWgsTriW0KMRKZkEDd8kQiQwcUMgmEEhwLgVKJ5LiDOjARKS04kFNkCkAb9h+gwXaBgG8NoNEjQK2yGmTQeWjD/gCozQ10xAekkaL1pJbduCz+gMfVIAve4x1LxjSLuOwEjdcNVCgZN+BKI4xEpFKi4w3JhwTTA6lFJqjL2o8rQQMtm0CPFgjesfhRMAoGDAAEaNdqbxCEgWhjGKAjMAKbyAg6ATM4gWECGQE2cBRGcAS5eI1VGvt110C8F/hDSNvX69217yqPQCAQbBnF69iuikbJevrh3ywshIUwrf82Md93E7QSjpXJR81NRelE4ixEi6alQOKsRMkI4+XCo/rU7wxAiBo9xFdEsU1X0XhY3sluk5VwhHo2q5c+dTHKm8Pi3fL2LotiP6DAAvHa09ddWQofNWHXvQ8YMMh6Y2iniStJ4wTARDWpuzWKtNTgkm6ZQ4FxnawUVhEOpv26kDFblp8jLFlblqypZ61itAgMFtTVqyVkP9C3J/UWwM3q0KoAYglDUeOW0Z/GaH4i5nEO/THneh7r0vNkgGhXYdt4YBWRKoiNmHeHPe60uh++any7595pCQQCgWDLeALGLWqyLWBxZQAAAABJRU5ErkJggg==",
handler:e}]:[]).show();break;default:e()}}catch(b){kb.alert(kb.error.parse(b))}})["catch"](function(f){return kb.alert(kb.error.parse(f))})};
window.KintoneBoosterRecord=function(){this.page={add:function(c,a){return kintone.api.url("/k/",!0).replace(/\.json/g,"")+(c?"m/"+a:a)+"/edit"},detail:function(c,a,f){return kintone.api.url("/k/",!0).replace(/\.json/g,"")+(c?"m/"+a:a)+"/show"+(c?"?":"#")+"record="+f},edit:function(c,a,f){return kintone.api.url("/k/",!0).replace(/\.json/g,"")+(c?"m/"+a:a)+"/show"+(c?"?":"#")+"record="+f+(c?"#":"&")+"mode=edit"}}};
window.KintoneBoosterRecord.prototype.create=function(c,a){var f=this;a=void 0===a?!0:a;var e={},b;for(b in c.fields)(function(l){switch(l.type){case "CHECK_BOX":case "CONDITION":case "FILE":case "GROUP_SELECT":case "MULTI_SELECT":case "ORGANIZATION_SELECT":case "USER_SELECT":e[b]={type:l.type,value:[]};break;case "RADIO_BUTTON":(function(g){e[b]={type:l.type,value:0!=g.length?g.reduce(function(d,m){d[m.index]=m;return d},Array(g.length).fill("")).first().label:""}})(Object.values(l.options));break;
case "SUBTABLE":e[b]={type:l.type,value:[{value:f.create(l,!1)}]};break;default:kb.field.reserved.includes(l.type)||(e[b]={type:l.type,value:""})}})(c.fields[b]);a&&(e.$id={type:"__ID__",value:""});return e};
window.KintoneBoosterRecord.prototype.get=function(c,a,f){var e=this,b={error:!1,record:{}};if(!f)for(var l in a.fields)if(function(g,d){if(g)switch("SUBTABLE"!=d.type&&(g=g.elm(".kb-field-value")),d.type){case "CHECK_BOX":case "MULTI_SELECT":d.required&&!g.elms("input").some(function(m){return m.checked})&&(g.alert(kb.constants.common.message.invalid.required[kb.operator.language]),b.error=!0);break;case "FILE":case "GROUP_SELECT":case "ORGANIZATION_SELECT":case "USER_SELECT":d.required&&function(m){0==
m.length&&(g.alert(kb.constants.common.message.invalid.required[kb.operator.language]),b.error=!0)}(g.elm("input").val()?JSON.parse(g.elm("input").val()):[]);break;case "SUBTABLE":break;default:g.elms("input,select,textarea").each(function(m,p){m.checkValidity()||(b.error=!0)})}}(c.elm('[field-id="'+CSS.escape(l)+'"]'),a.fields[l]),b.error)break;if(b.error)kb.alert(kb.constants.common.message.invalid.record[kb.operator.language]);else{for(l in a.fields)(function(g,d){if(g)switch("SUBTABLE"!=d.type&&
(g=g.elm(".kb-field-value")),d.type){case "CALC":b.record[d.code]={type:d.type,value:null};break;case "CHECK_BOX":case "MULTI_SELECT":b.record[d.code]={type:d.type,value:function(){var m=[];g.elms("input").each(function(p,r){p.checked&&!p.parentNode.hasClass("kb-hidden")&&m.push(p.val())});return m}()};break;case "CREATED_TIME":case "UPDATED_TIME":b.record[d.code]={type:d.type,value:g.elm("input").val()?g.elm("input").val():(new Date).format("ISO")};break;case "CREATOR":case "MODIFIER":b.record[d.code]=
{type:d.type,value:g.elm("input").val()?JSON.parse(g.elm("input").val()):{code:kb.operator.code,name:kb.operator.name}};break;case "DATETIME":b.record[d.code]={type:d.type,value:function(){var m="";g.elm("input").val()&&(g.elm(".kb-hour").elm("select").val()||g.elm(".kb-hour").elm("select").val("00"),g.elm(".kb-minute").elm("select").val()||g.elm(".kb-minute").elm("select").val("00"));g.elm("input").val()&&g.elm(".kb-hour").elm("select").val()&&g.elm(".kb-minute").elm("select").val()&&(m=(g.elm("input").val()+
" "+g.elm(".kb-hour").elm("select").val()+":"+g.elm(".kb-minute").elm("select").val()+":00").parseDateTime().format("ISO"));return m}()};break;case "DROP_DOWN":b.record[d.code]={type:d.type,value:g.elm("select").val()};break;case "FILE":case "GROUP_SELECT":case "ORGANIZATION_SELECT":case "USER_SELECT":b.record[d.code]={type:d.type,value:g.elm("input").val()?JSON.parse(g.elm("input").val()):[]};break;case "NUMBER":b.record[d.code]={type:d.type,value:kb.isNumeric(g.elm("input").val())?parseFloat(g.elm("input").val()):
g.elm("input").val()};break;case "RADIO_BUTTON":b.record[d.code]={type:d.type,value:function(){var m="";g.elms("[data-name="+d.code+"]").each(function(p,r){p.checked&&!p.parentNode.hasClass("kb-hidden")&&(m=p.val())});return m}()};break;case "MULTI_LINE_TEXT":case "RICH_TEXT":b.record[d.code]={type:d.type,value:g.elm("textarea").val()};break;case "SUBTABLE":b.record[d.code]={type:d.type,value:function(){var m=[];g.tr.each(function(p,r){var n=e.get(p,d,f);if(n.error)return b.error=n.error,PD_BREAK;
m.push(p.hasAttribute("row-id")?{id:p.attr("row-id"),value:n.record}:{value:n.record})});return m}()};break;case "TIME":b.record[d.code]={type:d.type,value:function(){var m="";g.elm(".kb-hour").elm("select").val()&&(g.elm(".kb-minute").elm("select").val()||g.elm(".kb-minute").elm("select").val("00"));g.elm(".kb-minute").elm("select").val()&&(g.elm(".kb-hour").elm("select").val()||g.elm(".kb-hour").elm("select").val("00"));g.elm(".kb-hour").elm("select").val()&&g.elm(".kb-minute").elm("select").val()&&
(m=g.elm(".kb-hour").elm("select").val()+":"+g.elm(".kb-minute").elm("select").val());return m}()};break;default:kb.field.reserved.includes(d.type)||(b.record[d.code]={type:d.type,value:g.elm("input").val()})}})(c.elm('[field-id="'+CSS.escape(l)+'"]'),a.fields[l]);c.elm("[data-type=id]")&&(b.record.$id={value:c.elm("[data-type=id]").val()?parseInt(c.elm("[data-type=id]").val()):c.elm("[data-type=id]").val()})}return b};
window.KintoneBoosterRecord.prototype.set=function(c,a,f){var e=this;return new Promise(function(b,l){var g=function(d,m,p,r){var n=[],t;for(t in p)(function(k,u,h){if(k){"disabled"in h&&(h.disabled?k.addClass("kb-disabled"):k.removeClass("kb-disabled"));"hidden"in h&&(h.hidden?k.addClass("kb-hidden"):k.removeClass("kb-hidden"));if("SUBTABLE"!=u.type)switch(k=k.elm(".kb-field-value"),"backcolor"in h&&(h.backcolor?k.addClass("kb-force-backcolor").elm(".kb-guide").css({backgroundColor:h.backcolor}):
k.removeClass("kb-force-backcolor").elm(".kb-guide").css({backgroundColor:""})),"forecolor"in h&&(h.forecolor?k.addClass("kb-force-forecolor").elm(".kb-guide").css({color:h.forecolor}):k.removeClass("kb-force-forecolor").elm(".kb-guide").css({color:""})),"error"in h&&(k.alert?k.alert(h.error):k.elms("input,select,textarea").each(function(q,v){q.alert&&q.alert.elm("span").html(h.error).parentNode.show()})),u.type){case "CALC":case "CATEGORY":case "CHECK_BOX":case "CONDITION":case "CREATED_TIME":case "CREATOR":case "FILE":case "GROUP_SELECT":case "MODIFIER":case "MULTI_SELECT":case "ORGANIZATION_SELECT":case "RADIO_BUTTON":case "RECORD_NUMBER":case "REFERENCE_TABLE":case "SPACER":case "STATUS":case "STATUS_ASSIGNEE":case "UPDATED_TIME":case "USER_SELECT":"backcolor"in
h&&k.css({backgroundColor:h.backcolor?h.backcolor:""});"forecolor"in h&&k.css({color:h.forecolor?h.forecolor:""});break;default:k.elms("input,select,textarea").each(function(q,v){"backcolor"in h&&q.css({backgroundColor:h.backcolor?h.backcolor:""});"forecolor"in h&&q.css({color:h.forecolor?h.forecolor:""})})}switch(u.type){case "CALC":case "RECORD_NUMBER":case "STATUS":k.elm(".kb-guide").html(h.value);break;case "CATEGORY":k.elm(".kb-guide").html(h.value.join("<br>"));break;case "CHECK_BOX":case "MULTI_SELECT":k.elms("input").each(function(q,
v){q.checked=h.value.includes(q.val())});k.elm(".kb-guide").html(h.value.join("<br>"));break;case "COLOR":k.css({backgroundColor:h.value?h.value:"transparent"}).elm("input").val(h.value);k.elm(".kb-guide").html(h.value);break;case "CONDITION":k.elm(".kb-guide").empty();h.value?(k.elm("input").val(h.value),h.value.split(" and ").each(function(q,v){return k.guide(q)})):k.elm("input").val("");break;case "CREATOR":case "MODIFIER":k.elm("input").val(JSON.stringify(h.value));k.elm(".kb-guide").html(h.value.name);
break;case "CREATED_TIME":case "UPDATED_TIME":h.value?(k.elm("input").val(h.value),k.elm(".kb-guide").html((new Date(h.value)).format("Y-m-d H:i"))):(k.elm("input").val(""),k.elm(".kb-guide").html(""));break;case "DATETIME":if(h.value){var w=h.value.parseDateTime();k.elm("input").val(w.format("Y-m-d"));k.elm(".kb-hour").elm("select").val(w.format("H"));k.elm(".kb-minute").elm("select").val(w.format("i"));k.elm(".kb-guide").html(w.format("Y-m-d H:i"))}else k.elm("input").val(""),k.elm(".kb-hour").elm("select").val(""),
k.elm(".kb-minute").elm("select").val(""),k.elm(".kb-guide").html("");break;case "DROP_DOWN":k.elm("select").val(h.value);k.elm(".kb-guide").html(k.elm("select").selectedText());break;case "FILE":case "GROUP_SELECT":case "ORGANIZATION_SELECT":case "USER_SELECT":k.elm(".kb-guide").empty();h.value?(k.elm("input").val(JSON.stringify(h.value)),h.value.each(function(q,v){return k.guide(q)})):k.elm("input").val("[]");break;case "LINK":k.elm("input").val(h.value);k.elm(".kb-guide").empty();if(h.value)switch(u.protocol){case "MAIL":k.elm(".kb-guide").append(kb.create("a").attr("href",
"mailto:"+h.value).html(h.value));break;case "CALL":k.elm(".kb-guide").append(kb.create("a").attr("href","tel:"+h.value).html(h.value));break;case "WEB":k.elm(".kb-guide").append(kb.create("a").attr("href",h.value).attr("target","_blank").html(h.value))}break;case "MULTI_LINE_TEXT":case "RICH_TEXT":k.elm("textarea").val(h.value);k.elm(".kb-guide").html(h.value.replace(/\n/g,"<br>"));break;case "NUMBER":u.digit?kb.isNumeric(h.value)?(k.elm("input").val(Number(h.value).comma(u.displayScale)),k.elm(".kb-guide").html(Number(h.value).comma(u.displayScale))):
(k.elm("input").val(h.value),k.elm(".kb-guide").html(h.value)):u.displayScale?kb.isNumeric(h.value)?(k.elm("input").val(Number(h.value).toFloor(parseInt(u.displayScale))),k.elm(".kb-guide").html(Number(h.value).toFloor(parseInt(u.displayScale)))):(k.elm("input").val(h.value),k.elm(".kb-guide").html(h.value)):(k.elm("input").val(h.value),k.elm(".kb-guide").html(h.value));u.unit&&("prefix"==u.unitPosition?k.elm(".kb-guide").html(u.unit+" "+k.elm(".kb-guide").text()):k.elm(".kb-guide").html(k.elm(".kb-guide").text()+
" "+u.unit));break;case "RADIO_BUTTON":k.elms("[data-name="+t+"]").each(function(q,v){q.checked=h.value==q.val()});k.elm(".kb-guide").html(h.value);break;case "SPACER":break;case "STATUS_ASSIGNEE":k.elm(".kb-guide").empty();h.value&&h.value.each(function(q,v){k.elm(".kb-guide").append(kb.create("span").addClass("kb-guide-item").append(kb.create("span").addClass("kb-guide-item-label").html(q.name)))});break;case "SUBTABLE":if(0==h.value.length)k.clearRows();else{k.tr.each(function(q,v){h.value.length>
v&&g(q,u,function(x){if(h.disabled)for(var y in x)x[y].disabled=!0;return x}(h.value.map(function(x){return x.value})[v]),function(x){return n=n.concat(x)})});for(w=k.tr.length;w<h.value.length;w++)g(k.addRow(),u,function(q){if(h.disabled)for(var v in q)q[v].disabled=!0;return q}(h.value.map(function(q){return q.value})[w]),function(q){return n=n.concat(q)});k.tr.slice(h.value.length).each(function(q,v){return k.delRow(q)})}0==k.tr.length?function(q){h.disabled&&g(q,u,function(v){for(var x in v)v[x].disabled=
!0;return v}(e.get(q,u,!0).record),function(v){return n=n.concat(v)})}(k.addRow()):k.tr.each(function(q,v){"id"in h.value[v]&&q.attr("row-id",h.value[v].id)});break;case "TIME":h.value?(k.elm(".kb-hour").elm("select").val(h.value.split(":")[0]),k.elm(".kb-minute").elm("select").val(h.value.split(":")[1]),k.elm(".kb-guide").html(h.value)):(k.elm(".kb-hour").elm("select").val(""),k.elm(".kb-minute").elm("select").val(""),k.elm(".kb-guide").html(""));break;default:k.elm("input").val(h.value),k.elm(".kb-guide").html(h.value)}}})(d.elm('[field-id="'+
CSS.escape(t)+'"]'),m.fields[t],p[t]);"$id"in p&&d.elm("[data-type=id]")&&d.elm("[data-type=id]").val(p.$id.value);r(n)};g(c,a,f,function(d){c.hasOwnProperty("cleanup")&&c.cleanup();b()})})};
window.KintoneBoosterRecord.prototype.simplify=function(c,a){var f=this,e={},b;for(b in c.fields)(function(l){switch(l.type){case "CATEGORY":case "CHECK_BOX":case "MULTI_SELECT":e[b]={value:b in a?Array.from(new Set(a[b].value.sort())):[]};break;case "CALC":case "CREATED_TIME":case "CREATOR":case "FILE":case "MODIFIER":case "RECORD_NUMBER":case "REFERENCE_TABLE":case "SPACER":case "STATUS":case "UPDATED_TIME":break;case "GROUP_SELECT":case "ORGANIZATION_SELECT":case "STATUS_ASSIGNEE":case "USER_SELECT":e[b]=
{value:b in a?Array.from(new Set(a[b].value.map(function(g){return g.code}).sort())):[]};break;case "NUMBER":e[b]={value:b in a?kb.isNumeric(a[b].value)?a[b].value.toString():"":""};break;case "SUBTABLE":e[b]={value:a[b].value.reduce(function(g,d){g.push({value:f.simplify(l,d.value)});return g},[])};break;default:e[b]={value:b in a?(a[b].value||" ").toString().replace(/[\r\n]*/g,""):""}}})(c.fields[b]);return e};
window.KintoneBoosterRecordPicker=function(c,a,f){var e=KintoneBoosterDialog.call(this,999997,!1,!a)||this;e.multiSelect=a;e.prepend=f;e.type=c;e.limit=50;e.offset=0;e.table=null;e.fieldInfo={};e.records=[];e.selection=[];e.img=e.parts.icon.clone().css({top:"0px"});e.prev=e.img.clone().css({right:"4em"}).attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAjZJREFUeNpiYKAJ6J8y8T+MzYIm0QCk6pHFmNA016ObhqKgMCefkfoOBggg6vr9Psz/LLgCBcVb6BI4gxSvQqJMAQggugYDinNYSNVAUDOxHmbCJghNRo2ENDMSG+VASoGq6RMggIY7Agbae6Limdh4ZyGgaT2QCiAphRGbyliwaALZtJ7s5EksYCTF2ehJE6fNUIUbqFIIUFQuYUskAwcAAmgUUTP3F5CUpSi0DD07TqCZxUDLQBXBfVL1sZBpmQCQoiiPsJCRIQWoES3ENAn2AykHaic+Rlr6GF8DgJGWcUx1i4lN1TS1GF8+HpC2FqGSa+QBgAAaRaNgFBBVcJDVm6BCL4uo2ouFShYaAKnzNG/6oFkKstCALm0uarS7mMi0tJ+ujT1i+79UtRhav/ZTKwewUDubULN5S5MRO4KJC9pu+kB3i6GWC4KoAWvQkxL0hFqYJOdjqIET6BLUWCwHBbsg3S2GWv4B6vsLdLUYyQGGQMqQ5omL2IKG6omL3tluFIwCkgFAgPbN6AZAGASi1XQQR3BD3aSrGhLilzZqoQK9iwu8RLnrUfFAEORKbla63NNSRbq21KPZOCQFqJIqC133wAxJt2FU+uZsCHRPF9d+QgFzq7FJlwymgHk/U3pCdgfmgpMm7PL3p5MVIU8bsTQUpbtxcRsxB6xtI9Ka02CaPL7SLdFSLUtrDi2TwJq2ZB5YOni4ApaIlm6Bvx4eQgC/8fVQwE9sLizwnc3hbwMIgobRAdIK28oCHbudAAAAAElFTkSuQmCC").on("click",
function(b){e.offset-=e.limit;e.search()});e.next=e.img.clone().css({right:"2em"}).attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAi1JREFUeNpiYKAa6J8y8T8Q30cXZ0LjK4AU4lMANw3GZkGXLMzJZ2QgpIskABBAVPI/Xr9DA6gBn7/rcUri9DNJACCAaO9lXICRkGZ8HmQkxWZ0g5iIdGEjNhew4NHwAKhBkWaBCxBAwwUBo+o9sWqxRZUAsamMiUDJtJ4szVAQgM8VTMRmFiAOIEszLsBCjCJcOYuQzRvwZUkWUm2jWiIZOAAQQKMIW8QV0MJcRmKyExI3EJjsNgyExchAEeiIBwNhMTIQBDriw0BYDAMfgA4QHAiLkcEBoCMcKSo1aeFjallMchxTYjFFqZpUi6mWjwes5Bp5ACCARtEoGJlNn/+0KESI7RD0U7vRTEpPRADqewN6WwwD54GWnx/Ixh5Z9TBVOn1A8B7osP6BsBgECshplzENVLZjona2JzbbUdtiogdDaGHxB2K69dS2uJDe7WqSBy+o4eMJ5IyYUOpjsksuci2+ALTQkBIXk2OxIdDSC5TGDwuJ2USQWomRidrZZBSMggEHAAHaNaMbAEEYiBLDgo7AJo7gaI7gCI5giMSAn0LLNb0XBuAlhF4LXIQQU3Q/vZfcnsPI2jNPtSZck+e66W/utCjcpPzw/DC4vAjXZPHNk/DbDxT53YvwVz6pvecACNec5aY/vAg3zb5UmUMVFitzFoSHlrklOCMa2OPQI40qLHZpIQmrlKXZwurBI06SnBYtNYUhmgdpYbj2UEIYegAwStjMiIcQQkxxA49895hLUEtfAAAAAElFTkSuQmCC").on("click",
function(b){e.offset+=e.limit;e.search()});e.submit=e.img.clone().css({left:"0"}).attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA7BJREFUeNpiYKAa6J8yMQFK/yfbhP9Qej7RigkpOk+U1QABRLnf92MTZ4LSDkgKHbDpNiDoHZACvIqIChCAAKIIMeLwNtxHhTn5jCTFNHoo4FLPRISZ58mJNQdCwctIauIlKRzwAYAAGqKIkUBcNwIDp4GsRAIqFoC4gBiNAaTmEOQUZkBpWfCeXJtB4AFSMRgAYoNSE9Zyg5R0TVbaRteEnK4JZkn0TAA0rIGcwPxP+4KNWAAQQKO5mVCeg2WdA8DYP0Azi6FZTACILwAtMkQSB4ndxyZHjfbNf2LaE1RNsqBMQ4phUMsdSLEDV04+gBSkRJW3pMY5E45iA2RIIxC/x9cQhEbFeiB2pHqqhlYz/TikHUGOhLZXzpNS6TNSIT2A4nY/MQUuVS0mpibD5gCqt4NwOCARaPkCuhSJ0CyZMFo5wABAAI2iUTCwLRBoLVWAVBI10NRioIUK0JYG0UUhxRaj1TiBQEs2oLWu66FcQaDcB1ItZiHUu8bmK2hQw1op78kp85lw+HY9kUGpiFRnU24xEICaMwSDD+iwBzC3UstiEJhIpBlkta+ZqJAlBahtcT2RZhhQ0+IFxDRvkdrSgVSxGJhoEqHM9wRKs/1Q9RuoGdSCSL2E+WiW7oc5Cpbl8A3Jkduufo8jAT0AWqqIRQ1RDTtSuqmw+PwANPgCWm/CgNRWJTUa9Lja03gtp0Y+xpWi5+Nr3lJsMTRFJ5JqOTV8zAANUpyW08xiIiynncV4LBekW0MO1GQiawxwFAwrABCgXau9QRCIoYQJWMENdAJlBCZQJjCOwAZugE4AG+AGygSs4AjapJra8HF3HEcx96J/jCR91uu1r8+/PDw8/k+FUGw+jzhg9gGGT+iSMjJkLoMwzgxVS5v/xKG1Jp9tA+IfIIDOPDYRMZwRRgnozogq77dxysvZvwE2Z7E4wi17h2yMyMacI5Dl1dTZDjWCixjZZKyiiFm9EAmlmjrDOvMDlc5KE9FhQOwArHU3k1MSpqgtx3FzVbRMCW8tDnURq+AyzjCe108wO4uTZ8GOykNSlYYrqWEBJiMy25Dr7SvRiWs8WuQ7OIOpSveERalg9/j5/exJeqcVYeC7gUIUBd3i+Q9R7N5y8v0n/pDl7IRbyB/e733QvxmAwK+cQE+bSmHFVjC7F5RbVRQwirgI82vPrsE6cTFuXxTPc4NHtYiLszcbEofitlG5JUJphCFbuKdLNR77FM3lZdgw48om0MU49juIO1dMPDw8PJziBXvFttyY+HdhAAAAAElFTkSuQmCC").on("click",
function(b){e.offset=0;e.search()});e.input=e.parts.input.clone().css({paddingLeft:"2em",paddingRight:"4em"}).attr("placeholder",kb.constants.common.prompt.keyword[kb.operator.language]).attr("type","text").on("keydown",function(b){if(13==(b.keyCode||b.which))return e.offset=0,e.search(),b.stopPropagation(),b.preventDefault(),!1});e.container.css({height:"calc(34em + 16px)",minWidth:"16em"});e.contents.css({padding:"0px"});e.header.css({boxShadow:"none"}).append(e.input).append(e.next).append(e.prev).append(e.submit);
return e};$jscomp.inherits(window.KintoneBoosterRecordPicker,KintoneBoosterDialog);
window.KintoneBoosterRecordPicker.prototype.search=function(c){var a=this;switch(this.type){case "record":kintone.api(kintone.api.url("/k/v1/records",!0),"GET",{app:this.fieldInfo.app,query:function(){var e=[];a.fieldInfo.query&&e.push(a.fieldInfo.query);a.input.val()&&e.push(function(b){var l=[];b.each(function(g,d){for(var m in a.fieldInfo.picker){var p=a.fieldInfo.picker[m];switch(p.type){case "LINK":case "MULTI_LINE_TEXT":case "RICH_TEXT":case "SINGLE_LINE_TEXT":l.push(p.code+' like "'+g+'"')}}});
return 0!=l.length?"("+l.join(" or ")+")":""}(a.input.val().split(/[ \u3000]/).filter(function(b){return b})));return e.join(" and ")+" order by "+(a.fieldInfo.sort?a.fieldInfo.sort:"$id asc")+" limit "+a.limit+" offset "+a.offset}()}).then(function(e){a.records=e.records;a.table.clearRows();a.records.each(function(b,l){(function(g){kb.record.set(g,{fields:a.fieldInfo.picker},b);a.multiSelect&&a.selection.some(function(d){return d.$id.value==b.$id.value})&&g.css({backgroundColor:"rgba(66,165,245,0.5)",
color:""})})(a.table.addRow())});0<a.offset?a.prev.show():a.prev.hide();a.offset+(a.limit==a.records.length?a.limit:a.records.length)<e.total?a.next.show():a.next.hide();c&&c()})["catch"](function(e){return kb.alert(kb.error.parse(e))});break;default:var f=function(){var e=function(){var b=a.prepend?a.prepend.concat(kb.roleSet[a.type]):kb.extend({},kb.roleSet[a.type]);a.input.val()&&function(l){b=b.filter(function(g){var d=!1;g.name.value&&(d=l.some(function(m){return g.name.value.match(new RegExp(m,
"ig"))}));return d})}(a.input.val().replace(/[\u3000 ]+/g," ").split(" ").filter(function(l){return l}));return b}();a.records=e.slice(a.offset,a.offset+a.limit);a.table.clearRows();a.records.each(function(b,l){(function(g){kb.record.set(g,{fields:a.fieldInfo.picker},b);a.multiSelect&&a.selection.some(function(d){return d.code.value==b.code.value})&&g.css({backgroundColor:"rgba(66,165,245,0.5)",color:""})})(a.table.addRow())});0<a.offset?a.prev.show():a.prev.hide();a.offset+(a.limit==a.records.length?
a.limit:a.records.length)<e.length?a.next.show():a.next.hide();c&&c()};0==kb.roleSet.user.length?kb.roleSet.load().then(function(){return f()}):f()}};
window.KintoneBoosterRecordPicker.prototype.show=function(c,a){var f=this,e=this.parts.div.clone().css({borderTop:"1px solid #42a5f5",borderBottom:"1px solid #42a5f5",lineHeight:"2em",padding:"0px 0.5em"}),b=this.parts.td.clone().css({cursor:"pointer",padding:"0",userSelect:"none"}),l=this.parts.th.clone().css({backgroundColor:kb.themeColor().backcolor});this.offset=0;this.fieldInfo=c;this.records=[];this.selection=[];this.input.val("");this.table=this.parts.table.clone().css({marginBottom:"0.5em"}).append(kb.create("thead").append(kb.create("tr"))).append(kb.create("tbody").append(kb.create("tr")));
for(var g in this.fieldInfo.picker)(function(d){f.table.elm("thead tr").append(l.clone().append(e.clone().html("label"in d?d.label:"")));var m=f.table.elm("tbody tr"),p=m.append,r=b.clone(),n=r.append,t=kb.field,k=t.create;d=kb.extend({},d);d.noLabel=!0;p.call(m,n.call(r,k.call(t,d).css({width:"100%"}).addClass("kb-picker kb-readonly")))})(this.fieldInfo.picker[g]);this.contents.empty().append(this.table.spread(function(d,m){d.on("click",function(p){(function(r){f.multiSelect?function(n){n.length==
f.selection.length?(f.selection.push(kb.extend({},r)),d.css({backgroundColor:"rgba(66,165,245,0.5)",color:""})):(f.selection=n,d.css({backgroundColor:"transparent",color:kb.themeColor().forecolor}))}(f.selection.filter(function(n){return"record"==f.type?n.$id.value!=r.$id.value:n.code.value!=r.code.value})):(a&&a(r),f.hide())})(f.records[m])});(function(p){d.addClass("kb-scope").elms(".kb-field").each(function(r,n){return kb.field.activate(r,p)})})({id:"recordPicker",fields:kb.extend({},f.fieldInfo.picker)})}));
this.multiSelect&&(this.handler&&this.ok.off("click",this.handler),this.handler=function(d){a&&a(f.selection);f.hide()},this.ok.on("click",this.handler),this.cancel.on("click",function(d){return f.hide()}));this.search(function(){return KintoneBoosterDialog.prototype.show.call(f)})};window.KintoneBoosterButton=function(){};
window.KintoneBoosterButton.prototype.create=function(c,a,f,e,b,l){(function(g){g&&g.parentNode.removeChild(g)})(kb.elm("#"+f));switch(a){case "detail":(c?kintone.mobile.app.getHeaderSpaceElement():kintone.app.record.getHeaderMenuSpaceElement().css({padding:"0 0.75em 0 1em"})).append(kb.create("button").addClass("kb-action-button kb-page-detail "+(c?" kb-mobile":"")).attr("id",f).html(e).on("click",function(g){kb.confirm(b,function(){return l()})}));break;case "index":(c?kintone.mobile.app.getHeaderSpaceElement():
kintone.app.getHeaderMenuSpaceElement()).append(kb.create("button").addClass("kb-action-button kb-page-index "+(c?" kb-mobile":"")).attr("id",f).html(e).on("click",function(g){kb.confirm(b,function(){return l()})}))}};window.KintoneBoosterField=function(){this.cache={};this.reserved="CATEGORY CREATED_TIME CREATOR GROUP HR LABEL MODIFIER RECORD_NUMBER REFERENCE_TABLE SPACER STATUS STATUS_ASSIGNEE UPDATED_TIME __ID__ __REVISION__".split(" ")};
window.KintoneBoosterField.prototype.activate=function(c,a,f){var e=this;f=void 0===f?!0:f;var b=kb.field.parallelize(a.fields),l=function(){return kb.create("div").css({zIndex:kb.popups.alert.cover.style.zIndex-4}).append(kb.create("img").attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QkVGNzA3QTE1RTc4MTFFOEI5MDA5RUE2NDFCQTUzNDciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QkVGNzA3QTI1RTc4MTFFOEI5MDA5RUE2NDFCQTUzNDciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCRUY3MDc5RjVFNzgxMUU4QjkwMDlFQTY0MUJBNTM0NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCRUY3MDdBMDVFNzgxMUU4QjkwMDlFQTY0MUJBNTM0NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkBlNTAAAADNSURBVHja7NHBCcJAFATQZNBcYwmSmycPlpI2bCVgAVqAVmAFHmxqncAKQVyz+/N/grADc0iyy0Be6ZwrlgiKhZKH83Ae/v/h1X23l9499vfZk2hYOHpgO7ZkH+xzjl9dsze2Ytfsld3MMXxhm8Hzlj1bD/eu7Zf3rf9mMvx2DaXzZ1SHh66hVP5MrTn86RpK48+qDIdcQ4nyxkRXsTcmuoq9oeAq8oaSa7I3FF2TvKHomuQNZddobxi4RnnDyHXUG0auo94wdP3p/RJgAMw4In5GE/6/AAAAAElFTkSuQmCC")).append(kb.create("span"))},
g=function(d){(function(m,p){c.elm(".kb-field-alert")?c.elm(".kb-field-alert").hide():c.elms("input,select,textarea").each(function(r,n){r.alert&&r.alert.hide()});kb.event.call(d,{container:p,record:kb.record.get(m,a,!0).record}).then(function(r){r.error||(f?kb.event.call("kb.action.call",{container:m,record:r.record,mobile:location.href.match(/\/m\//g)?!0:!1,pattern:"change",field:c.attr("field-id"),workplace:m.closest(".kb-view")?"view":"record"}).then(function(n){kb.event.call("kb.style.call",
{container:m,record:n.record,mobile:n.mobile,pattern:"$id"in n.record?n.record.$id.value?"edit":"create":"create",workplace:n.workplace}).then(function(t){kb.record.set(m,a,t.record);t=new Event("change");m.attr("unsaved","unsaved").dispatchEvent(t)})["catch"](function(){})}):(kb.record.set(m,a,r.record),function(n){m.attr("unsaved","unsaved").dispatchEvent(n)}(new Event("change"))))})})(c.closest("[form-id=form_"+a.id+"]"),c.closest(".kb-scope"))};c.attr("field-id")&&function(d,m){if(m.lookup)(function(p){d.elm(".kb-search").on("click",
function(r){p(d.elm(".kb-lookup-search").val(),kb.extend({},m))});d.elm(".kb-open").on("click",function(r){(function(n,t){d.elm(".kb-lookup-search").val()?kb.view.records.get(t,kb.filter.query.create({code:m.lookup.relatedKeyField},"=",{type:m.type,value:d.elm(".kb-lookup-search").val()})).then(function(k){0!=k.length&&window.open(kb.record.page.detail(n,t,k.first().$id.value))})["catch"](function(k){return kb.alert(kb.error.parse(k))}):window.open(kb.record.page.add(n,t))})(location.href.match(/\/m\//g)?
!0:!1,m.lookup.relatedApp.app)});d.elm(".kb-clear").on("click",function(r){kb.confirm(kb.constants.common.message.confirm["delete"][kb.operator.language],function(){d.lookup("").then(function(){return g("kb.change."+m.code)})})});d.elm("input").on("change",function(r){p(r.currentTarget.val(),kb.extend({},m))})})(function(p,r){e.load(r.lookup.relatedApp.app).then(function(n){(function(t){var k=function(){r.picker=function(u){var h={};u.each(function(w,q){w in t.external&&(h[w]=kb.extend({},t.external[w]))});
0==Object.keys(h).length&&(h.$id={code:"$id",type:"RECORD_NUMBER",label:kb.constants.picker.caption.recordnumber[kb.operator.language],required:!1,noLabel:!1});return h}(r.lookup.lookupPickerFields);d.recordPicker.show({app:r.lookup.relatedApp.app,query:r.query,sort:r.lookup.sort||"$id asc",picker:r.picker},function(u){return d.lookup(u.$id.value).then(function(){return g("kb.change."+r.code)})})};p?(r.query=[r.lookup.filterCond,r.lookup.relatedKeyField+("NUMBER"==r.type?"=":" like ")+'"'+p+'"'].filter(function(u){return u}).join(" and "),
kintone.api(kintone.api.url("/k/v1/records",!0),"GET",{app:r.lookup.relatedApp.app,query:r.query}).then(function(u){1==u.records.length?d.lookup(u.records.first().$id.value).then(function(){return g("kb.change."+r.code)}):k()})["catch"](function(u){return kb.alert(kb.error.parse(u))})):(r.query=r.lookup.filterCond,k())})({external:n.parallelize,internal:b})})}),d.recordPicker=new KintoneBoosterRecordPicker("record"),d.lookup=function(p){return new Promise(function(r,n){(function(t){var k=function(){kb.record.set(t,
m.tableCode?a.fields[m.tableCode]:a,function(){return m.lookup.fieldMappings.reduce(function(u,h){if(h.field in b)switch(b[h.field].type){case "CHECK_BOX":case "FILE":case "GROUP_SELECT":case "MULTI_SELECT":case "ORGANIZATION_SELECT":case "USER_SELECT":u[h.field]={value:[]};break;default:u[h.field]={value:""}}return u},function(u){u[m.code]={value:""};return u}({}))}(),!1).then(function(){return r()})};p?kintone.api(kintone.api.url("/k/v1/record",!0),"GET",{app:m.lookup.relatedApp.app,id:p}).then(function(u){u.record?
kb.record.set(t,m.tableCode?a.fields[m.tableCode]:a,function(){return m.lookup.fieldMappings.reduce(function(h,w){w.relatedField in u.record&&w.field in b&&(h[w.field]={value:u.record[w.relatedField].value});return h},function(h){h[m.code]={value:u.record[m.lookup.relatedKeyField].value};return h}({}))}(),!1).then(function(){return r()}):k()})["catch"](function(u){return kb.alert(kb.error.parse(u))}):k()})(d.closest(".kb-scope"))})};else switch(m.type){case "CHECK_BOX":case "MULTI_SELECT":m.required&&
(d.alert=function(p){d.elm(".kb-field-alert")||d.append(l().addClass("kb-field-alert"));d.elm(".kb-field-alert").elm("span").html(p).parentNode.show()});break;case "COLOR":d.elm(".kb-search").on("click",function(p){kb.pickupColor(function(r){d.css({backgroundColor:r}).elm("input").val(r);g("kb.change."+m.code)})});d.elm("input").on("change",function(p){p.currentTarget.val()?(p=p.currentTarget.val().replace(/#/g,""),p.match(/([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/g)&&(d.css({backgroundColor:"#"+p}).elm("input").val("#"+
p),g("kb.change."+m.code))):(d.css({backgroundColor:"transparent"}),g("kb.change."+m.code))});break;case "CONDITION":d.elm(".kb-search").on("click",function(p){kb.filter.build(m.app,d.elm("input").val(),function(r){d.elm("input").val(r);g("kb.change."+m.code)})});d.reset=function(p){m.app=p;d.elm("input").val("");d.elm(".kb-guide").empty()};d.guide=function(p){d.elm(".kb-guide").append(function(r){r.append(kb.create("button").addClass("kb-icon kb-icon-del kb-guide-item-icon").on("click",function(n){kb.confirm(kb.constants.common.message.confirm["delete"][kb.operator.language],
function(){d.elm("input").val(d.elm("input").val().split(" and ").filter(function(t){return t!=p}).join(" and "));g("kb.change."+m.code)})})).append(kb.create("span").addClass("kb-guide-item-label").html(p));return r}(kb.create("span").addClass("kb-guide-item")))};m.required&&(d.alert=function(p){d.elm(".kb-field-alert")||d.append(l().addClass("kb-field-alert"));d.elm(".kb-field-alert").elm("span").html(p).parentNode.show()});break;case "DATE":d.elm(".kb-search").on("click",function(p){kb.pickupDate(d.elm("input").val(),
function(r){d.elm("input").val(r);g("kb.change."+m.code)})});break;case "DATETIME":d.elm(".kb-search").on("click",function(p){kb.pickupDate(d.elm("input").val(),function(r){d.elm("input").val(r);g("kb.change."+m.code)})});break;case "FILE":d.elm(".kb-search").on("click",function(p){(function(r){kb.elm("body").append(r.on("change",function(n){n.currentTarget.files?function(t){kb.file.upload(Array.from(n.currentTarget.files).first()).then(function(k){d.elm("input").val(JSON.stringify((d.elm("input").val()?
JSON.parse(d.elm("input").val()):[]).concat(k)));g("kb.change."+m.code)})["catch"](function(k){return kb.alert(kb.error.parse(k))})["finally"](function(){return document.body.removeChild(r)})}(Array.from(n.currentTarget.files).first()):document.body.removeChild(r)}));r.click()})(kb.create("input").attr("type","file").css({display:"none"}))});d.guide=function(p){d.elm(".kb-guide").append(function(r){r.append(kb.create("button").addClass("kb-icon kb-icon-del kb-guide-item-icon").on("click",function(n){kb.confirm(kb.constants.common.message.confirm["delete"][kb.operator.language],
function(){d.elm("input").val(JSON.stringify(JSON.parse(d.elm("input").val()).filter(function(t){return t.fileKey!=p.fileKey})));g("kb.change."+m.code)})})).append(kb.create("span").addClass("kb-guide-item-label").html(p.name).on("click",function(n){return d.open(p)}));return r}(kb.create("span").addClass("kb-guide-item")))};d.open=function(p){kb.event.call("kb.attachment.call",{mode:"download",downloadable:!0}).then(function(r){return kb.attachment.show(p,r.downloadable)})["catch"](function(){})};
m.required&&(d.alert=function(p){d.elm(".kb-field-alert")||d.append(l().addClass("kb-field-alert"));d.elm(".kb-field-alert").elm("span").html(p).parentNode.show()});break;case "GROUP_SELECT":case "ORGANIZATION_SELECT":case "USER_SELECT":(function(p){d.elm(".kb-search").on("click",function(r){d.recordPicker.show({picker:{name:{code:"name",type:"SINGLE_LINE_TEXT",label:kb.constants.picker.caption.name[kb.operator.language],required:!1,noLabel:!0}}},function(n){(function(t){(function(k){n.each(function(u,
h){k.includes(u.code.value)||t.push({code:u.code.value,name:u.name.value})})})(t.map(function(k){return k.code}));d.elm("input").val(JSON.stringify(t));g("kb.change."+m.code)})(d.elm("input").val()?JSON.parse(d.elm("input").val()):[])})});d.recordPicker=new KintoneBoosterRecordPicker(p,!0,function(){var r=[];m.loginuser&&r.push({code:{value:"LOGINUSER()"},name:{value:"Login user"}});m.guestuser&&r.push({code:{value:"GUESTUSER()"},name:{value:"Guest user"}});return r}());d.guide=function(r){d.elm(".kb-guide").append(function(n){n.append(kb.create("button").addClass("kb-icon kb-icon-del kb-guide-item-icon").on("click",
function(t){kb.confirm(kb.constants.common.message.confirm["delete"][kb.operator.language],function(){d.elm("input").val(JSON.stringify(JSON.parse(d.elm("input").val()).filter(function(k){return k.code!=r.code})));g("kb.change."+m.code)})})).append(kb.create("span").addClass("kb-guide-item-label").html(r.name));return n}(kb.create("span").addClass("kb-guide-item")))};m.required&&(d.alert=function(r){d.elm(".kb-field-alert")||d.append(l().addClass("kb-field-alert"));d.elm(".kb-field-alert").elm("span").html(r).parentNode.show()})})(function(){var p=
"";switch(m.type){case "GROUP_SELECT":p="group";break;case "ORGANIZATION_SELECT":p="organization";break;case "USER_SELECT":p="user"}return p}());case "NUMBER":(function(p){d.on("show",function(r){return p()});p()})(function(){d.elm(".kb-unit")?d.elm("input").css({width:"calc(100% - "+d.elm(".kb-unit").outerWidth(!0)+"px)"}):d.elm("input").css({width:null})});break;case "RADIO_BUTTON":d.elms("[data-name="+m.code+"]").each(function(p,r){p.closest("label").on("click",function(n){(function(t){d.elms("[data-name="+
m.code+"]").each(function(k,u){return k.checked=t==k.val()});g("kb.change."+m.code)})(p.val());n.stopPropagation();n.preventDefault()})});break;case "TIME":d.elm(".kb-hour").elm("select").on("change",function(p){p.currentTarget.val()||d.elm(".kb-minute").elm("select").val("");g("kb.change."+m.id)}),d.elm(".kb-minute").elm("select").on("change",function(p){p.currentTarget.val()||d.elm(".kb-hour").elm("select").val("");g("kb.change."+m.id)})}d.elms("input,select,textarea").each(function(p,r){switch(m.type){case "COLOR":case "CONDITION":case "FILE":case "GROUP_SELECT":case "ORGANIZATION_SELECT":case "RADIO_BUTTON":case "TIME":case "USER_SELECT":break;
default:p.on("change",function(n){return g("kb.change."+m.code)})}})}(c.elm(".kb-field-value"),b[c.attr("field-id")]);return c};window.KintoneBoosterField.prototype.blobToBase64=function(c,a){var f=new FileReader;f.onload=function(){a(f.result.replace(/^data:.+;base64,/,""))};f.readAsDataURL(c)};
window.KintoneBoosterField.prototype.create=function(c,a){a=void 0===a?!1:a;var f=function(e){e.append(kb.create("div").addClass("kb-dropdown kb-hour").append(kb.create("select").assignOption(function(){var b=[{value:""}];(24).each(function(l){return b.push({value:l.toString().lpad("0",2)})});return b}(),"value","value"))).append(kb.create("div").addClass("kb-dropdown kb-minute").append(kb.create("select").assignOption(function(){var b=[{value:""}];(60).each(function(l){return b.push({value:l.toString().lpad("0",
2)})});return b}(),"value","value")))};if(!("type"in c))throw Error("You shoud setup [type] in field information");return function(e){e.append(kb.create("span").addClass("kb-field-caption").html(c.label));c.noLabel&&e.elm(".kb-field-caption").addClass("kb-hidden");e.append(function(b){switch(c.type){case "CALC":switch(c.format){case "NUMBER":case "NUMBER_DIGIT":b.addClass("kb-number")}break;case "CHECK_BOX":case "MULTI_SELECT":(function(l){l.reduce(function(g,d){g[d.index]=d;return g},Array(l.length).fill("")).each(function(g,
d){b.addClass("kb-checkbox").append(kb.create("label").append(kb.create("input").attr("type","checkbox").val(g.label)).append(kb.create("span").html(g.label)))})})(Object.values(c.options));break;case "COLOR":b.addClass("kb-color").append(kb.create("input").attr("type","text").attr("data-type","color")).append(kb.create("button").addClass("kb-icon kb-icon-color kb-search"));break;case "CONDITION":b.addClass("kb-condition").append(kb.create("input").attr("type","hidden")).append(kb.create("button").addClass("kb-icon kb-icon-filter kb-search"));
break;case "CREATOR":case "CREATED_TIME":case "MODIFIER":case "UPDATED_TIME":b.append(kb.create("input").attr("type","hidden").attr("data-type",c.type.toLowerCase()));break;case "DATE":b.addClass("kb-date").append(kb.create("input").attr("type","text").attr("data-type","date")).append(kb.create("button").addClass("kb-icon kb-icon-date kb-search"));break;case "DATETIME":f(b.addClass("kb-datetime").append(kb.create("input").attr("type","text").attr("data-type","date")).append(kb.create("button").addClass("kb-icon kb-icon-date kb-search")));
break;case "DROP_DOWN":(function(l){a?b.addClass("kb-dropdown").append(kb.create("select").assignOption([{label:""}].concat(l.reduce(function(g,d){d.label&&(g[d.index]=d);return g},Array(l.length).fill(""))),"label","label")):b.addClass("kb-dropdown").append(kb.create("select").assignOption(l.reduce(function(g,d){g[d.index]=d;return g},Array(l.length).fill("")),"label","label"))})(Object.values(c.options));break;case "FILE":b.addClass("kb-file").append(kb.create("input").attr("type","hidden")).append(kb.create("button").addClass("kb-icon kb-icon-file kb-search"));
break;case "GROUP_SELECT":b.addClass("kb-group").append(kb.create("input").attr("type","hidden")).append(kb.create("button").addClass("kb-icon kb-icon-group kb-search"));break;case "LINK":switch(c.protocol){case "WEB":b.addClass("kb-text").append(kb.create("input").attr("type","text").attr("data-type","url"));break;case "CALL":b.addClass("kb-text").append(kb.create("input").attr("type","text").attr("data-type","tel"));break;case "MAIL":b.addClass("kb-text").append(kb.create("input").attr("type","text").attr("data-type",
"mail"))}break;case "MULTI_LINE_TEXT":case "RICH_TEXT":b.addClass("kb-textarea").append(function(l){c.lines&&l.css({height:"calc("+(1.5*parseFloat(c.lines)).toString()+"em + 2px)"});return l}(kb.create("textarea")));break;case "NUMBER":c.lookup?b.addClass("kb-lookup").append(kb.create("input").addClass("kb-lookup-search").attr("type","text").attr("data-type","nondemiliternumber")).append(kb.create("button").addClass("kb-icon kb-icon-lookup kb-search")).append(kb.create("button").addClass("kb-icon kb-icon-open kb-open")).append(kb.create("button").addClass("kb-icon kb-icon-del kb-clear")):
(b.addClass("kb-number").append(function(l){"displayScale"in c&&l.attr("data-decimals",c.displayScale);return l.attr("data-type",c.digit?"number":"nondemiliternumber")}(kb.create("input").attr("type","text"))),c.unit&&function(l){"prefix"==c.unitPosition?b.insertBefore(l,b.elm("input")):b.insertBefore(l,b.elm("input").nextElementSibling)}(kb.create("span").addClass("kb-unit").html(c.unit)));break;case "ORGANIZATION_SELECT":b.addClass("kb-organization").append(kb.create("input").attr("type","hidden")).append(kb.create("button").addClass("kb-icon kb-icon-organization kb-search"));
break;case "RADIO_BUTTON":(function(l){l.reduce(function(g,d){g[d.index]=d;return g},Array(l.length).fill("")).each(function(g,d){var m=b.addClass("kb-radio"),p=m.append,r=kb.create("label").append(kb.create("input").attr("type","radio").attr("data-name",c.code).val(g.label)).append(kb.create("span").html(g.label));0==d&&(r.elm("input").checked=!0);p.call(m,r)})})(Object.values(c.options));break;case "RECORD_NUMBER":b.addClass("kb-id");break;case "SINGLE_LINE_TEXT":if(c.lookup)b.addClass("kb-lookup").append(kb.create("input").addClass("kb-lookup-search").attr("type",
"text").attr("data-type","text")).append(kb.create("button").addClass("kb-icon kb-icon-lookup kb-search")).append(kb.create("button").addClass("kb-icon kb-icon-open kb-open")).append(kb.create("button").addClass("kb-icon kb-icon-del kb-clear"));else switch(c.format){case "password":b.addClass("kb-text").append(kb.create("input").attr("type","password").attr("data-type",c.type));break;default:b.addClass("kb-text").append(kb.create("input").attr("type","text").attr("data-type",c.format?c.format:"text"))}break;
case "SPACER":b.html(c.contents);break;case "TIME":f(b);break;case "USER_SELECT":b.addClass("kb-user").append(kb.create("input").attr("type","hidden")).append(kb.create("button").addClass("kb-icon kb-icon-user kb-search"))}return"SPACER"!=c.type?b.append(kb.create("span").addClass("kb-guide")):b}(kb.create("div").addClass("kb-field-value")));switch(c.type){case "CALC":case "CATEGORY":case "CONDITION":case "CREATED_TIME":case "CREATOR":case "FILE":case "GROUP_SELECT":case "MODIFIER":case "ORGANIZATION_SELECT":case "RECORD_NUMBER":case "REFERENCE_TABLE":case "STATUS":case "STATUS_ASSIGNEE":case "UPDATED_TIME":case "USER_SELECT":e.elm(".kb-guide").addClass("kb-fixed")}if(c.required)switch(c.type){case "CALC":case "CATEGORY":case "CHECK_BOX":case "CONDITION":case "CREATED_TIME":case "CREATOR":case "FILE":case "GROUP_SELECT":case "MODIFIER":case "MULTI_SELECT":case "ORGANIZATION_SELECT":case "RECORD_NUMBER":case "REFERENCE_TABLE":case "STATUS":case "STATUS_ASSIGNEE":case "UPDATED_TIME":case "USER_SELECT":break;
default:e.elms("input,select,textarea").each(function(b,l){return b.attr("required","required")})}c.placeholder&&e.elms("input,select,textarea").each(function(b,l){return b.attr("placeholder",c.placeholder)});return e}(kb.create("div").addClass("kb-field").attr("field-id",c.code))};
window.KintoneBoosterField.prototype.get=function(c,a,f){var e=null;if(c.tableCode)e=kb.elms(".field-"+c.id).map(function(b){switch(f){case "create":case "edit":b.value=a?b.elm("input[type=text],textarea,ul")?b.elm("input[type=text],textarea,ul"):b.elm("[class^=forms-]"):b.elm(".input-checkbox-cybozu,.input-date-cybozu,.input-datetime-cybozu,.input-file-cybozu,.input-radio-cybozu,.input-text-outer-cybozu,.input-time-cybozu,.multipleselect-cybozu,.select-cybozu");break;case "detail":case "print":b.value=
a?b.elm(".value-"+c.id):b}return b});else switch(e=kb.elm(".field-"+c.id),f){case "create":case "edit":e.value=a?e.elm("input[type=text],textarea,ul")?e.elm("input[type=text],textarea,ul"):e.elm("[class^=forms-]"):e.elm(".input-checkbox-cybozu,.input-date-cybozu,.input-datetime-cybozu,.input-file-cybozu,.input-radio-cybozu,.input-text-outer-cybozu,.input-time-cybozu,.multipleselect-cybozu,.select-cybozu");break;case "detail":case "print":e.value=e.elm(".value-"+c.id)}return e};
window.KintoneBoosterField.prototype.isEmpty=function(c){var a=!0;if(Array.isArray(c))a=0==c.length;else switch(typeof c){case "object":a=null===c||0==Object.keys(c).length;break;case "number":a=Number.isNaN(c);break;case "string":a=0==c.toString().length}return a};
window.KintoneBoosterField.prototype.load=function(c,a){var f=this;return new Promise(function(e,b){c in f.cache?e(f.cache[c]):kintone.api(kintone.api.url("/k/v1/app/form/layout",!0),"GET",{app:c}).then(function(l){(function(g){var d=[],m=[],p=[],r=function(n){return n.reduce(function(t,k){switch(k.type){case "GROUP":d.push(k.code);t=t.concat(r(k.layout));break;case "ROW":m=k.fields.reduce(function(u,h){h.elementId&&u.push(h);return u},m);t=k.fields.reduce(function(u,h){"code"in h&&u.push(h.code);
return u},t);break;case "SUBTABLE":p.push({code:k.code,fields:k.fields}),t=k.fields.reduce(function(u,h){"code"in h&&u.push(h.code);return u},t)}return t},[])};kintone.api(kintone.api.url("/k/v1/app/form/fields",!0),"GET",{app:c,lang:"user"}).then(function(n){(function(t){t.each(function(k,u){delete n.properties[k]})})(Object.values(n.properties).reduce(function(t,k){switch(k.type){case "CATEGORY":k.enabled||t.push(k.code);break;case "STATUS":k.enabled||(t.push(k.code),t.push(Object.values(n.properties).filter(function(u){return"STATUS_ASSIGNEE"==
u.type}).first().code))}return t},[]));(function(t,k,u){f.cache[c]={origin:n.properties,groups:d.reduce(function(h,w){h[w]=n.properties[w];return h},{}),tables:p.reduce(function(h,w){h[w.code]=function(q){q.fields=w.fields.reduce(function(v,x){v[x.code]=t[x.code];return v},{});return q}(n.properties[w.code]);w.code in u.table&&(h[w.code].id=u.table[w.code]);return h},{}),changes:function(h){var w=[];w=Object.values(t).reduce(function(q,v){h.includes(v.code)||q.push(v.code);return q},[]);return w.concat(p.map(function(q){return q.code}))}(function(){var h=
[],w;for(w in t)(function(q){kb.field.reserved.includes(q.type)?h.push(q.code):(q.expression&&h.push(q.code),q.lookup&&(h.push(q.code),function(v){v.field&&(h=h.concat(q.lookup.fieldMappings.reduce(function(x,y){y.field!=v.field&&x.push(y.field);return x},[])))}(q.lookup.fieldMappings.reduce(function(v,x){v.index<k.indexOf(x.field)&&(v={index:k.indexOf(x.field),field:x.field});return v},{index:-1,field:null}))))})(t[w]);return Array.from(new Set(h))}()),criterias:function(){var h={};k.each(function(q,
v){["FILE","REFERENCE_TABLE"].includes(t[q].type)||(h[q]=t[q])});for(var w in t)(function(q){switch(q.type){case "CALC":case "CREATED_TIME":case "CREATOR":case "MODIFIER":case "RECORD_NUMBER":case "UPDATED_TIME":h[q.code]=q;break;case "STATUS":q.enabled&&(h[q.code]=q,function(v){h[v.code]=v}(Object.values(t).filter(function(v){return"STATUS_ASSIGNEE"==v.type}).first()))}})(t[w]);return h}(),disables:function(){var h=[],w;for(w in t)(function(q){kb.field.reserved.includes(q.type)?h.push(q.code):(q.expression&&
h.push(q.code),q.lookup&&function(v){0!=v.length&&(h=h.concat(v))}(q.lookup.fieldMappings.map(function(v){return v.field})))})(t[w]);return Array.from(new Set(h))}(),parallelize:function(){var h={};k.each(function(q,v){h[q]=t[q]});for(var w in t)(function(q){switch(q.type){case "CATEGORY":q.enabled&&(h[q.code]=q);break;case "CREATED_TIME":case "CREATOR":case "MODIFIER":case "RECORD_NUMBER":case "UPDATED_TIME":h[q.code]=q;break;case "STATUS":q.enabled&&(h[q.code]=q,function(v){h[v.code]=v}(Object.values(t).filter(function(v){return"STATUS_ASSIGNEE"==
v.type}).first()))}q.code in u.field&&q.code in h&&(h[q.code].id=u.field[q.code])})(t[w]);return h}(),placed:function(){var h={};k.each(function(w,q){["REFERENCE_TABLE"].includes(t[w].type)||(h[w]=t[w])});return h}(),spacers:m,sorts:function(){var h={};k.each(function(q,v){var x=t[q];switch(x.type){case "CALC":case "CREATED_TIME":case "CREATOR":case "DATE":case "DATETIME":case "DROP_DOWN":case "LINK":case "MODIFIER":case "NUMBER":case "RADIO_BUTTON":case "RECORD_NUMBER":case "SINGLE_LINE_TEXT":case "TIME":case "UPDATED_TIME":x.tableCode||
(h[x.code]=x)}});for(var w in t)(function(q){switch(q.type){case "CALC":case "CREATED_TIME":case "CREATOR":case "MODIFIER":case "RECORD_NUMBER":case "UPDATED_TIME":h[q.code]=q;break;case "STATUS":q.enabled&&(h[q.code]=q)}})(t[w]);return h}()};e(f.cache[c])})(kb.field.parallelize(n.properties),r(g),function(){var t={field:{},table:{}};a&&(Object.values(cybozu.data.page.FORM_DATA.schema.table.fieldList).each(function(k,u){t.field[k["var"]]=k.id}),"subTable"in cybozu.data.page.FORM_DATA.schema&&Object.values(cybozu.data.page.FORM_DATA.schema.subTable).each(function(k,
u){t.table[k["var"]]=k.id;Object.values(k.fieldList).each(function(h,w){t.field[h["var"]]=h.id})}));return t}())})["catch"](function(n){return kb.alert(kb.error.parse(n))})})(l.layout)})["catch"](function(l){return kb.alert(kb.error.parse(l))})})};
window.KintoneBoosterField.prototype.parallelize=function(c){c=kb.extend({},c);var a={},f;for(f in c){var e=void 0,b=c[f];switch(b.type){case "SUBTABLE":var l=b.code;for(e in b.fields)b.fields[e]=kb.extend({tableCode:l},b.fields[e]),a[b.fields[e].code]=b.fields[e];break;default:b=kb.extend({tableCode:""},b),a[b.code]=b}}return a};
window.KintoneBoosterField.prototype.stringify=function(c,a,f){var e="";if(c&&a)switch(c.type){case "CATEGORY":case "CHECK_BOX":case "MULTI_SELECT":e=a.join(f);break;case "CREATOR":case "MODIFIER":e=a.name;break;case "CREATED_TIME":case "DATETIME":case "UPDATED_TIME":e=a.parseDateTime().format("Y-m-d H:i");break;case "FILE":case "GROUP_SELECT":case "ORGANIZATION_SELECT":case "STATUS_ASSIGNEE":case "USER_SELECT":e=a.map(function(b){return b.name}).join(f);break;case "MULTI_LINE_TEXT":case "RICH_TEXT":e=
a.replace(/\n/g,"");break;case "NUMBER":kb.isNumeric(a)&&(e=c.digit?Number(a).comma(c.displayScale):c.displayScale?Number(a).toFloor(parseInt(c.displayScale)):a);c.unit&&(e="prefix"==c.unitPosition?c.unit+" "+e:e+" "+c.unit);break;default:e=a}return e};
window.KintoneBoosterField.prototype.typing=function(c,a,f){f=void 0===f?!1:f;var e=!1;if("SINGLE_LINE_TEXT"==a.type)switch(c.type){case "CALC":case "CREATED_TIME":case "DATE":case "DATETIME":case "DROP_DOWN":case "LINK":case "NUMBER":case "RADIO_BUTTON":case "RECORD_NUMBER":case "SINGLE_LINE_TEXT":case "STATUS":case "TIME":case "UPDATED_TIME":e=f?!0:!a.expression}if(!e)switch(c.type){case "CALC":if(a.type==c.type)e=a.format==c.format&&f;else switch(c.format){case "DATE":case "DATETIME":case "TIME":e=
a.type==c.format;break;case "NUMBER":case "NUMBER_DIGIT":e=(f?["NUMBER","RECORD_NUMBER"]:["NUMBER"]).includes(a.type)}break;case "CHECK_BOX":case "MULTI_SELECT":e=["CHECK_BOX","MULTI_SELECT"].includes(a.type);break;case "CREATED_TIME":case "DATETIME":case "UPDATED_TIME":e="CALC"==a.type?"DATETIME"==a.format&&f:(f?["CREATED_TIME","DATETIME","UPDATED_TIME"]:["DATETIME"]).includes(a.type);break;case "CREATOR":case "MODIFIER":case "STATUS_ASSIGNEE":case "USER_SELECT":e=(f?["CREATOR","MODIFIER","STATUS_ASSIGNEE",
"USER_SELECT"]:["USER_SELECT"]).includes(a.type);break;case "DATE":e="CALC"==a.type?"DATE"==a.format&&f:a.type==c.type;break;case "DROP_DOWN":case "RADIO_BUTTON":e=["DROP_DOWN","LINK","RADIO_BUTTON"].includes(a.type);break;case "FILE":case "MULTI_LINE_TEXT":case "RICH_TEXT":e=f?!1:a.type==c.type;break;case "GROUP_SELECT":case "LINK":case "ORGANIZATION_SELECT":case "STATUS":case "TIME":e=a.type==c.type;break;case "NUMBER":case "RECORD_NUMBER":e="CALC"==a.type?"NUMBER"==a.format&&f:(f?["NUMBER","RECORD_NUMBER"]:
["NUMBER"]).includes(a.type);break;case "SINGLE_LINE_TEXT":e=f?["DROP_DOWN","RADIO_BUTTON","LINK","MULTI_LINE_TEXT","RICH_TEXT"].includes(a.type):["LINK","MULTI_LINE_TEXT","RICH_TEXT"].includes(a.type)}return e};window.KintoneBoosterField.prototype.objectUrl=function(c,a){var f=null,e=window.URL||window.webkitURL;if("string"===typeof c){var b=atob(c),l=new Uint8Array(b.length);b.length.each(function(g){return l[g]=b.charCodeAt(g)});f=new Blob([l.buffer],{type:a})}else f=c;return e.createObjectURL(f)};
window.KintoneBoosterTable=function(){};
window.KintoneBoosterTable.prototype.activate=function(c,a){return c.spread(function(f,e){(function(b){f.elm(".kb-table-row-add").on("click",function(l){c.insertRow(f);kb.event.call("kb.row.add."+c.attr("field-id"),{container:c,record:kb.record.get(b,a,!0).record,rowindex:parseInt(f.attr("row-idx"))+1}).then(function(g){g.error?c.delRow(f):kb.event.call("kb.action.call",{container:b,record:g.record,mobile:location.href.match(/\/m\//g)?!0:!1,pattern:"change",field:c.attr("field-id"),workplace:b.closest(".kb-view")?
"view":"record"}).then(function(d){kb.event.call("kb.style.call",{container:b,record:d.record,mobile:d.mobile,pattern:"$id"in d.record?d.record.$id.value?"edit":"create":"create",workplace:d.workplace}).then(function(m){kb.record.set(b,a,m.record);m=new Event("change");b.attr("unsaved","unsaved").dispatchEvent(m)})["catch"](function(){})})})});f.elm(".kb-table-row-copy").on("click",function(l){c.insertRow(f);kb.event.call("kb.row.copy."+c.attr("field-id"),{container:c,record:function(g,d){g[c.attr("field-id")].value[d+
1]={value:kb.extend({},g[c.attr("field-id")].value[d].value)};return g}(kb.record.get(b,a,!0).record,parseInt(f.attr("row-idx"))),rowindex:parseInt(f.attr("row-idx"))+1}).then(function(g){g.error?c.delRow(f):kb.event.call("kb.action.call",{container:b,record:g.record,mobile:location.href.match(/\/m\//g)?!0:!1,pattern:"change",field:c.attr("field-id"),workplace:b.closest(".kb-view")?"view":"record"}).then(function(d){kb.event.call("kb.style.call",{container:b,record:d.record,mobile:d.mobile,pattern:"$id"in
d.record?d.record.$id.value?"edit":"create":"create",workplace:d.workplace}).then(function(m){kb.record.set(b,a,m.record);m=new Event("change");b.attr("unsaved","unsaved").dispatchEvent(m)})["catch"](function(){})})})});f.elm(".kb-table-row-del").on("click",function(l){kb.confirm(kb.constants.common.message.confirm["delete"][kb.operator.language],function(){kb.event.call("kb.row.del."+c.attr("field-id"),{container:c,record:kb.record.get(b,a,!0).record,rowindex:parseInt(f.attr("row-idx"))}).then(function(g){g.error||
(c.delRow(f),kb.event.call("kb.action.call",{container:b,record:kb.record.get(b,a,!0).record,mobile:location.href.match(/\/m\//g)?!0:!1,pattern:"change",field:c.attr("field-id"),workplace:b.closest(".kb-view")?"view":"record"}).then(function(d){kb.event.call("kb.style.call",{container:b,record:d.record,mobile:d.mobile,pattern:"$id"in d.record?d.record.$id.value?"edit":"create":"create",workplace:d.workplace}).then(function(m){kb.record.set(b,a,m.record);m=new Event("change");b.attr("unsaved","unsaved").dispatchEvent(m)})["catch"](function(){})}))})})});
f.elms(".kb-field").each(function(l,g){return kb.field.activate(l,a)});c.tr.each(function(l,g){return l.attr("row-idx",g)})})(c.closest("[form-id=form_"+a.id+"]"))},function(f,e){0==f.tr.length?f.addRow():f.tr.each(function(b,l){return b.attr("row-idx",l)})},!1)};
window.KintoneBoosterTable.prototype.create=function(c,a,f,e,b){return function(l){f||e||l.append(kb.create("thead").append(kb.create("tr")));l.append(kb.create("tbody").append(kb.create("tr").addClass("kb-scope").attr("row-idx","")));for(var g in c.fields)(function(d){f||e||l.elm("thead tr").append(kb.create("th").append(kb.create("span").html(d.label)));var m=l.elm("tbody tr"),p=m.append,r=kb.create("td"),n=r.append,t=kb.field,k=t.create;d=kb.extend({},d);e||(d.noLabel=!0);p.call(m,n.call(r,k.call(t,
d,b)))})(c.fields[g]);f||e||l.elm("thead tr").append(kb.create("th").addClass("kb-table-button"+(a?" kb-table-button-extension":"")));l.elm("tbody tr").append(kb.create("td").addClass("kb-table-button"+(a?" kb-table-button-extension":"")).append(kb.create("button").addClass("kb-icon kb-icon-add kb-table-row-add")).append(kb.create("button").addClass("kb-icon kb-icon-copy kb-table-row-copy").css({display:a?"inline-block":"none"})).append(kb.create("button").addClass("kb-icon kb-icon-del kb-table-row-del")));
for(g in c.fields)(function(d){d.lookup&&d.lookup.fieldMappings.each(function(m,p){m.field in c.fields&&l.elm('[field-id="'+CSS.escape(m.field)+'"]')&&l.elm('[field-id="'+CSS.escape(m.field)+'"]').addClass("kb-readonly")})})(c.fields[g]);return l.attr("field-id",c.code)}(kb.create("table").addClass("kb-table"))};
window.KintoneBoosterView=function(){var c=this;this.records={"delete":function(a,f,e){e=void 0===e?!1:e;return new Promise(function(b,l){var g=function(d,m){0!=f.length?kintone.api(kintone.api.url("/k/v1/records",!0),"DELETE",{app:a,ids:f.slice(d,d+100)}).then(function(p){e||kb.progressUpdate();d+=100;0<f.slice(d,d+100).length?g(d,m):m()})["catch"](function(p){return l(p)}):m()};e||kb.progressStart(Math.ceil(f.length/100));g(0,function(){e||kb.progressEnd();b()})})},get:function(a,f,e){return new Promise(function(b,
l){(function(g){var d=function(m,p,r){kintone.api(kintone.api.url("/k/v1/records",!0),"GET",{app:a,query:f+" order by "+g+" limit 500 offset "+p.toString()}).then(function(n){Array.prototype.push.apply(m,n.records);p+=500;500==n.records.length?d(m,p,r):r(m)})["catch"](function(n){return l(n)})};kintone.api(kintone.api.url("/k/v1/records",!0),"GET",{app:a,query:f,totalCount:!0}).then(function(m){1E4>m.totalCount?d([],0,function(p){return b(p)}):kintone.api(kintone.api.url("/k/v1/records/cursor",!0),
"POST",{app:a,query:f+" order by "+g,size:500}).then(function(p){(function(r){var n=function(t,k){kintone.api(kintone.api.url("/k/v1/records/cursor",!0),"GET",{id:r}).then(function(u){Array.prototype.push.apply(t,u.records);u.next?n(t,k):k(t)})["catch"](function(u){return l(u)})};n([],function(t){return b(t)})})(p.id)})["catch"](function(p){return l(p)})})["catch"](function(m){return l(m)})})(e||"$id asc")})},set:function(a,f,e,b){e=void 0===e?!1:e;b=void 0===b?!1:b;return new Promise(function(l,
g){var d=function(p,r){0!=f.post.length?kintone.api(kintone.api.url("/k/v1/records",!0),"POST",{app:a,records:f.post.slice(p,p+100)}).then(function(n){e||kb.progressUpdate();p+=100;0<f.post.slice(p,p+100).length?d(p,r):r()})["catch"](function(n){return g(n)}):r()},m=function(p,r){0!=f.put.length?kintone.api(kintone.api.url("/k/v1/records",!0),"PUT",{app:a,records:function(n){b&&(n=n.map(function(t){return c.records.transform(t.record)}));return n}(f.put.slice(p,p+100))}).then(function(n){e||kb.progressUpdate();
p+=100;0<f.put.slice(p,p+100).length?m(p,r):r()})["catch"](function(n){return g(n)}):r()};"post"in f||(f.post=[]);"put"in f||(f.put=[]);e||kb.progressStart(Math.ceil(f.post.length/100)+Math.ceil(f.put.length/100));d(0,function(){m(0,function(){e||kb.progressEnd();l()})})})},transform:function(a){var f=a.$id.value,e={},b;for(b in a)kb.field.reserved.includes(a[b].type)||(e[b]=a[b]);return{id:f,record:e}}}};
window.KintoneBoosterView.prototype.create=function(c,a,f,e){var b={key:function(){return"view_"+a.id+"_"+f+"_"+location.host.split(".").first()},set:function(l){var g=b.key(),d="[view-id=view_"+a.id+"_"+f+"] .kb-guide{min-width:auto !important;}";kb.elm("[view-id=view_"+a.id+"_"+f+"]").elms(".kb-view-head-resizer").each(function(m,p){var r=m.closest(".kb-view-head-cell");if(!r.hasClass("kb-unuse")){var n=r.attr("column-id"),t=150;l||kb.elm(".kb_spread_style_"+CSS.escape(g))&&kb.elm(".kb_spread_style_"+
CSS.escape(g)).text().match(new RegExp('\\[column-id="'+CSS.escape(n)+'"\\]',"g"))&&(t=r.outerWidth(!1));r=t;d+="[view-id=view_"+a.id+"_"+f+'] [column-id="'+CSS.escape(n)+'"]{max-width:'+r+"px;width:"+r+"px;}";d+="[view-id=view_"+a.id+"_"+f+'] [field-id="'+CSS.escape(n)+'"]{width:'+r+"px;}"}});kb.elm(".kb_spread_style_"+CSS.escape(g))&&kb.elm("head").removeChild(kb.elm(".kb_spread_style_"+CSS.escape(g)));kb.elm("head").append(kb.create("style").addClass("kb_spread_style_"+g).attr("media","screen").attr("type",
"text/css").text(d));localStorage.setItem(g,d)}};return c.append(function(l,g,d){var m=0,p=function(n){var t="";e||(t=(n?2:0)+d.buttons.length,t="kb-view-button_shave"+t.toString());return t}("viewer"==d.mode),r=function(n,t){var k=n.changedTouches?Array.from(n.changedTouches).first():n,u=n.currentTarget.closest(".kb-view-head-cell"),h=k.pageX,w=n.currentTarget.closest(".kb-view-head-cell").outerWidth(!1),q={move:function(v){var x=!1,y=v.changedTouches?Array.from(v.changedTouches).first():v,z=w+y.pageX-
h;u.css({maxWidth:z.toString()+"px",width:z.toString()+"px"});l.elms('[field-id="'+CSS.escape(t)+'"]').each(function(A,B){return A.css({width:z.toString()+"px"})});l.elms('[field-id="'+CSS.escape(t)+'"]').each(function(A,B){z<A.outerWidth(!1)&&(z=A.outerWidth(!1),x=!0)});x&&u.css({maxWidth:z.toString()+"px",width:z.toString()+"px"});v.stopPropagation();v.preventDefault()},end:function(v){b.set();kb.elm("body").removeClass("kb-resizing");window.off("mousemove,touchmove",q.move);window.off("mouseup,touchend",
q.end);v.stopPropagation();v.preventDefault()}};kb.elm("body").addClass("kb-resizing");window.on("mousemove,touchmove",q.move);window.on("mouseup,touchend",q.end);n.stopPropagation();n.preventDefault()};l.append(kb.create("thead").append(kb.create("tr").addClass("kb-view-head"))).append(kb.create("tbody").append(kb.create("tr").addClass("kb-view-row")));l.elm("thead tr").append(kb.create("th").addClass("kb-view-head-cell kb-view-button "+p+" kb-view-guide"));l.elm("tbody tr").append(kb.create("td").addClass("kb-view-button "+
p+" kb-view-guide").append(kb.create("a").addClass("kb-icon kb-icon-edit kb-view-row-edit"+(d.buttons.includes("detail")?" kb-unuse":""))).append(kb.create("button").addClass("kb-icon kb-icon-add kb-view-row-add"+(d.buttons.includes("add")||"viewer"==d.mode?" kb-unuse":""))).append(kb.create("button").addClass("kb-icon kb-icon-copy kb-view-row-copy"+(d.buttons.includes("clone")||"viewer"==d.mode?" kb-unuse":""))).append(kb.create("button").addClass("kb-icon kb-icon-del kb-view-row-del"+(d.buttons.includes("delete")?
" kb-unuse":""))));(function(n){n.concat(Object.keys(g.fields).filter(function(t){return!n.includes(t)})).each(function(t,k){(function(u,h){switch(u.type){case "SUBTABLE":for(var w in u.fields)l.elm("thead tr").append(function(q,v){h||m++;return q.addClass("kb-view-head-cell"+(h?" kb-unuse":"")).attr("column-id",v.code).append(kb.create("span").addClass("kb-view-head-caption").html(v.label)).append(kb.create("span").addClass("kb-view-head-resizer").on("mousedown,touchstart",function(x){return r(x,
v.code)}))}(kb.create("th"),u.fields[w])),u.fields[w].noLabel=!e;"viewer"!=d.mode&&(h||m++,l.elm("thead tr").append(kb.create("th").addClass("kb-view-head-cell kb-view-button kb-view-button-tables"+(h?" kb-unuse":""))));break;default:l.elm("thead tr").append(function(q){h||m++;return q.addClass("kb-view-head-cell"+(h?" kb-unuse":"")).attr("column-id",u.code).append(kb.create("span").addClass("kb-view-head-caption").html(u.label)).append(kb.create("span").addClass("kb-view-head-resizer").on("mousedown,touchstart",
function(v){return r(v,u.code)}))}(kb.create("th"))),u.noLabel=!e}})(g.fields[t],0!=d.fields.length?!d.fields.includes(t):!1)});l.elm("tbody tr").append(function(t){n.concat(Object.keys(g.fields).filter(function(k){return!n.includes(k)})).each(function(k,u){var h=g.fields[k],w=0!=d.fields.length?!d.fields.includes(k):!1;switch(h.type){case "SUBTABLE":t.append(kb.create("div").addClass("kb-view-row-cell"+(w?" kb-unuse":"")).append(kb.table.create(h,!0,!0,e,!0)));break;default:t.append(kb.field.create(h,
!0).addClass("kb-view-row-cell"+(w?" kb-unuse":"")))}});return t.append(kb.create("input").attr("type","hidden").attr("data-type","id"))}(kb.create("td").addClass("kb-scope").attr("form-id","form_"+g.id).attr("colspan",m.toString())))})(0!=d.fields.length?d.fields:Object.keys(g.fields));"viewer"==d.mode?(l.elms(".kb-field").each(function(n,t){return n.addClass("kb-readonly")}),l.elms(".kb-table-button").each(function(n,t){return n.addClass("kb-readonly")})):g.disables.each(function(n,t){l.elm('[field-id="'+
CSS.escape(n.code)+'"]')&&l.elm('[field-id="'+CSS.escape(n.code)+'"]').addClass("kb-readonly")});return l.spread(function(n,t){n.elm("[form-id=form_"+g.id+"]").on("change",function(k){n.addClass("kb-unsaved")});n.elm(".kb-view-row-add").on("click",function(k){(function(u){kb.event.call("kb.view.add",{container:u.elm("[form-id=form_"+g.id+"]"),record:kb.record.get(u.elm("[form-id=form_"+g.id+"]"),g,!0).record,viewId:f}).then(function(h){h.error?l.delRow(u):kb.event.call("kb.action.call",{container:u.elm("[form-id=form_"+
g.id+"]"),record:h.record,mobile:e,pattern:"create",workplace:"view"}).then(function(w){kb.event.call("kb.style.call",{container:u.elm("[form-id=form_"+g.id+"]"),record:w.record,mobile:w.mobile,pattern:w.pattern,workplace:w.workplace}).then(function(q){kb.record.set(u.elm("[form-id=form_"+g.id+"]").attr("unsaved","unsaved"),g,q.record).then(function(){kb.event.call("kb.view.add.complete",{container:u.elm("[form-id=form_"+g.id+"]"),viewId:f})});(function(v){u.elm("[form-id=form_"+g.id+"]").dispatchEvent(v)})(new Event("change"))})["catch"](function(){})})["catch"](function(){})})})(l.insertRow(n))});
n.elm(".kb-view-row-del").on("click",function(k){(function(u){u?kb.confirm(kb.constants.common.message.confirm["delete"][kb.operator.language],function(){kb.event.call("kb.view.delete",{container:n.elm("[form-id=form_"+g.id+"]"),record:kb.record.get(n.elm("[form-id=form_"+g.id+"]"),g,!0).record,viewId:f}).then(function(h){h.error||kb.view.records["delete"](g.id,[u]).then(function(w){return l.delRow(n)})["catch"](function(w){return kb.alert(kb.error.parse(w))})})}):l.delRow(n)})(n.elm("[data-type=id]").val())});
n.elm(".kb-view-row-copy").on("click",function(k){kb.confirm(kb.constants.common.message.confirm.copy[kb.operator.language],function(){(function(u,h){var w=Object.values(kb.field.parallelize(g.fields)).reduce(function(q,v){"FILE"==v.type&&(v.tableCode?u[v.tableCode].value.each(function(x,y){Array.prototype.push.apply(q,x.value[v.code].value)}):Array.prototype.push.apply(q,u[v.code].value));return q},[]);kb.file.clone(w).then(function(){kb.event.call("kb.view.copy",{container:h.elm("[form-id=form_"+
g.id+"]"),record:function(q){q.$id.value="";return q}(u),viewId:f}).then(function(q){q.error?l.delRow(h):kb.event.call("kb.action.call",{container:h.elm("[form-id=form_"+g.id+"]"),record:q.record,mobile:e,pattern:"reuse",workplace:"view"}).then(function(v){kb.event.call("kb.style.call",{container:h.elm("[form-id=form_"+g.id+"]"),record:v.record,mobile:v.mobile,pattern:"create",workplace:v.workplace}).then(function(x){kb.record.set(h.elm("[form-id=form_"+g.id+"]").attr("unsaved","unsaved"),g,x.record).then(function(){h.elms(".kb-table").each(function(y,
z){y.tr.each(function(A,B){A.hasAttribute("row-id")&&A.removeAttr("row-id")})});kb.event.call("kb.view.copy.complete",{container:h.elm("[form-id=form_"+g.id+"]"),viewId:f})});(function(y){h.elm("[form-id=form_"+g.id+"]").dispatchEvent(y)})(new Event("change"))})["catch"](function(){})})["catch"](function(){})})})})(kb.record.get(n.elm("[form-id=form_"+g.id+"]"),g,!0).record,l.insertRow(n))})});n.elms(".kb-field").each(function(k,u){k.closest(".kb-scope").hasAttribute("form-id")&&kb.field.activate(k,
g)});n.elms(".kb-table").each(function(k,u){kb.table.activate(k,g).clearRows();k.addRow()})},function(n,t){},!1)}(kb.create("table").addClass("kb-view").attr("view-id","view_"+a.id+"_"+f),kb.extend({},a),kb.extend({},a).view)).on("show",function(l){l=b.key();e||kb.elm(".kb_spread_style_"+CSS.escape(l))||(localStorage.getItem(l)?(kb.elm("head").append(kb.create("style").addClass("kb_spread_style_"+l).attr("media","screen").attr("type","text/css").text(localStorage.getItem(l))),b.set()):0!=kb.elm("[view-id=view_"+
a.id+"_"+f+"]").elm("tbody").elms("tr").length&&b.set(!0))})};window.KintoneBoosterView.prototype.load=function(c){return new Promise(function(a,f){kintone.api(kintone.api.url("/k/v1/app/views",!0),"GET",{app:c}).then(function(e){(function(b){a({origin:b,calendar:b.filter(function(l){return"CALENDAR"==l.type}),custom:b.filter(function(l){return"CUSTOM"==l.type}),list:b.filter(function(l){return"LIST"==l.type})})})(Object.values(e.views).sort(function(b,l){return b.index-l.index}))})["catch"](function(e){return kb.alert(kb.error.parse(e))})})};
window.kb.attachment||(window.kb.attachment=new KintoneBoosterAttachment);window.kb.record||(window.kb.record=new KintoneBoosterRecord);window.kb.button||(window.kb.button=new KintoneBoosterButton);window.kb.field||(window.kb.field=new KintoneBoosterField);window.kb.table||(window.kb.table=new KintoneBoosterTable);window.kb.view||(window.kb.view=new KintoneBoosterView);
kb.constants=kb.extend({common:{caption:{button:{cancel:{en:"Cancel",ja:"\u30ad\u30e3\u30f3\u30bb\u30eb",zh:"\u53d6\u6d88"},submit:{en:"Submit",ja:"\u4fdd\u5b58",zh:"\u4fdd\u5b58"}},sort:{asc:{en:"asc",ja:"\u6607\u9806",zh:"\u5347\u5e8f"},desc:{en:"desc",ja:"\u964d\u9806",zh:"\u964d\u5e8f"}}},message:{confirm:{changed:{en:"Changes have not been saved.<br>Do you want to leave the page?",ja:"\u5909\u66f4\u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002<br>\u3053\u306e\u307e\u307e\u30da\u30fc\u30b8\u3092\u79fb\u52d5\u3057\u307e\u3059\u304b\uff1f",
zh:"\u66f4\u6539\u5c1a\u672a\u4fdd\u5b58\u3002<br>\u60a8\u662f\u5426\u8981\u79bb\u5f00\u6b64\u9875\u9762\uff1f"},cancel:{en:"The edits you made will be lost. Are you sure?",ja:"\u7de8\u96c6\u3057\u305f\u5185\u5bb9\u304c\u5931\u308f\u308c\u307e\u3059\u304c\u3001\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f",zh:"\u60a8\u7f16\u8f91\u7684\u5185\u5bb9\u5c06\u4f1a\u4e22\u5931\uff0c\u786e\u5b9a\u5417\uff1f"},copy:{en:"Are you sure on copy?",ja:"\u30b3\u30d4\u30fc\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f",
zh:"\u6211\u53ef\u4ee5\u590d\u5236\u5417\uff1f"},"delete":{en:"Are you sure on delete?",ja:"\u524a\u9664\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f",zh:"\u6211\u53ef\u4ee5\u5220\u9664\u5417\uff1f"},save:{en:"Are you sure on copy?",ja:"\u4fdd\u5b58\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f",zh:"\u6211\u53ef\u4ee5\u4fdd\u5b58\u5417\uff1f"},submit:{en:"Are you sure on submit?",ja:"\u9001\u4fe1\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f",
zh:"\u6211\u53ef\u4ee5\u53d1\u9001\u5417\uff1f"}},invalid:{record:{en:"There is an error in the input data.",ja:"\u5165\u529b\u5185\u5bb9\u306b\u8aa4\u308a\u304c\u3042\u308a\u307e\u3059\u3002",zh:"\u8f93\u5165\u5185\u5bb9\u6709\u8bef\u3002"},submit:{en:"No data to submit was found.",ja:"\u7de8\u96c6\u4e2d\u306e\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093\u3002",zh:"\u6b63\u5728\u7f16\u8f91\u7684\u6570\u636e\u4e0d\u5b58\u5728\u3002"}}}},picker:{caption:{name:{en:"Name",ja:"\u8868\u793a\u540d",
zh:"\u663e\u793a\u540d\u79f0"},recordnumber:{en:"Record number",ja:"\u30ec\u30b3\u30fc\u30c9\u756a\u53f7",zh:"\u8bb0\u5f55\u53f7"}}}},kb.constants);