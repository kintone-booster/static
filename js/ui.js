/*
* FileName "ui.js"
* Version: 1.0.0
* Copyright (c) 2023 Pandafirm LLC
* Distributed under the terms of the GNU Lesser General Public License.
* https://opensource.org/licenses/LGPL-2.1
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(d){var a=0;return function(){return a<d.length?{done:!1,value:d[a++]}:{done:!0}}};$jscomp.arrayIterator=function(d){return{next:$jscomp.arrayIteratorImpl(d)}};$jscomp.makeIterator=function(d){var a="undefined"!=typeof Symbol&&Symbol.iterator&&d[Symbol.iterator];if(a)return a.call(d);if("number"==typeof d.length)return $jscomp.arrayIterator(d);throw Error(String(d)+" is not an iterable or ArrayLike");};
$jscomp.arrayFromIterator=function(d){for(var a,f=[];!(a=d.next()).done;)f.push(a.value);return f};$jscomp.arrayFromIterable=function(d){return d instanceof Array?d:$jscomp.arrayFromIterator($jscomp.makeIterator(d))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(d){var a=function(){};a.prototype=d;return new a};$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,a,f){if(d==Array.prototype||d==Object.prototype)return d;d[a]=f.value;return d};
$jscomp.getGlobal=function(d){d=["object"==typeof globalThis&&globalThis,d,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var a=0;a<d.length;++a){var f=d[a];if(f&&f.Math==Math)return f}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(d,a,f){if(!f||null!=d){f=$jscomp.propertyToPolyfillSymbol[a];if(null==f)return d[a];f=d[f];return void 0!==f?f:d[a]}};$jscomp.polyfill=function(d,a,f,c){a&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(d,a,f,c):$jscomp.polyfillUnisolated(d,a,f,c))};
$jscomp.polyfillUnisolated=function(d,a,f,c){f=$jscomp.global;d=d.split(".");for(c=0;c<d.length-1;c++){var e=d[c];if(!(e in f))return;f=f[e]}d=d[d.length-1];c=f[d];a=a(c);a!=c&&null!=a&&$jscomp.defineProperty(f,d,{configurable:!0,writable:!0,value:a})};
$jscomp.polyfillIsolated=function(d,a,f,c){var e=d.split(".");d=1===e.length;c=e[0];c=!d&&c in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var p=0;p<e.length-1;p++){var b=e[p];if(!(b in c))return;c=c[b]}e=e[e.length-1];f=$jscomp.IS_SYMBOL_NATIVE&&"es6"===f?c[e]:null;a=a(f);null!=a&&(d?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:a}):a!==f&&(void 0===$jscomp.propertyToPolyfillSymbol[e]&&(f=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+f+"$"+e),$jscomp.defineProperty(c,$jscomp.propertyToPolyfillSymbol[e],{configurable:!0,writable:!0,value:a})))};
$jscomp.getConstructImplementation=function(){function d(){function f(){}new f;Reflect.construct(f,[],function(){});return new f instanceof f}if($jscomp.TRUST_ES6_POLYFILLS&&"undefined"!=typeof Reflect&&Reflect.construct){if(d())return Reflect.construct;var a=Reflect.construct;return function(f,c,e){f=a(f,c);e&&Reflect.setPrototypeOf(f,e.prototype);return f}}return function(f,c,e){void 0===e&&(e=f);e=$jscomp.objectCreate(e.prototype||Object.prototype);return Function.prototype.apply.call(f,e,c)||
e}};$jscomp.construct={valueOf:$jscomp.getConstructImplementation}.valueOf();$jscomp.underscoreProtoCanBeSet=function(){var d={a:!0},a={};try{return a.__proto__=d,a.a}catch(f){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(d,a){d.__proto__=a;if(d.__proto__!==a)throw new TypeError(d+" is not extensible");return d}:null;
$jscomp.inherits=function(d,a){d.prototype=$jscomp.objectCreate(a.prototype);d.prototype.constructor=d;if($jscomp.setPrototypeOf){var f=$jscomp.setPrototypeOf;f(d,a)}else for(f in a)if("prototype"!=f)if(Object.defineProperties){var c=Object.getOwnPropertyDescriptor(a,f);c&&Object.defineProperty(d,f,c)}else d[f]=a[f];d.superClass_=a.prototype};
window.KintoneBoosterRecord=function(){this.page={add:function(d,a){return kintone.api.url("/k/",!0).replace(/\.json/g,"")+(d?"m/"+a:a)+"/edit"},detail:function(d,a,f){return kintone.api.url("/k/",!0).replace(/\.json/g,"")+(d?"m/"+a:a)+"/show"+(d?"?":"#")+"record="+f},edit:function(d,a,f){return kintone.api.url("/k/",!0).replace(/\.json/g,"")+(d?"m/"+a:a)+"/show"+(d?"?":"#")+"record="+f+(d?"#":"&")+"mode=edit"}}};
window.KintoneBoosterRecord.prototype.create=function(d,a){var f=this;a=void 0===a?!0:a;var c={},e;for(e in d.fields)(function(p){switch(p.type){case "CHECK_BOX":case "CONDITION":case "FILE":case "GROUP_SELECT":case "MULTI_SELECT":case "ORGANIZATION_SELECT":case "USER_SELECT":c[e]={type:p.type,value:[]};break;case "RADIO_BUTTON":(function(b){c[e]={type:p.type,value:0!=b.length?b.reduce(function(g,m){g[m.index]=m;return g},Array(b.length).fill("")).first().label:""}})(Object.values(p.options));break;
case "SUBTABLE":c[e]={type:p.type,value:[{value:f.create(p,!1)}]};break;default:kb.field.reserved.includes(p.type)||(c[e]={type:p.type,value:""})}})(d.fields[e]);a&&(c.$id={type:"__ID__",value:""});return c};
window.KintoneBoosterRecord.prototype.get=function(d,a,f){var c=this,e={error:!1,record:{}};if(!f)for(var p in a.fields)if(function(b,g){if(b)switch("SUBTABLE"!=g.type&&(b=b.elm(".kb-field-value")),g.type){case "CHECK_BOX":case "MULTI_SELECT":g.required&&!b.elms("input").some(function(m){return m.checked})&&(b.alert(kb.constants.common.message.invalid.required[kb.operator.language]),e.error=!0);break;case "FILE":case "GROUP_SELECT":case "ORGANIZATION_SELECT":case "USER_SELECT":g.required&&function(m){0==
m.length&&(b.alert(kb.constants.common.message.invalid.required[kb.operator.language]),e.error=!0)}(b.elm("input").val()?JSON.parse(b.elm("input").val()):[]);break;case "SUBTABLE":break;default:b.elms("input,select,textarea").each(function(m,n){m.checkValidity()||(e.error=!0)})}}(d.elm('[field-id="'+CSS.escape(p)+'"]'),a.fields[p]),e.error)break;if(e.error)kb.alert(kb.constants.common.message.invalid.record[kb.operator.language]);else{for(p in a.fields)(function(b,g){if(b)switch("SUBTABLE"!=g.type&&
(b=b.elm(".kb-field-value")),g.type){case "CALC":e.record[g.code]={type:g.type,value:null};break;case "CHECK_BOX":case "MULTI_SELECT":e.record[g.code]={type:g.type,value:function(){var m=[];b.elms("input").each(function(n,t){n.checked&&!n.parentNode.hasClass("kb-hidden")&&m.push(n.val())});return m}()};break;case "CREATED_TIME":case "UPDATED_TIME":e.record[g.code]={type:g.type,value:b.elm("input").val()?b.elm("input").val():(new Date(value.value)).format("ISO")};break;case "CREATOR":case "MODIFIER":e.record[g.code]=
{type:g.type,value:b.elm("input").val()?JSON.parse(b.elm("input").val()):{code:kb.operator.code,name:kb.operator.name}};break;case "DATETIME":e.record[g.code]={type:g.type,value:function(){var m="";b.elm("input").val()&&(b.elm(".kb-hour").elm("select").val()||b.elm(".kb-hour").elm("select").val("00"),b.elm(".kb-minute").elm("select").val()||b.elm(".kb-minute").elm("select").val("00"));b.elm("input").val()&&b.elm(".kb-hour").elm("select").val()&&b.elm(".kb-minute").elm("select").val()&&(m=(b.elm("input").val()+
" "+b.elm(".kb-hour").elm("select").val()+":"+b.elm(".kb-minute").elm("select").val()+":00").parseDateTime().format("ISO"));return m}()};break;case "DROP_DOWN":e.record[g.code]={type:g.type,value:b.elm("select").val()};break;case "FILE":case "GROUP_SELECT":case "ORGANIZATION_SELECT":case "USER_SELECT":e.record[g.code]={type:g.type,value:b.elm("input").val()?JSON.parse(b.elm("input").val()):[]};break;case "NUMBER":e.record[g.code]={type:g.type,value:kb.isNumeric(b.elm("input").val())?parseFloat(b.elm("input").val()):
b.elm("input").val()};break;case "RADIO_BUTTON":e.record[g.code]={type:g.type,value:function(){var m="";b.elms("[data-name="+g.code+"]").each(function(n,t){n.checked&&!n.parentNode.hasClass("kb-hidden")&&(m=n.val())});return m}()};break;case "MULTI_LINE_TEXT":case "RICH_TEXT":e.record[g.code]={type:g.type,value:b.elm("textarea").val()};break;case "SUBTABLE":e.record[g.code]={type:g.type,value:function(){var m=[];b.tr.each(function(n,t){var h=c.get(n,g,f);if(h.error)return e.error=h.error,PD_BREAK;
m.push({value:h.record})});return m}()};break;case "TIME":e.record[g.code]={type:g.type,value:function(){var m="";b.elm(".kb-hour").elm("select").val()&&(b.elm(".kb-minute").elm("select").val()||b.elm(".kb-minute").elm("select").val("00"));b.elm(".kb-minute").elm("select").val()&&(b.elm(".kb-hour").elm("select").val()||b.elm(".kb-hour").elm("select").val("00"));b.elm(".kb-hour").elm("select").val()&&b.elm(".kb-minute").elm("select").val()&&(m=b.elm(".kb-hour").elm("select").val()+":"+b.elm(".kb-minute").elm("select").val());
return m}()};break;default:kb.field.reserved.includes(g.type)||(e.record[g.code]={type:g.type,value:b.elm("input").val()})}})(d.elm('[field-id="'+CSS.escape(p)+'"]'),a.fields[p]);d.elm("[data-type=id]")&&(e.record.$id={value:d.elm("[data-type=id]").val()?parseInt(d.elm("[data-type=id]").val()):d.elm("[data-type=id]").val()})}return e};
window.KintoneBoosterRecord.prototype.set=function(d,a,f){var c=this;return new Promise(function(e,p){var b=function(g,m,n,t){var h=[],r;for(r in n)(function(k,q,l){if(k){"disabled"in l&&(l.disabled?k.addClass("kb-disabled"):k.removeClass("kb-disabled"));"hidden"in l&&(l.hidden?k.addClass("kb-hidden"):k.removeClass("kb-hidden"));if("SUBTABLE"!=q.type)switch(k=k.elm(".kb-field-value"),"backcolor"in l&&(l.backcolor?k.addClass("kb-force-backcolor").elm(".kb-guide").css({backgroundColor:l.backcolor}):
k.removeClass("kb-force-backcolor").elm(".kb-guide").css({backgroundColor:""})),"forecolor"in l&&(l.forecolor?k.addClass("kb-force-forecolor").elm(".kb-guide").css({color:l.forecolor}):k.removeClass("kb-force-forecolor").elm(".kb-guide").css({color:""})),q.type){case "CALC":case "CATEGORY":case "CHECK_BOX":case "CONDITION":case "CREATED_TIME":case "CREATOR":case "FILE":case "GROUP_SELECT":case "MODIFIER":case "MULTI_SELECT":case "ORGANIZATION_SELECT":case "RADIO_BUTTON":case "RECORD_NUMBER":case "REFERENCE_TABLE":case "SPACER":case "STATUS":case "STATUS_ASSIGNEE":case "UPDATED_TIME":case "USER_SELECT":"backcolor"in
l&&k.css({backgroundColor:l.backcolor?l.backcolor:""});"forecolor"in l&&k.css({color:l.forecolor?l.forecolor:""});break;default:k.elms("input,select,textarea").each(function(v,w){"backcolor"in l&&v.css({backgroundColor:l.backcolor?l.backcolor:""});"forecolor"in l&&v.css({color:l.forecolor?l.forecolor:""})})}switch(q.type){case "CALC":case "RECORD_NUMBER":case "STATUS":k.elm(".kb-guide").html(l.value);break;case "CATEGORY":k.elm(".kb-guide").html(l.value.join("<br>"));break;case "CHECK_BOX":case "MULTI_SELECT":k.elms("input").each(function(v,
w){v.checked=l.value.includes(v.val())});k.elm(".kb-guide").html(l.value.join("<br>"));break;case "COLOR":k.css({backgroundColor:l.value?l.value:"transparent"}).elm("input").val(l.value);k.elm(".kb-guide").html(l.value);break;case "CONDITION":k.elm(".kb-guide").empty();l.value?(k.elm("input").val(l.value),l.value.split(" and ").each(function(v,w){return k.guide(v)})):k.elm("input").val("");break;case "CREATOR":case "MODIFIER":k.elm("input").val(JSON.stringify(l.value));k.elm(".kb-guide").html(l.value.name);
break;case "CREATED_TIME":case "UPDATED_TIME":l.value?(k.elm("input").val(l.value),k.elm(".kb-guide").html((new Date(l.value)).format("Y-m-d H:i"))):(k.elm("input").val(""),k.elm(".kb-guide").html(""));break;case "DATETIME":if(l.value){var u=l.value.parseDateTime();k.elm("input").val(u.format("Y-m-d"));k.elm(".kb-hour").elm("select").val(u.format("H"));k.elm(".kb-minute").elm("select").val(u.format("i"));k.elm(".kb-guide").html(u.format("Y-m-d H:i"))}else k.elm("input").val(""),k.elm(".kb-hour").elm("select").val(""),
k.elm(".kb-minute").elm("select").val(""),k.elm(".kb-guide").html("");break;case "DROP_DOWN":k.elm("select").val(l.value);k.elm(".kb-guide").html(k.elm("select").selectedText());break;case "FILE":case "GROUP_SELECT":case "ORGANIZATION_SELECT":case "USER_SELECT":k.elm(".kb-guide").empty();l.value?(k.elm("input").val(JSON.stringify(l.value)),l.value.each(function(v,w){return k.guide(v)})):k.elm("input").val("[]");break;case "LINK":k.elm("input").val(l.value);switch(q.protocol){case "MAIL":k.elm(".kb-guide").empty().append(kb.create("a").attr("href",
"mailto:"+l.value).html(l.value));break;case "CALL":k.elm(".kb-guide").empty().append(kb.create("a").attr("href","tel:"+l.value).html(l.value));break;case "WEB":k.elm(".kb-guide").empty().append(kb.create("a").attr("href",l.value).attr("target","_blank").html(l.value))}break;case "MULTI_LINE_TEXT":case "RICH_TEXT":k.elm("textarea").val(l.value);k.elm(".kb-guide").html(l.value.replace(/\n/g,"<br>"));break;case "NUMBER":q.digit?kb.isNumeric(l.value)?(k.elm("input").val(Number(l.value).comma(q.displayScale)),
k.elm(".kb-guide").html(Number(l.value).comma(q.displayScale))):(k.elm("input").val(l.value),k.elm(".kb-guide").html(l.value)):q.displayScale?kb.isNumeric(l.value)?(k.elm("input").val(Number(l.value).toFloor(parseInt(q.displayScale))),k.elm(".kb-guide").html(Number(l.value).toFloor(parseInt(q.displayScale)))):(k.elm("input").val(l.value),k.elm(".kb-guide").html(l.value)):(k.elm("input").val(l.value),k.elm(".kb-guide").html(l.value));q.unit&&("prefix"==q.unitPosition?k.elm(".kb-guide").html(q.unit+
" "+k.elm(".kb-guide").text()):k.elm(".kb-guide").html(k.elm(".kb-guide").text()+" "+q.unit));break;case "RADIO_BUTTON":k.elms("[data-name="+r+"]").each(function(v,w){v.checked=l.value==v.val()});k.elm(".kb-guide").html(l.value);break;case "SPACER":break;case "STATUS_ASSIGNEE":k.elm(".kb-guide").empty();l.value&&l.value.each(function(v,w){k.elm(".kb-guide").append(kb.create("span").addClass("kb-guide-item").append(kb.create("span").addClass("kb-guide-item-label").html(v.name)))});break;case "SUBTABLE":if(0==
l.value.length)k.clearRows();else{k.tr.each(function(v,w){l.value.length>w&&b(v,q,function(x){if(l.disabled)for(var z in x)x[z].disabled=!0;return x}(l.value.map(function(x){return x.value})[w]),function(x){return h=h.concat(x)})});for(u=k.tr.length;u<l.value.length;u++)b(k.addRow(),q,function(v){if(l.disabled)for(var w in v)v[w].disabled=!0;return v}(l.value.map(function(v){return v.value})[u]),function(v){return h=h.concat(v)});k.tr.slice(l.value.length).each(function(v,w){return k.delRow(v)})}0==
k.tr.length&&function(v){l.disabled&&b(v,q,function(w){for(var x in w)w[x].disabled=!0;return w}(c.get(v,q,!0).record),function(w){return h=h.concat(w)})}(k.addRow());break;case "TIME":l.value?(k.elm(".kb-hour").elm("select").val(l.value.split(":")[0]),k.elm(".kb-minute").elm("select").val(l.value.split(":")[1]),k.elm(".kb-guide").html(l.value)):(k.elm(".kb-hour").elm("select").val(""),k.elm(".kb-minute").elm("select").val(""),k.elm(".kb-guide").html(""));break;default:k.elm("input").val(l.value),
k.elm(".kb-guide").html(l.value)}}})(g.elm('[field-id="'+CSS.escape(r)+'"]'),m.fields[r],n[r]);"$id"in n&&g.elm("[data-type=id]")&&g.elm("[data-type=id]").val(n.$id.value);t(h)};b(d,a,f,function(g){d.hasOwnProperty("cleanup")&&d.cleanup();e()})})};
window.KintoneBoosterRecord.prototype.simplify=function(d,a){var f=this,c={},e;for(e in d.fields)(function(p){switch(p.type){case "CATEGORY":case "CHECK_BOX":case "MULTI_SELECT":c[e]={value:e in a?a[e].value.sort():[]};break;case "CALC":case "CREATED_TIME":case "CREATOR":case "FILE":case "MODIFIER":case "RECORD_NUMBER":case "REFERENCE_TABLE":case "SPACER":case "STATUS":case "UPDATED_TIME":break;case "GROUP_SELECT":case "ORGANIZATION_SELECT":case "STATUS_ASSIGNEE":case "USER_SELECT":c[e]={value:e in
a?a[e].value.map(function(b){return b.code}).sort():[]};break;case "NUMBER":c[e]={value:e in a?kb.isNumeric(a[e].value)?a[e].value.toString():"":""};break;case "SUBTABLE":c[e]={value:a[e].value.reduce(function(b,g){b.push({value:f.simplify(p,g.value)});return b},[])};break;default:c[e]={value:e in a?(a[e].value||" ").toString():""}}})(d.fields[e]);return c};
window.KintoneBoosterRecordPicker=function(d,a,f){var c=KintoneBoosterDialog.call(this,999997,!1,!a)||this;c.multiSelect=a;c.prepend=f;c.type=d;c.limit=50;c.offset=0;c.table=null;c.fieldInfo={};c.records=[];c.selection=[];c.img=c.parts.icon.clone().css({top:"0px"});c.prev=c.img.clone().css({right:"4em"}).attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAjZJREFUeNpiYKAJ6J8y8T+MzYIm0QCk6pHFmNA016ObhqKgMCefkfoOBggg6vr9Psz/LLgCBcVb6BI4gxSvQqJMAQggugYDinNYSNVAUDOxHmbCJghNRo2ENDMSG+VASoGq6RMggIY7Agbae6Limdh4ZyGgaT2QCiAphRGbyliwaALZtJ7s5EksYCTF2ehJE6fNUIUbqFIIUFQuYUskAwcAAmgUUTP3F5CUpSi0DD07TqCZxUDLQBXBfVL1sZBpmQCQoiiPsJCRIQWoES3ENAn2AykHaic+Rlr6GF8DgJGWcUx1i4lN1TS1GF8+HpC2FqGSa+QBgAAaRaNgFBBVcJDVm6BCL4uo2ouFShYaAKnzNG/6oFkKstCALm0uarS7mMi0tJ+ujT1i+79UtRhav/ZTKwewUDubULN5S5MRO4KJC9pu+kB3i6GWC4KoAWvQkxL0hFqYJOdjqIET6BLUWCwHBbsg3S2GWv4B6vsLdLUYyQGGQMqQ5omL2IKG6omL3tluFIwCkgFAgPbN6AZAGASi1XQQR3BD3aSrGhLilzZqoQK9iwu8RLnrUfFAEORKbla63NNSRbq21KPZOCQFqJIqC133wAxJt2FU+uZsCHRPF9d+QgFzq7FJlwymgHk/U3pCdgfmgpMm7PL3p5MVIU8bsTQUpbtxcRsxB6xtI9Ka02CaPL7SLdFSLUtrDi2TwJq2ZB5YOni4ApaIlm6Bvx4eQgC/8fVQwE9sLizwnc3hbwMIgobRAdIK28oCHbudAAAAAElFTkSuQmCC").on("click",
function(e){c.offset-=c.limit;c.search()});c.next=c.img.clone().css({right:"2em"}).attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAi1JREFUeNpiYKAa6J8y8T8Q30cXZ0LjK4AU4lMANw3GZkGXLMzJZ2QgpIskABBAVPI/Xr9DA6gBn7/rcUri9DNJACCAaO9lXICRkGZ8HmQkxWZ0g5iIdGEjNhew4NHwAKhBkWaBCxBAwwUBo+o9sWqxRZUAsamMiUDJtJ4szVAQgM8VTMRmFiAOIEszLsBCjCJcOYuQzRvwZUkWUm2jWiIZOAAQQKMIW8QV0MJcRmKyExI3EJjsNgyExchAEeiIBwNhMTIQBDriw0BYDAMfgA4QHAiLkcEBoCMcKSo1aeFjallMchxTYjFFqZpUi6mWjwes5Bp5ACCARtEoGJlNn/+0KESI7RD0U7vRTEpPRADqewN6WwwD54GWnx/Ixh5Z9TBVOn1A8B7osP6BsBgECshplzENVLZjona2JzbbUdtiogdDaGHxB2K69dS2uJDe7WqSBy+o4eMJ5IyYUOpjsksuci2+ALTQkBIXk2OxIdDSC5TGDwuJ2USQWomRidrZZBSMggEHAAHaNaMbAEEYiBLDgo7AJo7gaI7gCI5giMSAn0LLNb0XBuAlhF4LXIQQU3Q/vZfcnsPI2jNPtSZck+e66W/utCjcpPzw/DC4vAjXZPHNk/DbDxT53YvwVz6pvecACNec5aY/vAg3zb5UmUMVFitzFoSHlrklOCMa2OPQI40qLHZpIQmrlKXZwurBI06SnBYtNYUhmgdpYbj2UEIYegAwStjMiIcQQkxxA49895hLUEtfAAAAAElFTkSuQmCC").on("click",
function(e){c.offset+=c.limit;c.search()});c.submit=c.img.clone().css({left:"0"}).attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA7BJREFUeNpiYKAa6J8yMQFK/yfbhP9Qej7RigkpOk+U1QABRLnf92MTZ4LSDkgKHbDpNiDoHZACvIqIChCAAKIIMeLwNtxHhTn5jCTFNHoo4FLPRISZ58mJNQdCwctIauIlKRzwAYAAGqKIkUBcNwIDp4GsRAIqFoC4gBiNAaTmEOQUZkBpWfCeXJtB4AFSMRgAYoNSE9Zyg5R0TVbaRteEnK4JZkn0TAA0rIGcwPxP+4KNWAAQQKO5mVCeg2WdA8DYP0Azi6FZTACILwAtMkQSB4ndxyZHjfbNf2LaE1RNsqBMQ4phUMsdSLEDV04+gBSkRJW3pMY5E45iA2RIIxC/x9cQhEbFeiB2pHqqhlYz/TikHUGOhLZXzpNS6TNSIT2A4nY/MQUuVS0mpibD5gCqt4NwOCARaPkCuhSJ0CyZMFo5wABAAI2iUTCwLRBoLVWAVBI10NRioIUK0JYG0UUhxRaj1TiBQEs2oLWu66FcQaDcB1ItZiHUu8bmK2hQw1op78kp85lw+HY9kUGpiFRnU24xEICaMwSDD+iwBzC3UstiEJhIpBlkta+ZqJAlBahtcT2RZhhQ0+IFxDRvkdrSgVSxGJhoEqHM9wRKs/1Q9RuoGdSCSL2E+WiW7oc5Cpbl8A3Jkduufo8jAT0AWqqIRQ1RDTtSuqmw+PwANPgCWm/CgNRWJTUa9Lja03gtp0Y+xpWi5+Nr3lJsMTRFJ5JqOTV8zAANUpyW08xiIiynncV4LBekW0MO1GQiawxwFAwrABCgXau9QRCIoYQJWMENdAJlBCZQJjCOwAZugE4AG+AGygSs4AjapJra8HF3HEcx96J/jCR91uu1r8+/PDw8/k+FUGw+jzhg9gGGT+iSMjJkLoMwzgxVS5v/xKG1Jp9tA+IfIIDOPDYRMZwRRgnozogq77dxysvZvwE2Z7E4wi17h2yMyMacI5Dl1dTZDjWCixjZZKyiiFm9EAmlmjrDOvMDlc5KE9FhQOwArHU3k1MSpqgtx3FzVbRMCW8tDnURq+AyzjCe108wO4uTZ8GOykNSlYYrqWEBJiMy25Dr7SvRiWs8WuQ7OIOpSveERalg9/j5/exJeqcVYeC7gUIUBd3i+Q9R7N5y8v0n/pDl7IRbyB/e733QvxmAwK+cQE+bSmHFVjC7F5RbVRQwirgI82vPrsE6cTFuXxTPc4NHtYiLszcbEofitlG5JUJphCFbuKdLNR77FM3lZdgw48om0MU49juIO1dMPDw8PJziBXvFttyY+HdhAAAAAElFTkSuQmCC").on("click",
function(e){c.offset=0;c.search()});c.input=c.parts.input.clone().css({paddingLeft:"2em",paddingRight:"4em"}).attr("placeholder",kb.constants.common.prompt.keyword[kb.operator.language]).attr("type","text").on("keydown",function(e){if(13==(e.keyCode||e.which))return c.offset=0,c.search(),e.stopPropagation(),e.preventDefault(),!1});c.container.css({height:"calc(34em + 16px)",minWidth:"16em"});c.contents.css({padding:"0px"});c.header.css({boxShadow:"none"}).append(c.input).append(c.next).append(c.prev).append(c.submit);
return c};$jscomp.inherits(window.KintoneBoosterRecordPicker,KintoneBoosterDialog);
window.KintoneBoosterRecordPicker.prototype.search=function(d){var a=this;switch(this.type){case "record":kintone.api(kintone.api.url("/k/v1/records",!0),"GET",{app:this.fieldInfo.app,query:function(){var c=[];a.fieldInfo.query&&c.push(a.fieldInfo.query);a.input.val()&&c.push(function(e){var p=[];e.each(function(b,g){for(var m in a.fieldInfo.picker){var n=a.fieldInfo.picker[m];switch(n.type){case "LINK":case "MULTI_LINE_TEXT":case "RICH_TEXT":case "SINGLE_LINE_TEXT":p.push(n.code+' like "'+b+'"')}}});
return"("+p.join(" or ")+")"}(a.input.val().replace(/[\u3000 ]+/g," ").split(" ").filter(function(e){return e})));return c.join(" and ")+" order by "+(a.fieldInfo.sort?a.fieldInfo.sort:"$id asc")+" limit "+a.limit+" offset "+a.offset}()}).then(function(c){a.records=c.records;a.table.clearRows();a.records.each(function(e,p){(function(b){kb.record.set(b,{fields:a.fieldInfo.picker},e);a.multiSelect&&a.selection.some(function(g){return g.$id.value==e.$id.value})&&b.css({backgroundColor:"rgba(66,165,245,0.5)",
color:""})})(a.table.addRow())});0<a.offset?a.prev.show():a.prev.hide();a.offset+(a.limit==a.records.length?a.limit:a.records.length)<c.total?a.next.show():a.next.hide();d&&d()})["catch"](function(c){return kb.alert(kb.error.parse(c))});break;default:var f=function(){var c=function(){var e=a.prepend?a.prepend.concat(kb.roleSet[a.type]):kb.extend({},kb.roleSet[a.type]);a.input.val()&&function(p){e=e.filter(function(b){var g=!1;b.name.value&&(g=p.some(function(m){return b.name.value.match(new RegExp(m,
"ig"))}));return g})}(a.input.val().replace(/[\u3000 ]+/g," ").split(" ").filter(function(p){return p}));return e}();a.records=c.slice(a.offset,a.offset+a.limit);a.table.clearRows();a.records.each(function(e,p){(function(b){kb.record.set(b,{fields:a.fieldInfo.picker},e);a.multiSelect&&a.selection.some(function(g){return g.code.value==e.code.value})&&b.css({backgroundColor:"rgba(66,165,245,0.5)",color:""})})(a.table.addRow())});0<a.offset?a.prev.show():a.prev.hide();a.offset+(a.limit==a.records.length?
a.limit:a.records.length)<c.length?a.next.show():a.next.hide();d&&d()};0==kb.roleSet.user.length?kb.roleSet.load().then(function(){return f()}):f()}};
window.KintoneBoosterRecordPicker.prototype.show=function(d,a){var f=this,c=this.parts.div.clone().css({borderTop:"1px solid #42a5f5",borderBottom:"1px solid #42a5f5",lineHeight:"2em",padding:"0px 0.5em"}),e=this.parts.td.clone().css({cursor:"pointer",padding:"0",userSelect:"none"}),p=this.parts.th.clone().css({backgroundColor:kb.themeColor().backcolor});this.offset=0;this.fieldInfo=d;this.records=[];this.selection=[];this.input.val("");this.table=this.parts.table.clone().css({marginBottom:"0.5em"}).append(kb.create("thead").append(kb.create("tr"))).append(kb.create("tbody").append(kb.create("tr")));
for(var b in this.fieldInfo.picker)(function(g){f.table.elm("thead tr").append(p.clone().append(c.clone().html("label"in g?g.label:"")));var m=f.table.elm("tbody tr"),n=m.append,t=e.clone(),h=t.append,r=kb.field,k=r.create;g=kb.extend({},g);g.noLabel=!0;n.call(m,h.call(t,k.call(r,g).css({width:"100%"}).addClass("kb-picker kb-readonly")))})(this.fieldInfo.picker[b]);this.contents.empty().append(this.table.spread(function(g,m){g.on("click",function(n){(function(t){f.multiSelect?function(h){h.length==
f.selection.length?(f.selection.push(kb.extend({},t)),g.css({backgroundColor:"rgba(66,165,245,0.5)",color:""})):(f.selection=h,g.css({backgroundColor:"transparent",color:kb.themeColor().forecolor}))}(f.selection.filter(function(h){return"record"==f.type?h.$id.value!=t.$id.value:h.code.value!=t.code.value})):(a&&a(t),f.hide())})(f.records[m])});(function(n){g.addClass("kb-scope").elms(".kb-field").each(function(t,h){return kb.field.activate(t,n)})})({id:"recordPicker",fields:kb.extend({},f.fieldInfo.picker)})}));
this.multiSelect&&(this.handler&&this.ok.off("click",this.handler),this.handler=function(g){a&&a(f.selection);f.hide()},this.ok.on("click",this.handler),this.cancel.on("click",function(g){return f.hide()}));this.search(function(){return KintoneBoosterDialog.prototype.show.call(f)})};window.KintoneBoosterButton=function(){};
window.KintoneBoosterButton.prototype.create=function(d,a,f,c,e,p){(function(b){b&&b.parentNode.removeChild(b)})(kb.elm("#"+f));switch(a){case "detail":(d?kintone.mobile.app.getHeaderSpaceElement():kintone.app.record.getHeaderMenuSpaceElement().css({padding:"0 0.75em 0 1em"})).append(kb.create("button").addClass("kb-action-button "+(d?"kb-action-button-mobile-detail":"kb-action-button-detail")).attr("id",f).html(c).on("click",function(b){kb.confirm(e,function(){return p()})}));break;case "index":(d?
kintone.mobile.app.getHeaderSpaceElement():kintone.app.getHeaderMenuSpaceElement()).append(kb.create("button").addClass("kb-action-button "+(d?"kb-action-button-mobile-index":"kb-action-button-index")).attr("id",f).html(c).on("click",function(b){kb.confirm(e,function(){return p()})}))}};window.KintoneBoosterField=function(){this.cache={};this.reserved="CATEGORY CREATED_TIME CREATOR GROUP HR LABEL MODIFIER RECORD_NUMBER REFERENCE_TABLE SPACER STATUS STATUS_ASSIGNEE UPDATED_TIME __ID__ __REVISION__".split(" ")};
window.KintoneBoosterField.prototype.activate=function(d,a){var f=this,c=kb.field.parallelize(a.fields),e=function(){return kb.create("div").css({zIndex:kb.popups.alert.cover.style.zIndex-4}).append(kb.create("img").attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QkVGNzA3QTE1RTc4MTFFOEI5MDA5RUE2NDFCQTUzNDciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QkVGNzA3QTI1RTc4MTFFOEI5MDA5RUE2NDFCQTUzNDciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCRUY3MDc5RjVFNzgxMUU4QjkwMDlFQTY0MUJBNTM0NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCRUY3MDdBMDVFNzgxMUU4QjkwMDlFQTY0MUJBNTM0NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkBlNTAAAADNSURBVHja7NHBCcJAFATQZNBcYwmSmycPlpI2bCVgAVqAVmAFHmxqncAKQVyz+/N/grADc0iyy0Be6ZwrlgiKhZKH83Ae/v/h1X23l9499vfZk2hYOHpgO7ZkH+xzjl9dsze2Ytfsld3MMXxhm8Hzlj1bD/eu7Zf3rf9mMvx2DaXzZ1SHh66hVP5MrTn86RpK48+qDIdcQ4nyxkRXsTcmuoq9oeAq8oaSa7I3FF2TvKHomuQNZddobxi4RnnDyHXUG0auo94wdP3p/RJgAMw4In5GE/6/AAAAAElFTkSuQmCC")).append(kb.create("span"))},
p=function(b){(function(g,m){d.elm(".kb-field-alert")?d.elm(".kb-field-alert").hide():d.elms("input,select,textarea").each(function(n,t){n.alert&&n.alert.hide()});kb.event.call(b,{container:m,record:kb.record.get(g,a,!0).record}).then(function(n){n.error||kb.event.call("kb.action.call",{record:n.record,mobile:location.href.match(/\/m\//g)?!0:!1,pattern:"change",workplace:g.closest(".kb-view")?"view":"record"}).then(function(t){kb.event.call("kb.style.call",{record:t.record,mobile:t.mobile,pattern:"$id"in
t.record?t.record.$id.value?"edit":"create":"create",workplace:t.workplace}).then(function(h){kb.record.set(g,a,h.record);h=new Event("change");g.attr("unsaved","unsaved").dispatchEvent(h)})["catch"](function(){})})})})(d.closest("[form-id=form_"+a.id+"]"),d.closest(".kb-scope"))};d.attr("field-id")&&function(b,g){if(g.lookup)(function(m){b.elm(".kb-search").on("click",function(n){m(b.elm(".kb-lookup-search").val(),kb.extend({},g))});b.elm(".kb-clear").on("click",function(n){kb.confirm(kb.constants.common.message.confirm["delete"][kb.operator.language],
function(){b.lookup("").then(function(){return p("kb.change."+g.code)})})});b.elm("input").on("change",function(n){m(n.currentTarget.val(),kb.extend({},g))})})(function(m,n){f.load(n.lookup.relatedApp.app).then(function(t){(function(h){var r=function(){n.picker=function(k){var q={};k.each(function(l,u){l in h.external&&(q[l]=kb.extend({},h.external[l]))});0==Object.keys(q).length&&(q.$id={code:"$id",type:"RECORD_NUMBER",label:kb.constants.picker.caption.recordnumber[kb.operator.language],required:!1,
noLabel:!1});return q}(n.lookup.lookupPickerFields);b.recordPicker.show({app:n.lookup.relatedApp.app,query:n.query,sort:n.lookup.sort||"$id asc",picker:n.picker},function(k){return b.lookup(k.$id.value).then(function(){return p("kb.change."+n.code)})})};m?(n.query=[n.lookup.filterCond,n.lookup.relatedKeyField+("NUMBER"==n.type?"=":" like ")+'"'+m+'"'].filter(function(k){return k}).join(" and "),kintone.api(kintone.api.url("/k/v1/records",!0),"GET",{app:n.lookup.relatedApp.app,query:n.query}).then(function(k){1==
k.records.length?b.lookup(k.records.first().$id.value).then(function(){return p("kb.change."+n.code)}):r()})["catch"](function(k){return kb.alert(kb.error.parse(k))})):(n.query=n.lookup.filterCond,r())})({external:t.parallelize,internal:c})})}),b.recordPicker=new KintoneBoosterRecordPicker("record"),b.lookup=function(m){return new Promise(function(n,t){(function(h){var r=function(){kb.record.set(h,g.tableCode?a.fields[g.tableCode]:a,function(){return g.lookup.fieldMappings.reduce(function(k,q){if(q.field in
c)switch(c[q.field].type){case "CHECK_BOX":case "FILE":case "GROUP_SELECT":case "MULTI_SELECT":case "ORGANIZATION_SELECT":case "USER_SELECT":k[q.field]={value:[]};break;default:k[q.field]={value:""}}return k},function(k){k[g.code]={value:""};return k}({}))}(),!1).then(function(){return n()})};m?kintone.api(kintone.api.url("/k/v1/record",!0),"GET",{app:g.lookup.relatedApp.app,id:m}).then(function(k){k.record?kb.record.set(h,g.tableCode?a.fields[g.tableCode]:a,function(){return g.lookup.fieldMappings.reduce(function(q,
l){l.relatedField in k.record&&l.field in c&&(q[l.field]={value:k.record[l.relatedField].value});return q},function(q){q[g.code]={value:k.record[g.lookup.relatedKeyField].value};return q}({}))}(),!1).then(function(){return n()}):r()})["catch"](function(k){return kb.alert(kb.error.parse(k))}):r()})(b.closest(".kb-scope"))})};else switch(g.type){case "CHECK_BOX":case "MULTI_SELECT":g.required&&(b.alert=function(m){b.elm(".kb-field-alert")||b.append(e().addClass("kb-field-alert"));b.elm(".kb-field-alert").elm("span").html(m).parentNode.show()});
break;case "COLOR":b.elm(".kb-search").on("click",function(m){kb.pickupColor(function(n){b.css({backgroundColor:n}).elm("input").val(n);p("kb.change."+g.code)})});b.elm("input").on("change",function(m){m.currentTarget.val()?(m=m.currentTarget.val().replace(/#/g,""),m.match(/([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/g)&&(b.css({backgroundColor:"#"+m}).elm("input").val("#"+m),p("kb.change."+g.code))):(b.css({backgroundColor:"transparent"}),p("kb.change."+g.code))});break;case "CONDITION":b.elm(".kb-search").on("click",
function(m){kb.filter.build(g.app,b.elm("input").val(),function(n){b.elm("input").val(n);p("kb.change."+g.code)})});b.reset=function(m){g.app=m;b.elm("input").val("");b.elm(".kb-guide").empty()};b.guide=function(m){b.elm(".kb-guide").append(function(n){n.append(kb.create("button").addClass("kb-icon kb-icon-del kb-guide-item-icon").on("click",function(t){kb.confirm(kb.constants.common.message.confirm["delete"][kb.operator.language],function(){b.elm("input").val(b.elm("input").val().split(" and ").filter(function(h){return h!=
m}).join(" and "));p("kb.change."+g.code)})})).append(kb.create("span").addClass("kb-guide-item-label").html(m));return n}(kb.create("span").addClass("kb-guide-item")))};g.required&&(b.alert=function(m){b.elm(".kb-field-alert")||b.append(e().addClass("kb-field-alert"));b.elm(".kb-field-alert").elm("span").html(m).parentNode.show()});break;case "DATE":b.elm(".kb-search").on("click",function(m){kb.pickupDate(b.elm("input").val(),function(n){b.elm("input").val(n);p("kb.change."+g.code)})});break;case "DATETIME":b.elm(".kb-search").on("click",
function(m){kb.pickupDate(b.elm("input").val(),function(n){b.elm("input").val(n);p("kb.change."+g.code)})});break;case "FILE":b.elm(".kb-search").on("click",function(m){(function(n){kb.elm("body").append(n.on("change",function(t){t.currentTarget.files?function(h){kb.file.upload(Array.from(t.currentTarget.files).first()).then(function(r){b.elm("input").val(JSON.stringify((b.elm("input").val()?JSON.parse(b.elm("input").val()):[]).concat(r)));p("kb.change."+g.code)})["catch"](function(r){return kb.alert(kb.error.parse(r))})["finally"](function(){return document.body.removeChild(n)})}(Array.from(t.currentTarget.files).first()):
document.body.removeChild(n)}));n.click()})(kb.create("input").attr("type","file").css({display:"none"}))});b.guide=function(m){b.elm(".kb-guide").append(function(n){n.append(kb.create("button").addClass("kb-icon kb-icon-del kb-guide-item-icon").on("click",function(t){kb.confirm(kb.constants.common.message.confirm["delete"][kb.operator.language],function(){b.elm("input").val(JSON.stringify(JSON.parse(b.elm("input").val()).filter(function(h){return h.fileKey!=m.fileKey})));p("kb.change."+g.code)})})).append(kb.create("span").addClass("kb-guide-item-label").html(m.name).on("click",
function(t){return b.open(m)}));return n}(kb.create("span").addClass("kb-guide-item")))};b.open=function(m){kb.file.download(m).then(function(n){try{var t=function(){var h=kb.create("a").css({display:"none"}).attr("href",f.objectUrl(n,m.contentType)).attr("target","_blank").attr("download",m.name);kb.elm("body").append(h);h.click();document.body.removeChild(h)};switch(m.contentType){case "application/javascript":fetch(new Request(f.objectUrl(n,m.contentType))).then(function(h){return h.text()}).then(function(h){var r=
h.split("\n");kb.create("div").append(function(k){r.each(function(q,l){return k.append(kb.create("code").css({display:"block"}).text(q))});return k}(kb.create("pre"))).popup("full","full",[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1FJREFUeNpiYKA66J8y8T8ynwmfJE6dQHYAjM9CtAlIihJIcjRAANHD71hdDxIA+RVdAbKf1wMFqeRXgACiqdcbQBiXPBMB/fVQTLxmoG3riRHDlXwWgIjCnHxGJOkPMHmYOCMx0QwDaIZRBgACaDgiYMDtxydPKJE4UKIZL8AVzwZA6jySkCEwji8QtBmoUQBIgbAhTCOIDxXHX4DgSl3Y5CjyMwspaRuvn6EJfwEOtQtIyhiEEsnAAYAAGkV0A4wUFDH/KSmPmYaEj4nJpcT6niQfQw01xCFtSEqQMxLwYT+QKsDmI6RyGV4eYwmRCUC5QpIsRjJEEaj5ARmJTwFI3ccV/CxEmHEfS2svEWjYArQG33yKi3ooCAQ1MXHIzQdaRqxFjtRI1aDgA5X+ClikQdHhSE60jAKaAoAAGkWjYBSgtF8pacOyUGC3AyUOH7Cmz8izmJGUxEREvB4AVouOtGhlvod2Y7GBD0BLBWnWoMdhOUmWEh3HoDYVrKkDteADNktBaogdcGMksZnTCLSkAcnnDEiWgsTriW0KMRKZkEDd8kQiQwcUMgmEEhwLgVKJ5LiDOjARKS04kFNkCkAb9h+gwXaBgG8NoNEjQK2yGmTQeWjD/gCozQ10xAekkaL1pJbduCz+gMfVIAve4x1LxjSLuOwEjdcNVCgZN+BKI4xEpFKi4w3JhwTTA6lFJqjL2o8rQQMtm0CPFgjesfhRMAoGDAAEaNdqbxCEgWhjGKAjMAKbyAg6ATM4gWECGQE2cBRGcAS5eI1VGvt110C8F/hDSNvX69217yqPQCAQbBnF69iuikbJevrh3ywshIUwrf82Md93E7QSjpXJR81NRelE4ixEi6alQOKsRMkI4+XCo/rU7wxAiBo9xFdEsU1X0XhY3sluk5VwhHo2q5c+dTHKm8Pi3fL2LotiP6DAAvHa09ddWQofNWHXvQ8YMMh6Y2iniStJ4wTARDWpuzWKtNTgkm6ZQ4FxnawUVhEOpv26kDFblp8jLFlblqypZ61itAgMFtTVqyVkP9C3J/UWwM3q0KoAYglDUeOW0Z/GaH4i5nEO/THneh7r0vNkgGhXYdt4YBWRKoiNmHeHPe60uh++any7595pCQQCgWDLeALGLWqyLWBxZQAAAABJRU5ErkJggg==",
handler:t}]).show()});break;case "application/json":fetch(new Request(f.objectUrl(n,m.contentType))).then(function(h){return h.text()}).then(function(h){kb.create("div").html(h.replace(/\n/g,"<br>")).popup("full","full",[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1FJREFUeNpiYKA66J8y8T8ynwmfJE6dQHYAjM9CtAlIihJIcjRAANHD71hdDxIA+RVdAbKf1wMFqeRXgACiqdcbQBiXPBMB/fVQTLxmoG3riRHDlXwWgIjCnHxGJOkPMHmYOCMx0QwDaIZRBgACaDgiYMDtxydPKJE4UKIZL8AVzwZA6jySkCEwji8QtBmoUQBIgbAhTCOIDxXHX4DgSl3Y5CjyMwspaRuvn6EJfwEOtQtIyhiEEsnAAYAAGkV0A4wUFDH/KSmPmYaEj4nJpcT6niQfQw01xCFtSEqQMxLwYT+QKsDmI6RyGV4eYwmRCUC5QpIsRjJEEaj5ARmJTwFI3ccV/CxEmHEfS2svEWjYArQG33yKi3ooCAQ1MXHIzQdaRqxFjtRI1aDgA5X+ClikQdHhSE60jAKaAoAAGkWjYBSgtF8pacOyUGC3AyUOH7Cmz8izmJGUxEREvB4AVouOtGhlvod2Y7GBD0BLBWnWoMdhOUmWEh3HoDYVrKkDteADNktBaogdcGMksZnTCLSkAcnnDEiWgsTriW0KMRKZkEDd8kQiQwcUMgmEEhwLgVKJ5LiDOjARKS04kFNkCkAb9h+gwXaBgG8NoNEjQK2yGmTQeWjD/gCozQ10xAekkaL1pJbduCz+gMfVIAve4x1LxjSLuOwEjdcNVCgZN+BKI4xEpFKi4w3JhwTTA6lFJqjL2o8rQQMtm0CPFgjesfhRMAoGDAAEaNdqbxCEgWhjGKAjMAKbyAg6ATM4gWECGQE2cBRGcAS5eI1VGvt110C8F/hDSNvX69217yqPQCAQbBnF69iuikbJevrh3ywshIUwrf82Md93E7QSjpXJR81NRelE4ixEi6alQOKsRMkI4+XCo/rU7wxAiBo9xFdEsU1X0XhY3sluk5VwhHo2q5c+dTHKm8Pi3fL2LotiP6DAAvHa09ddWQofNWHXvQ8YMMh6Y2iniStJ4wTARDWpuzWKtNTgkm6ZQ4FxnawUVhEOpv26kDFblp8jLFlblqypZ61itAgMFtTVqyVkP9C3J/UWwM3q0KoAYglDUeOW0Z/GaH4i5nEO/THneh7r0vNkgGhXYdt4YBWRKoiNmHeHPe60uh++any7595pCQQCgWDLeALGLWqyLWBxZQAAAABJRU5ErkJggg==",
handler:t}]).show()});break;case "application/pdf":kb.create("iframe").css({border:"none",height:"100%",outline:"none",width:"100%"}).attr("src",f.objectUrl(n,m.contentType)).popup("full","full",[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1FJREFUeNpiYKA66J8y8T8ynwmfJE6dQHYAjM9CtAlIihJIcjRAANHD71hdDxIA+RVdAbKf1wMFqeRXgACiqdcbQBiXPBMB/fVQTLxmoG3riRHDlXwWgIjCnHxGJOkPMHmYOCMx0QwDaIZRBgACaDgiYMDtxydPKJE4UKIZL8AVzwZA6jySkCEwji8QtBmoUQBIgbAhTCOIDxXHX4DgSl3Y5CjyMwspaRuvn6EJfwEOtQtIyhiEEsnAAYAAGkV0A4wUFDH/KSmPmYaEj4nJpcT6niQfQw01xCFtSEqQMxLwYT+QKsDmI6RyGV4eYwmRCUC5QpIsRjJEEaj5ARmJTwFI3ccV/CxEmHEfS2svEWjYArQG33yKi3ooCAQ1MXHIzQdaRqxFjtRI1aDgA5X+ClikQdHhSE60jAKaAoAAGkWjYBSgtF8pacOyUGC3AyUOH7Cmz8izmJGUxEREvB4AVouOtGhlvod2Y7GBD0BLBWnWoMdhOUmWEh3HoDYVrKkDteADNktBaogdcGMksZnTCLSkAcnnDEiWgsTriW0KMRKZkEDd8kQiQwcUMgmEEhwLgVKJ5LiDOjARKS04kFNkCkAb9h+gwXaBgG8NoNEjQK2yGmTQeWjD/gCozQ10xAekkaL1pJbduCz+gMfVIAve4x1LxjSLuOwEjdcNVCgZN+BKI4xEpFKi4w3JhwTTA6lFJqjL2o8rQQMtm0CPFgjesfhRMAoGDAAEaNdqbxCEgWhjGKAjMAKbyAg6ATM4gWECGQE2cBRGcAS5eI1VGvt110C8F/hDSNvX69217yqPQCAQbBnF69iuikbJevrh3ywshIUwrf82Md93E7QSjpXJR81NRelE4ixEi6alQOKsRMkI4+XCo/rU7wxAiBo9xFdEsU1X0XhY3sluk5VwhHo2q5c+dTHKm8Pi3fL2LotiP6DAAvHa09ddWQofNWHXvQ8YMMh6Y2iniStJ4wTARDWpuzWKtNTgkm6ZQ4FxnawUVhEOpv26kDFblp8jLFlblqypZ61itAgMFtTVqyVkP9C3J/UWwM3q0KoAYglDUeOW0Z/GaH4i5nEO/THneh7r0vNkgGhXYdt4YBWRKoiNmHeHPe60uh++any7595pCQQCgWDLeALGLWqyLWBxZQAAAABJRU5ErkJggg==",
handler:t}]).show();break;case "audio/mpeg":case "audio/x-m4a":kb.create("audio").css({outline:"none"}).attr("controls","controls").attr("src",f.objectUrl(n,m.contentType)).popup(null,null,[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1FJREFUeNpiYKA66J8y8T8ynwmfJE6dQHYAjM9CtAlIihJIcjRAANHD71hdDxIA+RVdAbKf1wMFqeRXgACiqdcbQBiXPBMB/fVQTLxmoG3riRHDlXwWgIjCnHxGJOkPMHmYOCMx0QwDaIZRBgACaDgiYMDtxydPKJE4UKIZL8AVzwZA6jySkCEwji8QtBmoUQBIgbAhTCOIDxXHX4DgSl3Y5CjyMwspaRuvn6EJfwEOtQtIyhiEEsnAAYAAGkV0A4wUFDH/KSmPmYaEj4nJpcT6niQfQw01xCFtSEqQMxLwYT+QKsDmI6RyGV4eYwmRCUC5QpIsRjJEEaj5ARmJTwFI3ccV/CxEmHEfS2svEWjYArQG33yKi3ooCAQ1MXHIzQdaRqxFjtRI1aDgA5X+ClikQdHhSE60jAKaAoAAGkWjYBSgtF8pacOyUGC3AyUOH7Cmz8izmJGUxEREvB4AVouOtGhlvod2Y7GBD0BLBWnWoMdhOUmWEh3HoDYVrKkDteADNktBaogdcGMksZnTCLSkAcnnDEiWgsTriW0KMRKZkEDd8kQiQwcUMgmEEhwLgVKJ5LiDOjARKS04kFNkCkAb9h+gwXaBgG8NoNEjQK2yGmTQeWjD/gCozQ10xAekkaL1pJbduCz+gMfVIAve4x1LxjSLuOwEjdcNVCgZN+BKI4xEpFKi4w3JhwTTA6lFJqjL2o8rQQMtm0CPFgjesfhRMAoGDAAEaNdqbxCEgWhjGKAjMAKbyAg6ATM4gWECGQE2cBRGcAS5eI1VGvt110C8F/hDSNvX69217yqPQCAQbBnF69iuikbJevrh3ywshIUwrf82Md93E7QSjpXJR81NRelE4ixEi6alQOKsRMkI4+XCo/rU7wxAiBo9xFdEsU1X0XhY3sluk5VwhHo2q5c+dTHKm8Pi3fL2LotiP6DAAvHa09ddWQofNWHXvQ8YMMh6Y2iniStJ4wTARDWpuzWKtNTgkm6ZQ4FxnawUVhEOpv26kDFblp8jLFlblqypZ61itAgMFtTVqyVkP9C3J/UWwM3q0KoAYglDUeOW0Z/GaH4i5nEO/THneh7r0vNkgGhXYdt4YBWRKoiNmHeHPe60uh++any7595pCQQCgWDLeALGLWqyLWBxZQAAAABJRU5ErkJggg==",
handler:t}]).show();break;case "image/bmp":case "image/gif":case "image/jpeg":case "image/png":kb.create("img").css({maxHeight:"calc(100vh - 4em)",maxWidth:"calc(100vw - 2em)"}).attr("src",f.objectUrl(n,m.contentType)).popup(null,null,[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1FJREFUeNpiYKA66J8y8T8ynwmfJE6dQHYAjM9CtAlIihJIcjRAANHD71hdDxIA+RVdAbKf1wMFqeRXgACiqdcbQBiXPBMB/fVQTLxmoG3riRHDlXwWgIjCnHxGJOkPMHmYOCMx0QwDaIZRBgACaDgiYMDtxydPKJE4UKIZL8AVzwZA6jySkCEwji8QtBmoUQBIgbAhTCOIDxXHX4DgSl3Y5CjyMwspaRuvn6EJfwEOtQtIyhiEEsnAAYAAGkV0A4wUFDH/KSmPmYaEj4nJpcT6niQfQw01xCFtSEqQMxLwYT+QKsDmI6RyGV4eYwmRCUC5QpIsRjJEEaj5ARmJTwFI3ccV/CxEmHEfS2svEWjYArQG33yKi3ooCAQ1MXHIzQdaRqxFjtRI1aDgA5X+ClikQdHhSE60jAKaAoAAGkWjYBSgtF8pacOyUGC3AyUOH7Cmz8izmJGUxEREvB4AVouOtGhlvod2Y7GBD0BLBWnWoMdhOUmWEh3HoDYVrKkDteADNktBaogdcGMksZnTCLSkAcnnDEiWgsTriW0KMRKZkEDd8kQiQwcUMgmEEhwLgVKJ5LiDOjARKS04kFNkCkAb9h+gwXaBgG8NoNEjQK2yGmTQeWjD/gCozQ10xAekkaL1pJbduCz+gMfVIAve4x1LxjSLuOwEjdcNVCgZN+BKI4xEpFKi4w3JhwTTA6lFJqjL2o8rQQMtm0CPFgjesfhRMAoGDAAEaNdqbxCEgWhjGKAjMAKbyAg6ATM4gWECGQE2cBRGcAS5eI1VGvt110C8F/hDSNvX69217yqPQCAQbBnF69iuikbJevrh3ywshIUwrf82Md93E7QSjpXJR81NRelE4ixEi6alQOKsRMkI4+XCo/rU7wxAiBo9xFdEsU1X0XhY3sluk5VwhHo2q5c+dTHKm8Pi3fL2LotiP6DAAvHa09ddWQofNWHXvQ8YMMh6Y2iniStJ4wTARDWpuzWKtNTgkm6ZQ4FxnawUVhEOpv26kDFblp8jLFlblqypZ61itAgMFtTVqyVkP9C3J/UWwM3q0KoAYglDUeOW0Z/GaH4i5nEO/THneh7r0vNkgGhXYdt4YBWRKoiNmHeHPe60uh++any7595pCQQCgWDLeALGLWqyLWBxZQAAAABJRU5ErkJggg==",
handler:t}]).show();break;case "text/plain":case "text/css":fetch(new Request(f.objectUrl(n,m.contentType))).then(function(h){return h.text()}).then(function(h){kb.create("div").html(h.replace(/\n/g,"<br>")).popup("full","full",[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1FJREFUeNpiYKA66J8y8T8ynwmfJE6dQHYAjM9CtAlIihJIcjRAANHD71hdDxIA+RVdAbKf1wMFqeRXgACiqdcbQBiXPBMB/fVQTLxmoG3riRHDlXwWgIjCnHxGJOkPMHmYOCMx0QwDaIZRBgACaDgiYMDtxydPKJE4UKIZL8AVzwZA6jySkCEwji8QtBmoUQBIgbAhTCOIDxXHX4DgSl3Y5CjyMwspaRuvn6EJfwEOtQtIyhiEEsnAAYAAGkV0A4wUFDH/KSmPmYaEj4nJpcT6niQfQw01xCFtSEqQMxLwYT+QKsDmI6RyGV4eYwmRCUC5QpIsRjJEEaj5ARmJTwFI3ccV/CxEmHEfS2svEWjYArQG33yKi3ooCAQ1MXHIzQdaRqxFjtRI1aDgA5X+ClikQdHhSE60jAKaAoAAGkWjYBSgtF8pacOyUGC3AyUOH7Cmz8izmJGUxEREvB4AVouOtGhlvod2Y7GBD0BLBWnWoMdhOUmWEh3HoDYVrKkDteADNktBaogdcGMksZnTCLSkAcnnDEiWgsTriW0KMRKZkEDd8kQiQwcUMgmEEhwLgVKJ5LiDOjARKS04kFNkCkAb9h+gwXaBgG8NoNEjQK2yGmTQeWjD/gCozQ10xAekkaL1pJbduCz+gMfVIAve4x1LxjSLuOwEjdcNVCgZN+BKI4xEpFKi4w3JhwTTA6lFJqjL2o8rQQMtm0CPFgjesfhRMAoGDAAEaNdqbxCEgWhjGKAjMAKbyAg6ATM4gWECGQE2cBRGcAS5eI1VGvt110C8F/hDSNvX69217yqPQCAQbBnF69iuikbJevrh3ywshIUwrf82Md93E7QSjpXJR81NRelE4ixEi6alQOKsRMkI4+XCo/rU7wxAiBo9xFdEsU1X0XhY3sluk5VwhHo2q5c+dTHKm8Pi3fL2LotiP6DAAvHa09ddWQofNWHXvQ8YMMh6Y2iniStJ4wTARDWpuzWKtNTgkm6ZQ4FxnawUVhEOpv26kDFblp8jLFlblqypZ61itAgMFtTVqyVkP9C3J/UWwM3q0KoAYglDUeOW0Z/GaH4i5nEO/THneh7r0vNkgGhXYdt4YBWRKoiNmHeHPe60uh++any7595pCQQCgWDLeALGLWqyLWBxZQAAAABJRU5ErkJggg==",
handler:t}]).show()});break;case "text/csv":fetch(new Request(f.objectUrl(n,m.contentType))).then(function(h){return h.text()}).then(function(h){var r=h.parseCSV();0!=r.length&&function(k){r.each(function(q,l){k.append(function(u){q.each(function(v,w){return u.append(kb.create("td").css({padding:"0.25em"}).html(v.replace(/\n/g,"<br>")))});return u}(kb.create("tr")))});return k}(kb.create("table")).popup(null,"full",[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1FJREFUeNpiYKA66J8y8T8ynwmfJE6dQHYAjM9CtAlIihJIcjRAANHD71hdDxIA+RVdAbKf1wMFqeRXgACiqdcbQBiXPBMB/fVQTLxmoG3riRHDlXwWgIjCnHxGJOkPMHmYOCMx0QwDaIZRBgACaDgiYMDtxydPKJE4UKIZL8AVzwZA6jySkCEwji8QtBmoUQBIgbAhTCOIDxXHX4DgSl3Y5CjyMwspaRuvn6EJfwEOtQtIyhiEEsnAAYAAGkV0A4wUFDH/KSmPmYaEj4nJpcT6niQfQw01xCFtSEqQMxLwYT+QKsDmI6RyGV4eYwmRCUC5QpIsRjJEEaj5ARmJTwFI3ccV/CxEmHEfS2svEWjYArQG33yKi3ooCAQ1MXHIzQdaRqxFjtRI1aDgA5X+ClikQdHhSE60jAKaAoAAGkWjYBSgtF8pacOyUGC3AyUOH7Cmz8izmJGUxEREvB4AVouOtGhlvod2Y7GBD0BLBWnWoMdhOUmWEh3HoDYVrKkDteADNktBaogdcGMksZnTCLSkAcnnDEiWgsTriW0KMRKZkEDd8kQiQwcUMgmEEhwLgVKJ5LiDOjARKS04kFNkCkAb9h+gwXaBgG8NoNEjQK2yGmTQeWjD/gCozQ10xAekkaL1pJbduCz+gMfVIAve4x1LxjSLuOwEjdcNVCgZN+BKI4xEpFKi4w3JhwTTA6lFJqjL2o8rQQMtm0CPFgjesfhRMAoGDAAEaNdqbxCEgWhjGKAjMAKbyAg6ATM4gWECGQE2cBRGcAS5eI1VGvt110C8F/hDSNvX69217yqPQCAQbBnF69iuikbJevrh3ywshIUwrf82Md93E7QSjpXJR81NRelE4ixEi6alQOKsRMkI4+XCo/rU7wxAiBo9xFdEsU1X0XhY3sluk5VwhHo2q5c+dTHKm8Pi3fL2LotiP6DAAvHa09ddWQofNWHXvQ8YMMh6Y2iniStJ4wTARDWpuzWKtNTgkm6ZQ4FxnawUVhEOpv26kDFblp8jLFlblqypZ61itAgMFtTVqyVkP9C3J/UWwM3q0KoAYglDUeOW0Z/GaH4i5nEO/THneh7r0vNkgGhXYdt4YBWRKoiNmHeHPe60uh++any7595pCQQCgWDLeALGLWqyLWBxZQAAAABJRU5ErkJggg==",
handler:t}]).show()});break;case "video/mp4":case "video/mpeg":kb.create("video").css({maxHeight:"calc(100vh - 4em)",maxWidth:"calc(100vw - 2em)",outline:"none"}).attr("controls","controls").attr("src",f.objectUrl(n,m.contentType)).popup(null,null,[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1FJREFUeNpiYKA66J8y8T8ynwmfJE6dQHYAjM9CtAlIihJIcjRAANHD71hdDxIA+RVdAbKf1wMFqeRXgACiqdcbQBiXPBMB/fVQTLxmoG3riRHDlXwWgIjCnHxGJOkPMHmYOCMx0QwDaIZRBgACaDgiYMDtxydPKJE4UKIZL8AVzwZA6jySkCEwji8QtBmoUQBIgbAhTCOIDxXHX4DgSl3Y5CjyMwspaRuvn6EJfwEOtQtIyhiEEsnAAYAAGkV0A4wUFDH/KSmPmYaEj4nJpcT6niQfQw01xCFtSEqQMxLwYT+QKsDmI6RyGV4eYwmRCUC5QpIsRjJEEaj5ARmJTwFI3ccV/CxEmHEfS2svEWjYArQG33yKi3ooCAQ1MXHIzQdaRqxFjtRI1aDgA5X+ClikQdHhSE60jAKaAoAAGkWjYBSgtF8pacOyUGC3AyUOH7Cmz8izmJGUxEREvB4AVouOtGhlvod2Y7GBD0BLBWnWoMdhOUmWEh3HoDYVrKkDteADNktBaogdcGMksZnTCLSkAcnnDEiWgsTriW0KMRKZkEDd8kQiQwcUMgmEEhwLgVKJ5LiDOjARKS04kFNkCkAb9h+gwXaBgG8NoNEjQK2yGmTQeWjD/gCozQ10xAekkaL1pJbduCz+gMfVIAve4x1LxjSLuOwEjdcNVCgZN+BKI4xEpFKi4w3JhwTTA6lFJqjL2o8rQQMtm0CPFgjesfhRMAoGDAAEaNdqbxCEgWhjGKAjMAKbyAg6ATM4gWECGQE2cBRGcAS5eI1VGvt110C8F/hDSNvX69217yqPQCAQbBnF69iuikbJevrh3ywshIUwrf82Md93E7QSjpXJR81NRelE4ixEi6alQOKsRMkI4+XCo/rU7wxAiBo9xFdEsU1X0XhY3sluk5VwhHo2q5c+dTHKm8Pi3fL2LotiP6DAAvHa09ddWQofNWHXvQ8YMMh6Y2iniStJ4wTARDWpuzWKtNTgkm6ZQ4FxnawUVhEOpv26kDFblp8jLFlblqypZ61itAgMFtTVqyVkP9C3J/UWwM3q0KoAYglDUeOW0Z/GaH4i5nEO/THneh7r0vNkgGhXYdt4YBWRKoiNmHeHPe60uh++any7595pCQQCgWDLeALGLWqyLWBxZQAAAABJRU5ErkJggg==",
handler:t}]).show();break;default:t()}}catch(h){kb.alert(kb.error.parse(h))}})["catch"](function(n){return kb.alert(kb.error.parse(n))})};g.required&&(b.alert=function(m){b.elm(".kb-field-alert")||b.append(e().addClass("kb-field-alert"));b.elm(".kb-field-alert").elm("span").html(m).parentNode.show()});break;case "GROUP_SELECT":case "ORGANIZATION_SELECT":case "USER_SELECT":(function(m){b.elm(".kb-search").on("click",function(n){b.recordPicker.show({picker:{name:{code:"name",type:"SINGLE_LINE_TEXT",
label:kb.constants.picker.caption.name[kb.operator.language],required:!1,noLabel:!0}}},function(t){(function(h){(function(r){t.each(function(k,q){r.includes(k.code.value)||h.push({code:k.code.value,name:k.name.value})})})(h.map(function(r){return r.code}));b.elm("input").val(JSON.stringify(h));p("kb.change."+g.code)})(b.elm("input").val()?JSON.parse(b.elm("input").val()):[])})});b.recordPicker=new KintoneBoosterRecordPicker(m,!0,function(){var n=[];g.loginuser&&n.push({code:{value:"LOGINUSER()"},
name:{value:"Login user"}});g.guestuser&&n.push({code:{value:"GUESTUSER()"},name:{value:"Guest user"}});return n}());b.guide=function(n){b.elm(".kb-guide").append(function(t){t.append(kb.create("button").addClass("kb-icon kb-icon-del kb-guide-item-icon").on("click",function(h){kb.confirm(kb.constants.common.message.confirm["delete"][kb.operator.language],function(){b.elm("input").val(JSON.stringify(JSON.parse(b.elm("input").val()).filter(function(r){return r.code!=n.code})));p("kb.change."+g.code)})})).append(kb.create("span").addClass("kb-guide-item-label").html(n.name));
return t}(kb.create("span").addClass("kb-guide-item")))};g.required&&(b.alert=function(n){b.elm(".kb-field-alert")||b.append(e().addClass("kb-field-alert"));b.elm(".kb-field-alert").elm("span").html(n).parentNode.show()})})(function(){var m="";switch(g.type){case "GROUP_SELECT":m="group";break;case "ORGANIZATION_SELECT":m="organization";break;case "USER_SELECT":m="user"}return m}());case "NUMBER":(function(m){b.on("show",function(n){return m()});m()})(function(){b.elm(".kb-unit")?b.elm("input").css({width:"calc(100% - "+
b.elm(".kb-unit").outerWidth(!0)+"px)"}):b.elm("input").css({width:null})});break;case "RADIO_BUTTON":b.elms("[data-name="+g.code+"]").each(function(m,n){m.closest("label").on("click",function(t){(function(h){b.elms("[data-name="+g.code+"]").each(function(r,k){return r.checked=h==r.val()});p("kb.change."+g.code)})(m.val());t.stopPropagation();t.preventDefault()})});break;case "TIME":b.elm(".kb-hour").elm("select").on("change",function(m){m.currentTarget.val()||b.elm(".kb-minute").elm("select").val("");
p("kb.change."+g.id)}),b.elm(".kb-minute").elm("select").on("change",function(m){m.currentTarget.val()||b.elm(".kb-hour").elm("select").val("");p("kb.change."+g.id)})}b.elms("input,select,textarea").each(function(m,n){switch(g.type){case "COLOR":case "CONDITION":case "FILE":case "GROUP_SELECT":case "ORGANIZATION_SELECT":case "RADIO_BUTTON":case "TIME":case "USER_SELECT":break;default:m.on("change",function(t){return p("kb.change."+g.code)})}})}(d.elm(".kb-field-value"),c[d.attr("field-id")]);return d};
window.KintoneBoosterField.prototype.blobToBase64=function(d,a){var f=new FileReader;f.onload=function(){a(f.result.replace(/^data:.+;base64,/,""))};f.readAsDataURL(d)};
window.KintoneBoosterField.prototype.create=function(d){var a=function(f){f.append(kb.create("div").addClass("kb-dropdown kb-hour").append(kb.create("select").assignOption(function(){var c=[{value:""}];(24).each(function(e){return c.push({value:e.toString().lpad("0",2)})});return c}(),"value","value"))).append(kb.create("div").addClass("kb-dropdown kb-minute").append(kb.create("select").assignOption(function(){var c=[{value:""}];(60).each(function(e){return c.push({value:e.toString().lpad("0",2)})});
return c}(),"value","value")))};if(!("type"in d))throw Error("You shoud setup [type] in field information");return function(f){f.append(kb.create("span").addClass("kb-field-caption").html(d.label));d.noLabel&&f.elm(".kb-field-caption").addClass("kb-hidden");f.append(function(c){switch(d.type){case "CALC":switch(d.format){case "NUMBER":case "NUMBER_DIGIT":c.addClass("kb-number")}break;case "CHECK_BOX":case "MULTI_SELECT":(function(e){e.reduce(function(p,b){p[b.index]=b;return p},Array(e.length).fill("")).each(function(p,
b){c.addClass("kb-checkbox").append(kb.create("label").append(kb.create("input").attr("type","checkbox").val(p.label)).append(kb.create("span").html(p.label)))})})(Object.values(d.options));break;case "COLOR":c.addClass("kb-color").append(kb.create("input").attr("type","text").attr("data-type","color")).append(kb.create("button").addClass("kb-icon kb-icon-color kb-search"));break;case "CONDITION":c.addClass("kb-condition").append(kb.create("input").attr("type","hidden")).append(kb.create("button").addClass("kb-icon kb-icon-filter kb-search"));
break;case "CREATOR":case "CREATED_TIME":case "MODIFIER":case "UPDATED_TIME":c.append(kb.create("input").attr("type","hidden").attr("data-type",d.type.toLowerCase()));break;case "DATE":c.addClass("kb-date").append(kb.create("input").attr("type","text").attr("data-type","date")).append(kb.create("button").addClass("kb-icon kb-icon-date kb-search"));break;case "DATETIME":a(c.addClass("kb-datetime").append(kb.create("input").attr("type","text").attr("data-type","date")).append(kb.create("button").addClass("kb-icon kb-icon-date kb-search")));
break;case "DROP_DOWN":(function(e){c.addClass("kb-dropdown").append(kb.create("select").assignOption(e.reduce(function(p,b){p[b.index]=b;return p},Array(e.length).fill("")),"label","label"))})(Object.values(d.options));break;case "FILE":c.addClass("kb-file").append(kb.create("input").attr("type","hidden")).append(kb.create("button").addClass("kb-icon kb-icon-file kb-search"));break;case "GROUP_SELECT":c.addClass("kb-group").append(kb.create("input").attr("type","hidden")).append(kb.create("button").addClass("kb-icon kb-icon-group kb-search"));
break;case "LINK":switch(d.protocol){case "WEB":c.addClass("kb-text").append(kb.create("input").attr("type","text").attr("data-type","url"));break;case "CALL":c.addClass("kb-text").append(kb.create("input").attr("type","text").attr("data-type","tel"));break;case "MAIL":c.addClass("kb-text").append(kb.create("input").attr("type","text").attr("data-type","mail"))}break;case "MULTI_LINE_TEXT":case "RICH_TEXT":c.addClass("kb-textarea").append(function(e){d.lines&&e.css({height:"calc("+(1.5*parseFloat(d.lines)).toString()+
"em + 2px)"});return e}(kb.create("textarea")));break;case "NUMBER":d.lookup?c.addClass("kb-lookup").append(kb.create("input").addClass("kb-lookup-search").attr("type","text").attr("data-type","nondemiliternumber")).append(kb.create("button").addClass("kb-icon kb-icon-lookup kb-search")).append(kb.create("button").addClass("kb-icon kb-icon-del kb-clear")):(c.addClass("kb-number").append(function(e){"displayScale"in d&&e.attr("data-decimals",d.displayScale);return e.attr("data-type",d.digit?"number":
"nondemiliternumber")}(kb.create("input").attr("type","text"))),d.unit&&function(e){"prefix"==d.unitPosition?c.insertBefore(e,c.elm("input")):c.insertBefore(e,c.elm("input").nextElementSibling)}(kb.create("span").addClass("kb-unit").html(d.unit)));break;case "ORGANIZATION_SELECT":c.addClass("kb-organization").append(kb.create("input").attr("type","hidden")).append(kb.create("button").addClass("kb-icon kb-icon-organization kb-search"));break;case "RADIO_BUTTON":(function(e){e.reduce(function(p,b){p[b.index]=
b;return p},Array(e.length).fill("")).each(function(p,b){var g=c.addClass("kb-radio"),m=g.append,n=kb.create("label").append(kb.create("input").attr("type","radio").attr("data-name",d.code).val(p.label)).append(kb.create("span").html(p.label));0==b&&(n.elm("input").checked=!0);m.call(g,n)})})(Object.values(d.options));break;case "RECORD_NUMBER":c.addClass("kb-id");break;case "SINGLE_LINE_TEXT":if(d.lookup)c.addClass("kb-lookup").append(kb.create("input").addClass("kb-lookup-search").attr("type","text").attr("data-type",
"text")).append(kb.create("button").addClass("kb-icon kb-icon-lookup kb-search")).append(kb.create("button").addClass("kb-icon kb-icon-del kb-clear"));else switch(d.format){case "password":c.addClass("kb-text").append(kb.create("input").attr("type","password").attr("data-type",d.type));break;default:c.addClass("kb-text").append(kb.create("input").attr("type","text").attr("data-type",d.format?d.format:"text"))}break;case "SPACER":c.html(d.contents);break;case "TIME":a(c);break;case "USER_SELECT":c.addClass("kb-user").append(kb.create("input").attr("type",
"hidden")).append(kb.create("button").addClass("kb-icon kb-icon-user kb-search"))}return"SPACER"!=d.type?c.append(kb.create("span").addClass("kb-guide")):c}(kb.create("div").addClass("kb-field-value")));switch(d.type){case "CALC":case "CATEGORY":case "CONDITION":case "CREATED_TIME":case "CREATOR":case "FILE":case "GROUP_SELECT":case "MODIFIER":case "ORGANIZATION_SELECT":case "RECORD_NUMBER":case "REFERENCE_TABLE":case "STATUS":case "STATUS_ASSIGNEE":case "UPDATED_TIME":case "USER_SELECT":f.elm(".kb-guide").addClass("kb-fixed")}if(d.required)switch(d.type){case "CALC":case "CATEGORY":case "CHECK_BOX":case "CONDITION":case "CREATED_TIME":case "CREATOR":case "FILE":case "GROUP_SELECT":case "MODIFIER":case "MULTI_SELECT":case "ORGANIZATION_SELECT":case "RECORD_NUMBER":case "REFERENCE_TABLE":case "STATUS":case "STATUS_ASSIGNEE":case "UPDATED_TIME":case "USER_SELECT":break;
default:f.elms("input,select,textarea").each(function(c,e){return c.attr("required","required")})}d.placeholder&&f.elms("input,select,textarea").each(function(c,e){return c.attr("placeholder",d.placeholder)});return f}(kb.create("div").addClass("kb-field").attr("field-id",d.code))};
window.KintoneBoosterField.prototype.get=function(d,a,f){var c=null;if(d.tableCode)c=kb.elms(".field-"+d.id).map(function(e){switch(f){case "create":case "edit":e.value=a?e.elm("input[type=text],textarea,ul")?e.elm("input[type=text],textarea,ul"):e.elm("[class^=forms-]"):e.elm(".input-checkbox-cybozu,.input-date-cybozu,.input-datetime-cybozu,.input-file-cybozu,.input-radio-cybozu,.input-text-outer-cybozu,.input-time-cybozu,.multipleselect-cybozu,.select-cybozu");break;case "detail":case "print":e.value=
a?e.elm(".value-"+d.id):e}return e});else switch(c=kb.elm(".field-"+d.id),f){case "create":case "edit":c.value=a?c.elm("input[type=text],textarea,ul")?c.elm("input[type=text],textarea,ul"):c.elm("[class^=forms-]"):c.elm(".input-checkbox-cybozu,.input-date-cybozu,.input-datetime-cybozu,.input-file-cybozu,.input-radio-cybozu,.input-text-outer-cybozu,.input-time-cybozu,.multipleselect-cybozu,.select-cybozu");break;case "detail":case "print":c.value=c.elm(".value-"+d.id)}return c};
window.KintoneBoosterField.prototype.isEmpty=function(d){var a=!0;if(Array.isArray(d))a=0==d.length;else switch(typeof d){case "object":a=null===d||0==Object.keys(d).length;break;case "number":a=Number.isNaN(d);break;case "string":a=0==d.toString().length}return a};
window.KintoneBoosterField.prototype.load=function(d,a){var f=this;return new Promise(function(c,e){d in f.cache?c(f.cache[d]):kintone.api(kintone.api.url("/k/v1/app/form/layout",!0),"GET",{app:d}).then(function(p){(function(b){var g=[],m=[],n=function(t){return t.reduce(function(h,r){switch(r.type){case "GROUP":g.push(r.code);h=h.concat(n(r.layout));break;case "ROW":h=r.fields.reduce(function(k,q){"code"in q&&k.push(q.code);return k},h);break;case "SUBTABLE":m.push({code:r.code,fields:r.fields}),
h=r.fields.reduce(function(k,q){"code"in q&&k.push(q.code);return k},h)}return h},[])};kintone.api(kintone.api.url("/k/v1/app/form/fields",!0),"GET",{app:d,lang:"user"}).then(function(t){(function(h){h.each(function(r,k){delete t.properties[r]})})(Object.values(t.properties).reduce(function(h,r){switch(r.type){case "CATEGORY":h.push(r.code);break;case "STATUS":r.enabled||(h.push(r.code),h.push(Object.values(t.properties).filter(function(k){return"STATUS_ASSIGNEE"==k.type}).first().code))}return h},
[]));(function(h,r,k){f.cache[d]={origin:t.properties,groups:g.reduce(function(q,l){q[l]=t.properties[l];return q},{}),tables:m.reduce(function(q,l){q[l.code]=function(u){u.fields=l.fields.reduce(function(v,w){v[w.code]=h[w.code];return v},{});return u}(t.properties[l.code]);l.code in k.table&&(q[l.code].id=k.table[l.code]);return q},{}),changes:function(q){var l=[];l=Object.values(h).reduce(function(u,v){q.includes(v.code)||u.push(v.code);return u},[]);return l.concat(m.map(function(u){return u.code}))}(function(){var q=
[],l;for(l in h)(function(u){u.expression&&q.push(u.code);u.lookup&&function(v){0!=v.length&&(q=q.concat(v.slice(0,-1)))}(u.lookup.fieldMappings.map(function(v){return v.field}))})(h[l]);return Array.from(new Set(q))}()),criterias:function(){var q={};r.each(function(u,v){"FILE"!=h[u].type&&(q[u]=h[u])});for(var l in h)(function(u){switch(u.type){case "CALC":case "CATEGORY":case "CREATED_TIME":case "CREATOR":case "MODIFIER":case "RECORD_NUMBER":case "REFERENCE_TABLE":case "UPDATED_TIME":q[u.code]=
u;break;case "STATUS":u.enabled&&(q[u.code]=u,function(v){q[v.code]=v}(Object.values(h).filter(function(v){return"STATUS_ASSIGNEE"==v.type}).first()))}})(h[l]);return q}(),disables:function(){var q=[],l;for(l in h)(function(u){kb.field.reserved.includes(u.type)?q.push(u.code):(u.expression&&q.push(u.code),u.lookup&&function(v){0!=v.length&&(q=q.concat(v))}(u.lookup.fieldMappings.map(function(v){return v.field})))})(h[l]);return Array.from(new Set(q))}(),parallelize:function(){var q={};r.each(function(u,
v){q[u]=h[u]});for(var l in h)(function(u){switch(u.type){case "CREATED_TIME":case "CREATOR":case "MODIFIER":case "RECORD_NUMBER":case "UPDATED_TIME":q[u.code]=u;break;case "STATUS":u.enabled&&(q[u.code]=u,function(v){q[v.code]=v}(Object.values(h).filter(function(v){return"STATUS_ASSIGNEE"==v.type}).first()))}u.code in k.field&&u.code in q&&(q[u.code].id=k.field[u.code])})(h[l]);return q}(),placed:function(){var q={};r.each(function(l,u){q[l]=h[l]});return q}(),sorts:function(){var q={};r.each(function(u,
v){var w=h[u];switch(w.type){case "CALC":case "CREATED_TIME":case "CREATOR":case "DATE":case "DATETIME":case "DROP_DOWN":case "LINK":case "MODIFIER":case "NUMBER":case "RADIO_BUTTON":case "RECORD_NUMBER":case "SINGLE_LINE_TEXT":case "TIME":case "UPDATED_TIME":w.tableCode||(q[w.code]=w)}});for(var l in h)(function(u){switch(u.type){case "CALC":case "CREATED_TIME":case "CREATOR":case "MODIFIER":case "RECORD_NUMBER":case "UPDATED_TIME":q[u.code]=u;break;case "STATUS":u.enabled&&(q[u.code]=u)}})(h[l]);
return q}()};c(f.cache[d])})(kb.field.parallelize(t.properties),n(b),function(){var h={field:{},table:{}};a&&(Object.values(cybozu.data.page.FORM_DATA.schema.table.fieldList).each(function(r,k){h.field[r["var"]]=r.id}),"subTable"in cybozu.data.page.FORM_DATA.schema&&Object.values(cybozu.data.page.FORM_DATA.schema.subTable).each(function(r,k){h.table[r["var"]]=r.id;Object.values(r.fieldList).each(function(q,l){h.field[q["var"]]=q.id})}));return h}())})["catch"](function(t){return kb.alert(kb.error.parse(t))})})(p.layout)})["catch"](function(p){return kb.alert(kb.error.parse(p))})})};
window.KintoneBoosterField.prototype.parallelize=function(d){d=kb.extend({},d);var a={},f;for(f in d){var c=void 0,e=d[f];switch(e.type){case "SUBTABLE":var p=e.code;for(c in e.fields)e.fields[c]=kb.extend({tableCode:p},e.fields[c]),a[e.fields[c].code]=e.fields[c];break;default:e=kb.extend({tableCode:""},e),a[e.code]=e}}return a};
window.KintoneBoosterField.prototype.stringify=function(d,a,f){var c="";if(d&&a)switch(d.type){case "CATEGORY":case "CHECK_BOX":case "MULTI_SELECT":c=a.join(f);break;case "CREATOR":case "MODIFIER":c=a.name;break;case "CREATED_TIME":case "DATETIME":case "UPDATED_TIME":c=a.parseDateTime().format("Y-m-d H:i");break;case "FILE":case "GROUP_SELECT":case "ORGANIZATION_SELECT":case "STATUS_ASSIGNEE":case "USER_SELECT":c=a.map(function(e){return e.name}).join(f);break;case "MULTI_LINE_TEXT":case "RICH_TEXT":c=
a.replace(/\n/g,"");break;case "NUMBER":kb.isNumeric(a)&&(c=d.digit?Number(a).comma(d.displayScale):d.displayScale?Number(a).toFloor(parseInt(d.displayScale)):a);d.unit&&(c="prefix"==d.unitPosition?d.unit+" "+c:c+" "+d.unit);break;default:c=a}return c};
window.KintoneBoosterField.prototype.typing=function(d,a,f){f=void 0===f?!1:f;var c=!1;if("SINGLE_LINE_TEXT"==a.type)switch(d.type){case "CALC":case "CREATED_TIME":case "DATE":case "DATETIME":case "DROP_DOWN":case "LINK":case "NUMBER":case "RADIO_BUTTON":case "RECORD_NUMBER":case "SINGLE_LINE_TEXT":case "STATUS":case "TIME":case "UPDATED_TIME":c=f?!0:!a.expression}if(!c)switch(d.type){case "CALC":if(a.type==d.type)c=a.format==d.format&&f;else switch(d.format){case "DATE":case "DATETIME":case "TIME":c=
a.type==d.format;break;case "NUMBER":case "NUMBER_DIGIT":c=(f?["NUMBER","RECORD_NUMBER"]:["NUMBER"]).includes(a.type)}break;case "CHECK_BOX":case "MULTI_SELECT":c=["CHECK_BOX","MULTI_SELECT"].includes(a.type);break;case "CREATED_TIME":case "DATETIME":case "UPDATED_TIME":c="CALC"==a.type?"DATETIME"==a.format&&f:(f?["CREATED_TIME","DATETIME","UPDATED_TIME"]:["DATETIME"]).includes(a.type);break;case "CREATOR":case "MODIFIER":case "STATUS_ASSIGNEE":case "USER_SELECT":c=(f?["CREATOR","MODIFIER","STATUS_ASSIGNEE",
"USER_SELECT"]:["USER_SELECT"]).includes(a.type);break;case "DATE":c="CALC"==a.type?"DATE"==a.format&&f:a.type==d.type;break;case "DROP_DOWN":case "RADIO_BUTTON":c=["DROP_DOWN","LINK","RADIO_BUTTON"].includes(a.type);break;case "FILE":case "MULTI_LINE_TEXT":case "RICH_TEXT":c=f?!1:a.type==d.type;break;case "GROUP_SELECT":case "LINK":case "ORGANIZATION_SELECT":case "STATUS":case "TIME":c=a.type==d.type;break;case "NUMBER":case "RECORD_NUMBER":c="CALC"==a.type?"NUMBER"==a.format&&f:(f?["NUMBER","RECORD_NUMBER"]:
["NUMBER"]).includes(a.type);break;case "SINGLE_LINE_TEXT":c=f?["DROP_DOWN","RADIO_BUTTON","LINK","MULTI_LINE_TEXT","RICH_TEXT"].includes(a.type):["LINK","MULTI_LINE_TEXT","RICH_TEXT"].includes(a.type)}return c};window.KintoneBoosterField.prototype.objectUrl=function(d,a){var f=null,c=window.URL||window.webkitURL;if("string"===typeof d){var e=atob(d),p=new Uint8Array(e.length);e.length.each(function(b){return p[b]=e.charCodeAt(b)});f=new Blob([p.buffer],{type:a})}else f=d;return c.createObjectURL(f)};
window.KintoneBoosterTable=function(){};
window.KintoneBoosterTable.prototype.activate=function(d,a){return d.spread(function(f,c){(function(e){f.elm(".kb-table-row-add").on("click",function(p){d.insertRow(f);kb.event.call("kb.row.add."+d.attr("field-id"),{container:d,record:kb.record.get(e,a,!0).record,rowindex:parseInt(f.attr("row-idx"))+1}).then(function(b){b.error?d.delRow(f):kb.event.call("kb.action.call",{record:b.record,mobile:location.href.match(/\/m\//g)?!0:!1,pattern:"change",workplace:e.closest(".kb-view")?"view":"record"}).then(function(g){kb.event.call("kb.style.call",
{record:g.record,mobile:g.mobile,pattern:"$id"in g.record?g.record.$id.value?"edit":"create":"create",workplace:g.workplace}).then(function(m){kb.record.set(e,a,m.record);m=new Event("change");e.attr("unsaved","unsaved").dispatchEvent(m)})["catch"](function(){})})})});f.elm(".kb-table-row-copy").on("click",function(p){d.insertRow(f);kb.event.call("kb.row.copy."+d.attr("field-id"),{container:d,record:function(b,g){b[d.attr("field-id")].value[g+1]=kb.extend({},b[d.attr("field-id")].value[g]);return b}(kb.record.get(e,
a,!0).record,parseInt(f.attr("row-idx"))),rowindex:parseInt(f.attr("row-idx"))+1}).then(function(b){b.error?d.delRow(f):kb.event.call("kb.action.call",{record:b.record,mobile:location.href.match(/\/m\//g)?!0:!1,pattern:"change",workplace:e.closest(".kb-view")?"view":"record"}).then(function(g){kb.event.call("kb.style.call",{record:g.record,mobile:g.mobile,pattern:"$id"in g.record?g.record.$id.value?"edit":"create":"create",workplace:g.workplace}).then(function(m){kb.record.set(e,a,m.record);m=new Event("change");
e.attr("unsaved","unsaved").dispatchEvent(m)})["catch"](function(){})})})});f.elm(".kb-table-row-del").on("click",function(p){kb.confirm(kb.constants.common.message.confirm["delete"][kb.operator.language],function(){kb.event.call("kb.row.del."+d.attr("field-id"),{container:d,record:kb.record.get(e,a,!0).record,rowindex:parseInt(f.attr("row-idx"))}).then(function(b){b.error||(d.delRow(f),kb.event.call("kb.action.call",{record:kb.record.get(e,a,!0).record,mobile:location.href.match(/\/m\//g)?!0:!1,
pattern:"change",workplace:e.closest(".kb-view")?"view":"record"}).then(function(g){kb.event.call("kb.style.call",{record:g.record,mobile:g.mobile,pattern:"$id"in g.record?g.record.$id.value?"edit":"create":"create",workplace:g.workplace}).then(function(m){kb.record.set(e,a,m.record);m=new Event("change");e.attr("unsaved","unsaved").dispatchEvent(m)})["catch"](function(){})}))})})});f.elms(".kb-field").each(function(p,b){return kb.field.activate(p,a)});d.tr.each(function(p,b){return p.attr("row-idx",
b)})})(d.closest("[form-id=form_"+a.id+"]"))},function(f,c){0==f.tr.length?f.addRow():f.tr.each(function(e,p){return e.attr("row-idx",p)})},!1)};
window.KintoneBoosterTable.prototype.create=function(d,a,f,c){return function(e){f||c||e.append(kb.create("thead").append(kb.create("tr")));e.append(kb.create("tbody").append(kb.create("tr").addClass("kb-scope").attr("row-idx","")));for(var p in d.fields)(function(b){f||c||e.elm("thead tr").append(kb.create("th").append(kb.create("span").html(b.label)));var g=e.elm("tbody tr"),m=g.append,n=kb.create("td"),t=n.append,h=kb.field,r=h.create;b=kb.extend({},b);c||(b.noLabel=!0);m.call(g,t.call(n,r.call(h,
b)))})(d.fields[p]);f||c||e.elm("thead tr").append(kb.create("th").addClass("kb-table-button"+(a?" kb-table-button-extension":"")));e.elm("tbody tr").append(kb.create("td").addClass("kb-table-button"+(a?" kb-table-button-extension":"")).append(kb.create("button").addClass("kb-icon kb-icon-add kb-table-row-add")).append(kb.create("button").addClass("kb-icon kb-icon-copy kb-table-row-copy").css({display:a?"inline-block":"none"})).append(kb.create("button").addClass("kb-icon kb-icon-del kb-table-row-del")));
for(p in d.fields)(function(b){b.lookup&&b.lookup.fieldMappings.each(function(g,m){g.field in d.fields&&e.elm('[field-id="'+CSS.escape(g.field)+'"]')&&e.elm('[field-id="'+CSS.escape(g.field)+'"]').addClass("kb-readonly")})})(d.fields[p]);return e.attr("field-id",d.code)}(kb.create("table").addClass("kb-table"))};
window.KintoneBoosterView=function(){var d=this;this.records={"delete":function(a,f,c){c=void 0===c?!1:c;return new Promise(function(e,p){var b=function(g,m){0!=f.length?kintone.api(kintone.api.url("/k/v1/records",!0),"DELETE",{app:a,ids:f.slice(g,g+100)}).then(function(n){c||kb.progressUpdate();g+=100;0<f.slice(g,g+100).length?b(g,m):m()})["catch"](function(n){return p(n)}):m()};c||kb.progressStart(Math.ceil(f.length/100));b(0,function(){c||kb.progressEnd();e()})})},get:function(a,f,c){return new Promise(function(e,
p){(function(b){var g=function(m,n,t){kintone.api(kintone.api.url("/k/v1/records",!0),"GET",{app:a,query:f+" order by "+b+" limit 500 offset "+n.toString()}).then(function(h){Array.prototype.push.apply(m,h.records);n+=500;500==h.records.length?g(m,n,t):t(m)})["catch"](function(h){return p(h)})};kintone.api(kintone.api.url("/k/v1/records",!0),"GET",{app:a,query:f,totalCount:!0}).then(function(m){1E4>m.totalCount?g([],0,function(n){return e(n)}):kintone.api(kintone.api.url("/k/v1/records/cursor",!0),
"POST",{app:a,query:f+" order by "+b,size:500}).then(function(n){(function(t){var h=function(r,k){kintone.api(kintone.api.url("/k/v1/records/cursor",!0),"GET",{id:t}).then(function(q){Array.prototype.push.apply(r,q.records);q.next?h(r,k):k(r)})["catch"](function(q){return p(q)})};h([],function(r){return e(r)})})(n.id)})["catch"](function(n){return p(n)})})["catch"](function(m){return p(m)})})(c||"$id asc")})},set:function(a,f,c,e){c=void 0===c?!1:c;e=void 0===e?!1:e;return new Promise(function(p,
b){var g=function(n,t){0!=f.post.length?kintone.api(kintone.api.url("/k/v1/records",!0),"POST",{app:a,records:f.post.slice(n,n+100)}).then(function(h){c||kb.progressUpdate();n+=100;0<f.post.slice(n,n+100).length?g(n,t):t()})["catch"](function(h){return b(h)}):t()},m=function(n,t){0!=f.put.length?kintone.api(kintone.api.url("/k/v1/records",!0),"PUT",{app:a,records:function(h){e&&(h=h.map(function(r){return d.records.transform(r.record)}));return h}(f.put.slice(n,n+100))}).then(function(h){c||kb.progressUpdate();
n+=100;0<f.put.slice(n,n+100).length?m(n,t):t()})["catch"](function(h){return b(h)}):t()};"post"in f||(f.post=[]);"put"in f||(f.put=[]);c||kb.progressStart(Math.ceil(f.post.length/100)+Math.ceil(f.put.length/100));g(0,function(){m(0,function(){c||kb.progressEnd();p()})})})},transform:function(a){var f=a.$id.value,c={},e;for(e in a)kb.field.reserved.includes(a[e].type)||(c[e]=a[e]);return{id:f,record:c}}}};
window.KintoneBoosterView.prototype.create=function(d,a,f,c){var e={key:function(){return"view_"+a.id+"_"+f+"_"+location.host.split(".").first()},set:function(p){var b=e.key(),g="[view-id=view_"+a.id+"_"+f+"] .kb-guide{min-width:auto !important;}";kb.elm("[view-id=view_"+a.id+"_"+f+"]").elms(".kb-view-head-resizer").each(function(m,n){var t=m.closest(".kb-view-head-cell");if(!t.hasClass("kb-unuse")){var h=t.attr("column-id"),r=150;p||kb.elm(".kb_spread_style_"+CSS.escape(b))&&kb.elm(".kb_spread_style_"+
CSS.escape(b)).text().match(new RegExp('\\[column-id="'+CSS.escape(h)+'"\\]',"g"))&&(r=t.outerWidth(!1));t=r;g+="[view-id=view_"+a.id+"_"+f+'] [column-id="'+CSS.escape(h)+'"]{max-width:'+t+"px;width:"+t+"px;}";g+="[view-id=view_"+a.id+"_"+f+'] [field-id="'+CSS.escape(h)+'"]{width:'+t+"px;}"}});kb.elm(".kb_spread_style_"+CSS.escape(b))&&kb.elm("head").removeChild(kb.elm(".kb_spread_style_"+CSS.escape(b)));kb.elm("head").append(kb.create("style").addClass("kb_spread_style_"+b).attr("media","screen").attr("type",
"text/css").text(g));localStorage.setItem(b,g)}};return d.append(function(p,b,g){var m=0,n=function(h){var r="";c||(r=(h?2:0)+g.buttons.length,r="kb-view-button_shave"+r.toString());return r}("viewer"==g.mode),t=function(h,r){var k=h.changedTouches?Array.from(h.changedTouches).first():h,q=h.currentTarget.closest(".kb-view-head-cell"),l=k.pageX,u=h.currentTarget.closest(".kb-view-head-cell").outerWidth(!1),v={move:function(w){var x=!1,z=w.changedTouches?Array.from(w.changedTouches).first():w,y=u+z.pageX-
l;q.css({maxWidth:y.toString()+"px",width:y.toString()+"px"});p.elms('[field-id="'+CSS.escape(r)+'"]').each(function(A,B){return A.css({width:y.toString()+"px"})});p.elms('[field-id="'+CSS.escape(r)+'"]').each(function(A,B){y<A.outerWidth(!1)&&(y=A.outerWidth(!1),x=!0)});x&&q.css({maxWidth:y.toString()+"px",width:y.toString()+"px"});w.stopPropagation();w.preventDefault()},end:function(w){e.set();kb.elm("body").removeClass("kb-resizing");window.off("mousemove,touchmove",v.move);window.off("mouseup,touchend",
v.end);w.stopPropagation();w.preventDefault()}};kb.elm("body").addClass("kb-resizing");window.on("mousemove,touchmove",v.move);window.on("mouseup,touchend",v.end);h.stopPropagation();h.preventDefault()};p.append(kb.create("thead").append(kb.create("tr").addClass("kb-view-head"))).append(kb.create("tbody").append(kb.create("tr").addClass("kb-view-row")));p.elm("thead tr").append(kb.create("th").addClass("kb-view-head-cell kb-view-button "+n+" kb-view-guide"));p.elm("tbody tr").append(kb.create("td").addClass("kb-view-button "+
n+" kb-view-guide").append(kb.create("a").addClass("kb-icon kb-icon-edit kb-view-row-edit"+(g.buttons.includes("detail")?" kb-unuse":""))).append(kb.create("button").addClass("kb-icon kb-icon-add kb-view-row-add"+(g.buttons.includes("add")||"viewer"==g.mode?" kb-unuse":""))).append(kb.create("button").addClass("kb-icon kb-icon-copy kb-view-row-copy"+(g.buttons.includes("clone")||"viewer"==g.mode?" kb-unuse":""))).append(kb.create("button").addClass("kb-icon kb-icon-del kb-view-row-del"+(g.buttons.includes("delete")?
" kb-unuse":""))));(function(h){h.concat(Object.keys(b.fields).filter(function(r){return!h.includes(r)})).each(function(r,k){(function(q,l){switch(q.type){case "SUBTABLE":for(var u in q.fields)p.elm("thead tr").append(function(v,w){l||m++;return v.addClass("kb-view-head-cell"+(l?" kb-unuse":"")).attr("column-id",w.code).append(kb.create("span").addClass("kb-view-head-caption").html(w.label)).append(kb.create("span").addClass("kb-view-head-resizer").on("mousedown,touchstart",function(x){return t(x,
w.code)}))}(kb.create("th"),q.fields[u])),q.fields[u].noLabel=!c;"viewer"!=g.mode&&(l||m++,p.elm("thead tr").append(kb.create("th").addClass("kb-view-head-cell kb-view-button kb-view-button-tables"+(l?" kb-unuse":""))));break;default:p.elm("thead tr").append(function(v){l||m++;return v.addClass("kb-view-head-cell"+(l?" kb-unuse":"")).attr("column-id",q.code).append(kb.create("span").addClass("kb-view-head-caption").html(q.label)).append(kb.create("span").addClass("kb-view-head-resizer").on("mousedown,touchstart",
function(w){return t(w,q.code)}))}(kb.create("th"))),q.noLabel=!c}})(b.fields[r],0!=g.fields.length?!g.fields.includes(r):!1)});p.elm("tbody tr").append(function(r){h.concat(Object.keys(b.fields).filter(function(k){return!h.includes(k)})).each(function(k,q){var l=b.fields[k],u=0!=g.fields.length?!g.fields.includes(k):!1;switch(l.type){case "SUBTABLE":r.append(kb.create("div").addClass("kb-view-row-cell"+(u?" kb-unuse":"")).append(kb.table.create(l,!0,!0,c)));break;default:r.append(kb.field.create(l).addClass("kb-view-row-cell"+
(u?" kb-unuse":"")))}});return r.append(kb.create("input").attr("type","hidden").attr("data-type","id"))}(kb.create("td").addClass("kb-scope").attr("form-id","form_"+b.id).attr("colspan",m.toString())))})(0!=g.fields.length?g.fields:Object.keys(b.fields));"viewer"==g.mode?(p.elms(".kb-field").each(function(h,r){return h.addClass("kb-readonly")}),p.elms(".kb-table-button").each(function(h,r){return h.addClass("kb-readonly")})):b.disables.each(function(h,r){p.elm('[field-id="'+CSS.escape(h.code)+'"]')&&
p.elm('[field-id="'+CSS.escape(h.code)+'"]').addClass("kb-readonly")});return p.spread(function(h,r){h.elm("[form-id=form_"+b.id+"]").on("change",function(k){h.addClass("kb-unsaved")});h.elm(".kb-view-row-add").on("click",function(k){(function(q){kb.event.call("kb.view.add",{container:q.elm("[form-id=form_"+b.id+"]"),record:kb.record.get(q.elm("[form-id=form_"+b.id+"]"),b,!0).record,viewId:f}).then(function(l){l.error?p.delRow(q):kb.event.call("kb.action.call",{record:l.record,mobile:c,pattern:"create",
workplace:"view"}).then(function(u){kb.event.call("kb.style.call",{record:u.record,mobile:u.mobile,pattern:u.pattern,workplace:u.workplace}).then(function(v){kb.record.set(q.elm("[form-id=form_"+b.id+"]").attr("unsaved","unsaved"),b,v.record).then(function(){kb.event.call("kb.view.add.complete",{container:q.elm("[form-id=form_"+b.id+"]"),viewId:f})});(function(w){q.elm("[form-id=form_"+b.id+"]").dispatchEvent(w)})(new Event("change"))})["catch"](function(){})})["catch"](function(){})})})(p.insertRow(h))});
h.elm(".kb-view-row-del").on("click",function(k){(function(q){q?kb.confirm(kb.constants.common.message.confirm["delete"][kb.operator.language],function(){kb.event.call("kb.view.delete",{container:h.elm("[form-id=form_"+b.id+"]"),record:kb.record.get(h.elm("[form-id=form_"+b.id+"]"),b,!0).record,viewId:f}).then(function(l){l.error||kb.view.records["delete"](b.id,[q]).then(function(u){return p.delRow(h)})["catch"](function(u){return kb.alert(kb.error.parse(u))})})}):p.delRow(h)})(h.elm("[data-type=id]").val())});
h.elm(".kb-view-row-copy").on("click",function(k){kb.confirm(kb.constants.common.message.confirm.copy[kb.operator.language],function(){(function(q,l){var u=Object.values(kb.field.parallelize(b.fields)).reduce(function(v,w){"FILE"==w.type&&(w.tableCode?q[w.tableCode].value.each(function(x,z){Array.prototype.push.apply(v,x.value[w.code].value)}):Array.prototype.push.apply(v,q[w.code].value));return v},[]);kb.file.clone(u).then(function(){kb.event.call("kb.view.copy",{container:l.elm("[form-id=form_"+
b.id+"]"),record:function(v){v.$id.value="";return v}(q),viewId:f}).then(function(v){v.error?p.delRow(l):kb.event.call("kb.action.call",{record:v.record,mobile:c,pattern:"reuse",workplace:"view"}).then(function(w){kb.event.call("kb.style.call",{record:w.record,mobile:w.mobile,pattern:"create",workplace:w.workplace}).then(function(x){kb.record.set(l.elm("[form-id=form_"+b.id+"]").attr("unsaved","unsaved"),b,x.record).then(function(){kb.event.call("kb.view.copy.complete",{container:l.elm("[form-id=form_"+
b.id+"]"),viewId:f})});(function(z){l.elm("[form-id=form_"+b.id+"]").dispatchEvent(z)})(new Event("change"))})["catch"](function(){})})["catch"](function(){})})})})(kb.record.get(h.elm("[form-id=form_"+b.id+"]"),b,!0).record,p.insertRow(h))})});h.elms(".kb-field").each(function(k,q){k.closest(".kb-scope").hasAttribute("form-id")&&kb.field.activate(k,b)});h.elms(".kb-table").each(function(k,q){kb.table.activate(k,b).clearRows();k.addRow()})},function(h,r){},!1)}(kb.create("table").addClass("kb-view").attr("view-id",
"view_"+a.id+"_"+f),kb.extend({},a),kb.extend({},a).view)).on("show",function(p){p=e.key();c||kb.elm(".kb_spread_style_"+CSS.escape(p))||(localStorage.getItem(p)?(kb.elm("head").append(kb.create("style").addClass("kb_spread_style_"+p).attr("media","screen").attr("type","text/css").text(localStorage.getItem(p))),e.set()):0!=kb.elm("[view-id=view_"+a.id+"_"+f+"]").elm("tbody").elms("tr").length&&e.set(!0))})};
window.KintoneBoosterView.prototype.load=function(d){return new Promise(function(a,f){kintone.api(kintone.api.url("/k/v1/app/views",!0),"GET",{app:d}).then(function(c){(function(e){a({origin:e,calendar:e.filter(function(p){return"CALENDAR"==p.type}),custom:e.filter(function(p){return"CUSTOM"==p.type}),list:e.filter(function(p){return"LIST"==p.type})})})(Object.values(c.views).sort(function(e,p){return e.index-p.index}))})["catch"](function(c){return kb.alert(kb.error.parse(c))})})};
window.kb.record||(window.kb.record=new KintoneBoosterRecord);window.kb.button||(window.kb.button=new KintoneBoosterButton);window.kb.field||(window.kb.field=new KintoneBoosterField);window.kb.table||(window.kb.table=new KintoneBoosterTable);window.kb.view||(window.kb.view=new KintoneBoosterView);
kb.constants=kb.extend({common:{caption:{button:{cancel:{en:"Cancel",ja:"\u30ad\u30e3\u30f3\u30bb\u30eb",zh:"\u53d6\u6d88"},submit:{en:"Submit",ja:"\u4fdd\u5b58",zh:"\u4fdd\u5b58"}},sort:{asc:{en:"asc",ja:"\u6607\u9806",zh:"\u5347\u5e8f"},desc:{en:"desc",ja:"\u964d\u9806",zh:"\u964d\u5e8f"}}},message:{confirm:{changed:{en:"Changes have not been saved.<br>Do you want to leave the page?",ja:"\u5909\u66f4\u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002<br>\u3053\u306e\u307e\u307e\u30da\u30fc\u30b8\u3092\u79fb\u52d5\u3057\u307e\u3059\u304b\uff1f",
zh:"\u66f4\u6539\u5c1a\u672a\u4fdd\u5b58\u3002<br>\u60a8\u662f\u5426\u8981\u79bb\u5f00\u6b64\u9875\u9762\uff1f"},cancel:{en:"The edits you made will be lost. Are you sure?",ja:"\u7de8\u96c6\u3057\u305f\u5185\u5bb9\u304c\u5931\u308f\u308c\u307e\u3059\u304c\u3001\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f",zh:"\u60a8\u7f16\u8f91\u7684\u5185\u5bb9\u5c06\u4f1a\u4e22\u5931\uff0c\u786e\u5b9a\u5417\uff1f"},copy:{en:"Are you sure on copy?",ja:"\u30b3\u30d4\u30fc\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f",
zh:"\u6211\u53ef\u4ee5\u590d\u5236\u5417\uff1f"},"delete":{en:"Are you sure on delete?",ja:"\u524a\u9664\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f",zh:"\u6211\u53ef\u4ee5\u5220\u9664\u5417\uff1f"},save:{en:"Are you sure on copy?",ja:"\u4fdd\u5b58\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f",zh:"\u6211\u53ef\u4ee5\u4fdd\u5b58\u5417\uff1f"},submit:{en:"Are you sure on submit?",ja:"\u9001\u4fe1\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f",
zh:"\u6211\u53ef\u4ee5\u53d1\u9001\u5417\uff1f"}},invalid:{record:{en:"There is an error in the input data.",ja:"\u5165\u529b\u5185\u5bb9\u306b\u8aa4\u308a\u304c\u3042\u308a\u307e\u3059\u3002",zh:"\u8f93\u5165\u5185\u5bb9\u6709\u8bef\u3002"},submit:{en:"No data to submit was found.",ja:"\u7de8\u96c6\u4e2d\u306e\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093\u3002",zh:"\u6b63\u5728\u7f16\u8f91\u7684\u6570\u636e\u4e0d\u5b58\u5728\u3002"}}}},picker:{caption:{name:{en:"Name",ja:"\u8868\u793a\u540d",
zh:"\u663e\u793a\u540d\u79f0"},recordnumber:{en:"Record number",ja:"\u30ec\u30b3\u30fc\u30c9\u756a\u53f7",zh:"\u8bb0\u5f55\u53f7"}}}},kb.constants);