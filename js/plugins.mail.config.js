/*
* FileName "plugins.mail.config.js"
* Version: 1.0.0
* Copyright (c) 2023 Pandafirm LLC
* Distributed under the terms of the GNU Lesser General Public License.
* https://opensource.org/licenses/LGPL-2.1
*/
(function(e){var g={};kb.field.load(kintone.app.getId()).then(function(k){kb.status.load(kintone.app.getId()).then(function(n){kb.view.load(kintone.app.getId()).then(function(p){kb.config[e].build({submit:function(l,h){try{var f=!1;h.tab=[];h.flat={};(function(b){kb.config[e].tabbed.tabs.some(function(c){var a=kb.record.get(c.panel,b);a.error?(kb.alert(kb.constants.common.message.invalid.record[kb.operator.language]),kb.config[e].tabbed.activate(c),f=!0):(f||(a.record.event.value.includes("process")?
a.record.action.value||(kb.alert(kb.constants.config.message.invalid.action[kb.operator.language]),kb.config[e].tabbed.activate(c),f=!0):a.record.action.value=""),f||(a.record.event.value.includes("detail")?(a.record.label.value||(kb.alert(kb.constants.config.message.invalid.label.detail[kb.operator.language]),kb.config[e].tabbed.activate(c),f=!0),a.record.message.value||(kb.alert(kb.constants.config.message.invalid.message.detail[kb.operator.language]),kb.config[e].tabbed.activate(c),f=!0)):a.record.event.value.includes("index")?
(a.record.label.value||(kb.alert(kb.constants.config.message.invalid.label.index[kb.operator.language]),kb.config[e].tabbed.activate(c),f=!0),a.record.message.value||(kb.alert(kb.constants.config.message.invalid.message.index[kb.operator.language]),kb.config[e].tabbed.activate(c),f=!0)):(a.record.label.value="",a.record.message.value="",a.record.view.value="")),f||h.tab.push({label:c.label.html(),setting:a.record}));return f})})({id:g.app.id,fields:g.app.fields.tab});h.tab=JSON.stringify(h.tab);h.flat=
JSON.stringify(h.flat);return f?!1:h}catch(b){return kb.alert(kb.error.parse(b)),!1}}},function(l,h){try{g.app={id:e,fields:{tab:{event:{code:"event",type:"CHECK_BOX",label:"",required:!0,noLabel:!0,options:[{index:0,label:"create"},{index:1,label:"edit"},{index:2,label:"process"},{index:3,label:"detail"},{index:4,label:"index"}]},action:{code:"action",type:"DROP_DOWN",label:kb.constants.config.caption.action[kb.operator.language],required:!1,noLabel:!1,options:[]},label:{code:"label",type:"SINGLE_LINE_TEXT",
label:kb.constants.config.caption.label[kb.operator.language],required:!1,noLabel:!1,placeholder:""},message:{code:"message",type:"SINGLE_LINE_TEXT",label:kb.constants.config.caption.message[kb.operator.language],required:!1,noLabel:!1,placeholder:""},view:{code:"view",type:"DROP_DOWN",label:kb.constants.config.caption.view[kb.operator.language],required:!1,noLabel:!1,options:[]}},flat:{}}};var f=function(b,c,a){var d=kb.record,m=d.set,q=b.panel;a.event.value.includes("process")&&b.panel.elm("[field-id=action]").closest("section").removeClass("kb-hidden");
a.event.value.includes("detail")&&b.panel.elm("[field-id=label]").closest("section").removeClass("kb-hidden");a.event.value.includes("detail")&&b.panel.elm("[field-id=message]").closest("section").removeClass("kb-hidden");a.event.value.includes("index")&&b.panel.elm("[field-id=label]").closest("section").removeClass("kb-hidden");a.event.value.includes("index")&&b.panel.elm("[field-id=message]").closest("section").removeClass("kb-hidden");a.event.value.includes("index")&&b.panel.elm("[field-id=view]").closest("section").removeClass("kb-hidden");
m.call(d,q,c,a)};(function(b){for(var c in b)g.app.fields.tab[c]=b[c]})(kb.config[e].ui.fields.conditions.get(k));(function(b){for(var c in b)g.app.fields.tab[c]=b[c]})(kb.config[e].ui.fields.users.get(k));kb.config[e].tabbed=new KintoneBoosterConfigTabbed(l,{add:function(b){(function(c){b.panel.addClass("kb-scope").attr("form-id","form_"+c.id).append(kb.config[e].ui.fields.users.set(kb.config[e].ui.fields.conditions.set(kb.create("div").addClass("kb-config-tabbed-panel-block"),c),c).append(kb.create("h1").html(kb.constants.config.caption.event[kb.operator.language])).append(kb.create("section").append(kb.field.activate(function(a){a.elms("[type=checkbox]").each(function(d,
m){d.closest("label").elm("span").html(kb.constants.config.caption.event[d.val()][kb.operator.language])});return a}(kb.field.create(c.fields.event)),c))).append(kb.create("section").addClass("kb-hidden").append(kb.field.activate(function(a){a.elm("select").empty().assignOption([{code:"",label:""}].concat(n.actions.map(function(d){return{code:d.key,label:d.name+"&nbsp;("+d.from+"&nbsp;&gt;&nbsp;"+d.to+")"}})),"label","code");return a}(kb.field.create(c.fields.action)),c))).append(kb.create("section").addClass("kb-hidden").append(kb.field.activate(kb.field.create(c.fields.label).css({width:"100%"}),
c))).append(kb.create("section").addClass("kb-hidden").append(kb.field.activate(kb.field.create(c.fields.message).css({width:"100%"}),c))).append(kb.create("section").addClass("kb-hidden").append(kb.field.activate(function(a){a.elm("select").empty().assignOption([{code:"",label:kb.constants.config.caption.view.all[kb.operator.language]}].concat(p.list.map(function(d){return{code:d.id,label:d.name}})),"label","code");return a}(kb.field.create(c.fields.view)),c))));kb.event.on("kb.change.event",function(a){a.container==
b.panel&&(b.panel.elm("[field-id=action]").closest("section").addClass("kb-hidden"),b.panel.elm("[field-id=view]").closest("section").addClass("kb-hidden"),b.panel.elm("[field-id=label]").closest("section").addClass("kb-hidden"),b.panel.elm("[field-id=message]").closest("section").addClass("kb-hidden"),a.record.event.value.includes("process")&&b.panel.elm("[field-id=action]").closest("section").removeClass("kb-hidden"),a.record.event.value.includes("detail")&&b.panel.elm("[field-id=label]").closest("section").removeClass("kb-hidden"),
a.record.event.value.includes("detail")&&b.panel.elm("[field-id=message]").closest("section").removeClass("kb-hidden"),a.record.event.value.includes("index")&&b.panel.elm("[field-id=label]").closest("section").removeClass("kb-hidden"),a.record.event.value.includes("index")&&b.panel.elm("[field-id=message]").closest("section").removeClass("kb-hidden"),a.record.event.value.includes("index")&&b.panel.elm("[field-id=view]").closest("section").removeClass("kb-hidden"));return a});b.panel.elms("input,select,textarea").each(function(a,
d){return a.initialize()})})({id:g.app.id,fields:g.app.fields.tab})},copy:function(b,c){var a={id:g.app.id,fields:g.app.fields.tab};f(c,a,kb.record.get(b.panel,a,!0).record)},del:function(b){}});0!=Object.keys(h).length?function(b){b.each(function(c){var a={id:g.app.id,fields:g.app.fields.tab},d=kb.config[e].tabbed.add();f(d,a,c.setting);d.label.html(c.label)})}(JSON.parse(h.tab)):kb.config[e].tabbed.add()}catch(b){kb.alert(kb.error.parse(b))}})})})})})(kintone.$PLUGIN_ID);
kb.constants=kb.extend({config:{caption:{action:{en:"Action Name",ja:"\u30a2\u30af\u30b7\u30e7\u30f3\u540d",zh:"\u64cd\u4f5c\u540d\u79f0"},event:{en:"Action Available Event",ja:"\u52d5\u4f5c\u30a4\u30d9\u30f3\u30c8",zh:"\u53ef\u64cd\u4f5c\u4e8b\u4ef6",create:{en:"After Record Creation Success",ja:"\u30ec\u30b3\u30fc\u30c9\u8ffd\u52a0\u753b\u9762\u3067\u306e\u30ec\u30b3\u30fc\u30c9\u4fdd\u5b58\u6210\u529f\u5f8c",zh:"\u8bb0\u5f55\u521b\u5efa\u6210\u529f\u540e"},detail:{en:"Clicking the button on the record detail page",
ja:"\u30ec\u30b3\u30fc\u30c9\u8a73\u7d30\u753b\u9762\u3067\u306e\u30dc\u30bf\u30f3\u30af\u30ea\u30c3\u30af",zh:"\u5728\u8bb0\u5f55\u8be6\u7ec6\u9875\u9762\u4e0a\u70b9\u51fb\u6309\u94ae"},edit:{en:"After Record Edit Success",ja:"\u30ec\u30b3\u30fc\u30c9\u7de8\u96c6\u753b\u9762\u3067\u306e\u30ec\u30b3\u30fc\u30c9\u4fdd\u5b58\u6210\u529f\u5f8c",zh:"\u8bb0\u5f55\u7f16\u8f91\u6210\u529f\u540e"},process:{en:"Process Action",ja:"\u30d7\u30ed\u30bb\u30b9\u30a2\u30af\u30b7\u30e7\u30f3",zh:"\u8fc7\u7a0b\u64cd\u4f5c"},
index:{en:"Bulk Execution from List View",ja:"\u4e00\u89a7\u753b\u9762\u304b\u3089\u306e\u4e00\u62ec\u5b9f\u884c",zh:"\u4ece\u5217\u8868\u5c4f\u5e55\u7684\u6279\u91cf\u6267\u884c"}},label:{en:"Execution Button Label",ja:"\u5b9f\u884c\u30dc\u30bf\u30f3\u306e\u30e9\u30d9\u30eb\u30c6\u30ad\u30b9\u30c8",zh:"\u6267\u884c\u6309\u94ae\u7684\u6807\u7b7e\u540d\u79f0"},message:{en:"Execution Confirmation Dialog Message",ja:"\u5b9f\u884c\u78ba\u8a8d\u30c0\u30a4\u30a2\u30ed\u30b0\u306e\u30e1\u30c3\u30bb\u30fc\u30b8",
zh:"\u6267\u884c\u786e\u8ba4\u5bf9\u8bdd\u6846\u7684\u6d88\u606f"},view:{en:"Executable List View",ja:"\u5b9f\u884c\u53ef\u80fd\u306a\u4e00\u89a7\u753b\u9762",zh:"\u53ef\u6267\u884c\u7684\u5217\u8868\u5c4f\u5e55",all:{en:"No restrictions",ja:"\u5236\u9650\u3057\u306a\u3044",zh:"\u4e0d\u9650\u5236"}}},message:{invalid:{action:{en:'If you specify "Process Action" for the action event, please indicate its action name.',ja:"\u52d5\u4f5c\u30a4\u30d9\u30f3\u30c8\u306b\u300c\u30d7\u30ed\u30bb\u30b9\u30a2\u30af\u30b7\u30e7\u30f3\u300d\u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u306f\u3001\u305d\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u540d\u3092\u6307\u5b9a\u3057\u3066\u4e0b\u3055\u3044\u3002",
zh:"\u5982\u679c\u5728\u64cd\u4f5c\u4e8b\u4ef6\u4e2d\u6307\u5b9a\u4e86\u201c\u8fc7\u7a0b\u64cd\u4f5c\u201d\uff0c\u8bf7\u6307\u5b9a\u5176\u64cd\u4f5c\u540d\u79f0\u3002"},label:{detail:{en:'If you specify "Clicking the button on the record detail page" for the action event, please input its execution button label.',ja:"\u52d5\u4f5c\u30a4\u30d9\u30f3\u30c8\u306b\u300c\u30ec\u30b3\u30fc\u30c9\u8a73\u7d30\u753b\u9762\u3067\u306e\u30dc\u30bf\u30f3\u30af\u30ea\u30c3\u30af\u300d\u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u306f\u3001\u305d\u306e\u5b9f\u884c\u30dc\u30bf\u30f3\u306e\u30e9\u30d9\u30eb\u30c6\u30ad\u30b9\u30c8\u3092\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044\u3002",
zh:"\u5982\u679c\u5728\u64cd\u4f5c\u4e8b\u4ef6\u4e2d\u6307\u5b9a\u4e86\u201c\u5728\u8bb0\u5f55\u8be6\u7ec6\u9875\u9762\u4e0a\u70b9\u51fb\u6309\u94ae\u201d\uff0c\u8bf7\u8f93\u5165\u5176\u6267\u884c\u6309\u94ae\u7684\u6807\u7b7e\u540d\u79f0\u3002"},index:{en:'If you specify "Bulk Execution from List View" for the action event, please input its execution button label.',ja:"\u52d5\u4f5c\u30a4\u30d9\u30f3\u30c8\u306b\u300c\u4e00\u89a7\u753b\u9762\u304b\u3089\u306e\u4e00\u62ec\u5b9f\u884c\u300d\u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u306f\u3001\u305d\u306e\u5b9f\u884c\u30dc\u30bf\u30f3\u306e\u30e9\u30d9\u30eb\u30c6\u30ad\u30b9\u30c8\u3092\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044\u3002",
zh:"\u5982\u679c\u5728\u64cd\u4f5c\u4e8b\u4ef6\u4e2d\u6307\u5b9a\u4e86\u201c\u4ece\u5217\u8868\u5c4f\u5e55\u7684\u6279\u91cf\u6267\u884c\u201d\uff0c\u8bf7\u8f93\u5165\u5176\u6267\u884c\u6309\u94ae\u7684\u6807\u7b7e\u540d\u79f0\u3002"}},message:{detail:{en:'If you specify "Clicking the button on the record detail page" for the action event, please input its execution confirmation dialog message.',ja:"\u52d5\u4f5c\u30a4\u30d9\u30f3\u30c8\u306b\u300c\u30ec\u30b3\u30fc\u30c9\u8a73\u7d30\u753b\u9762\u3067\u306e\u30dc\u30bf\u30f3\u30af\u30ea\u30c3\u30af\u300d\u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u306f\u3001\u305d\u306e\u5b9f\u884c\u78ba\u8a8d\u30c0\u30a4\u30a2\u30ed\u30b0\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044\u3002",
zh:"\u5982\u679c\u5728\u64cd\u4f5c\u4e8b\u4ef6\u4e2d\u6307\u5b9a\u4e86\u201c\u5728\u8bb0\u5f55\u8be6\u7ec6\u9875\u9762\u4e0a\u70b9\u51fb\u6309\u94ae\u201d\uff0c\u8bf7\u8f93\u5165\u5176\u6267\u884c\u786e\u8ba4\u5bf9\u8bdd\u6846\u7684\u6d88\u606f\u3002"},index:{en:'If you specify "Bulk Execution from List View" for the action event, please input its execution confirmation dialog message.',ja:"\u52d5\u4f5c\u30a4\u30d9\u30f3\u30c8\u306b\u300c\u4e00\u89a7\u753b\u9762\u304b\u3089\u306e\u4e00\u62ec\u5b9f\u884c\u300d\u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u306f\u3001\u305d\u306e\u5b9f\u884c\u78ba\u8a8d\u30c0\u30a4\u30a2\u30ed\u30b0\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044\u3002",
zh:"\u5982\u679c\u5728\u64cd\u4f5c\u4e8b\u4ef6\u4e2d\u6307\u5b9a\u4e86\u201c\u4ece\u5217\u8868\u5c4f\u5e55\u7684\u6279\u91cf\u6267\u884c\u201d\uff0c\u8bf7\u8f93\u5165\u5176\u6267\u884c\u786e\u8ba4\u5bf9\u8bdd\u6846\u7684\u6d88\u606f\u3002"}}}}}},kb.constants);